"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["95900"],{426831:function(e,n,s){e.exports=s.p+"f9e18e3049e471717cf2.svg"},257510:function(e,n,s){e.exports=s.p+"0e72033c60770cfc4a78.svg"},74838:function(e,n,s){e.exports=s.p+"fa9b1ae8d7c7ed9b1e89.svg"},720834:function(e,n,s){e.exports=s.p+"e907b5a0f29a0608596d.svg"},385925:function(e,n,s){e.exports=s.p+"13554545ee03bcb9526c.svg"},588921:function(e,n,s){e.exports=s.p+"8fbb9cda2bcb0b0f364f.svg"},718720:function(e,n,s){e.exports=s.p+"7cb4e15e625af682f6c9.svg"},721513:function(e,n,s){e.exports=s.p+"e5f5fbb464426907c65f.svg"},576688:function(e,n,s){e.exports=s.p+"ad27ebf433d77aefb737.svg"},241822:function(e,n,s){e.exports=s.p+"a9a05015f7119a88c5bf.png"},190947:function(e,n,s){s.d(n,{b:function(){return r}});var l=s(735250);s(470079);var t=s(481060),i=s(991862);function r(e){let{currencies:n,className:s,children:t}=e;return n.length<2?null:(0,l.jsx)("div",{className:s,children:t})}n.Z=function(e){let{currencies:n,onChange:s,selectedCurrency:r,className:a,disabled:c=!1}=e;if(n.length<2)return null;let o=n.map((e,n)=>({key:n,value:e,label:"".concat(e.toUpperCase()," - ").concat((0,i.T)(e))}));return(0,l.jsx)(t.SingleSelect,{value:r,options:o,onChange:e=>{null!=e&&s(e)},className:a,isDisabled:c})}},86040:function(e,n,s){s.d(n,{C:function(){return c},N:function(){return o}});var l=s(735250);s(470079);var t=s(481060),i=s(285952),r=s(689938),a=s(454234);let c=e=>{let{className:n,isEmailResent:s,resendEmail:i}=e;return(0,l.jsx)("div",{className:n,children:(0,l.jsxs)("div",{className:a.awaitingWrapper,children:[(0,l.jsx)(t.Heading,{variant:"heading-xl/bold",children:r.Z.Messages.PAYMENT_WAITING_FOR_PURCHASE_TOKEN_AUTHORIZATION_MODAL_HEADER}),(0,l.jsxs)("p",{children:[(0,l.jsx)(t.Text,{variant:"text-md/normal",children:r.Z.Messages.PAYMENT_WAITING_FOR_PURCHASE_TOKEN_AUTHORIZATION_MODAL}),(0,l.jsx)("br",{}),(0,l.jsx)(t.Text,{variant:"text-md/normal",children:r.Z.Messages.PAYMENT_WAITING_FOR_PURCHASE_TOKEN_AUTHORIZATION_MODAL_INSTRUCTIONS}),(0,l.jsx)("br",{}),(0,l.jsxs)(t.Text,{variant:"text-md/normal",children:[r.Z.Messages.PAYMENT_WAITING_FOR_PURCHASE_TOKEN_AUTHORIZATION_MODAL_RESEND_PROMPT,"\xa0",s?r.Z.Messages.PAYMENT_WAITING_FOR_PURCHASE_TOKEN_AUTHORIZATION_MODAL_RESEND_SENT:(0,l.jsx)(t.Anchor,{onClick:i,children:r.Z.Messages.PAYMENT_WAITING_FOR_PURCHASE_TOKEN_AUTHORIZATION_MODAL_RESEND_ACTION})]})]})]})})},o=()=>(0,l.jsx)("div",{children:(0,l.jsx)(t.ModalFooter,{justify:i.Z.Justify.BETWEEN,align:i.Z.Align.CENTER,children:(0,l.jsx)(t.Button,{"data-testid":"continue",color:t.Button.Colors.BRAND,disabled:!0,children:r.Z.Messages.PAYMENT_WAITING_FOR_PURCHASE_TOKEN_AUTHORIZATION_MODAL_NEXT_BUTTON})})})},620037:function(e,n,s){let l=(0,s(818083).B)({kind:"user",id:"2023-12_collectibles_gifting_dm_entrypoint",label:"Collectibles Gifting From DM's",defaultConfig:{confirmUpsellEnabled:!1},treatments:[{id:2,label:"Collectibles Gifting from DM's Enabled With Confirm Step Upsell",config:{confirmUpsellEnabled:!0}}]});n.Z=e=>{let{location:n,autoTrackExposure:s=!0,trackExposureOptions:t={}}=e;return l.useExperiment({location:n},{autoTrackExposure:s,trackExposureOptions:t})}},940824:function(e,n,s){var l=s(735250);s(470079);var t=s(481060),i=s(37234),r=s(100527),a=s(906732),c=s(703656),o=s(335131),u=s(981631),d=s(689938),_=s(840898);n.Z=e=>{let{onClose:n}=e,{analyticsLocations:s}=(0,a.ZP)(),m=()=>{n(),(0,c.uL)(u.Z5c.COLLECTIBLES_SHOP),(0,o.mK)({openInLayer:!1,analyticsSource:r.Z.PREMIUM_PAYMENT_MODAL,analyticsLocations:s}),(0,i.xf)()};return(0,l.jsxs)("div",{className:_.container,children:[(0,l.jsx)("div",{className:_.iconBackground,children:(0,l.jsx)(t.ShopIcon,{size:"custom",width:20,height:20,color:t.tokens.colors.WHITE})}),(0,l.jsx)(t.Text,{variant:"text-sm/normal",color:"header-primary",children:d.Z.Messages.COLLECTIBLES_GIFT_CODE_MODAL_UPSELL.format({checkItOut:e=>(0,l.jsx)(t.Clickable,{className:_.link,onClick:m,children:e})})})]})}},632580:function(e,n,s){s.d(n,{H:function(){return p}}),s(47120);var l=s(512722),t=s.n(l),i=s(570140),r=s(355467),a=s(976255),c=s(366939),o=s(16084),u=s(255078),d=s(626135),_=s(74538),m=s(45572),E=s(981631),I=s(474936);async function p(e){let{setPurchaseState:n,setHasAcceptedTerms:s,setIsSubmitting:l,setPurchaseError:p,hasRedirectURL:N,setHasRedirectURL:T,isGift:x,baseAnalyticsData:S,analyticsLocation:h,analyticsLocations:P,flowStartTime:f,subscriptionPlan:A,planGroup:v,trialId:M,priceOptions:g,paymentSource:C,isPrepaidPaymentPastDue:O,openInvoiceId:R,premiumSubscription:j,onNext:L,metadata:y,sku:Z,skuPricePreview:b,purchaseType:D,referralCode:G,loadId:U,giftInfoOptions:F,invoicePreview:B}=e;n(m.A.PURCHASING),s(!0),l(!0),i.Z.wait(a.fw),p(null);try{let e,s,l;if(d.default.track(E.rMx.PAYMENT_FLOW_COMPLETED,{...S,subtotal:null==B?void 0:B.subtotal,tax:null==B?void 0:B.tax,expected_amount:null==B?void 0:B.total,expected_currency:null==B?void 0:B.currency,duration_ms:Date.now()-f}),N)return;if(D===E.GZQ.ONE_TIME)t()(null!=Z,"SKU must exist and be fetched."),t()(null!=b,"SKUPricePreview must exist."),e=await (0,o.ZZ)(Z.applicationId,Z.id,{expectedAmount:b.amount,expectedCurrency:b.currency,isGift:x,paymentSource:C,loadId:U,giftInfoOptions:F});else if(t()(null!=A,"Missing subscriptionPlan"),x){t()(null!=B,"Missing invoicePreview");let n=B.total,s=B.currency;e=await (0,o.ZZ)(I.RQ,A.skuId,{expectedAmount:n,expectedCurrency:s,paymentSource:C,subscriptionPlanId:A.id,isGift:!0,loadId:U,giftInfoOptions:F})}else if(O&&null!=R&&null!=C&&null!=j)e=E.Uk1.has(C.type)?await (0,r.G)(j,R,C,g.currency):await (0,r.Mg)(j,{paymentSource:C,currency:g.currency},P,h,U);else if(null!=j){let n=(0,_.al)(j,A.id,1,new Set(v)),s={paymentSource:C,currency:g.currency};j.status===E.O0b.PAUSED?s.status=E.O0b.ACTIVE:s.items=n,e=await (0,r.Mg)(j,s,P,h,U)}else e=await (0,c.Ld)({planId:A.id,currency:g.currency,paymentSource:C,trialId:M,metadata:y,referralCode:G,loadId:U});if(e.redirectConfirmation){T(null!=e.redirectURL);return}n(m.A.COMPLETED),"subscription"in e?s=null!=e.subscription?u.Z.createFromServer(e.subscription):null:"entitlements"in e&&(l=null!=e.entitlements?e.entitlements:void 0),L(s,l)}catch(e){n(m.A.FAIL),p(e),d.default.track(E.rMx.PAYMENT_FLOW_FAILED,{...S,payment_error_code:null==e?void 0:e.code,payment_source_id:null==C?void 0:C.id,payment_source_type:null==C?void 0:C.type,duration_ms:Date.now()-f})}finally{!N&&l(!1)}}},276442:function(e,n,s){s.d(n,{J:function(){return p}});var l=s(512722),t=s.n(l),i=s(792986),r=s(639119),a=s(3409),c=s(626135),o=s(987209),u=s(598),d=s(409813),_=s(45572),m=s(189877),E=s(981631),I=s(474936);function p(e){let{analyticsData:n,initialPlanId:s,breadcrumbSteps:l,handleStepChange:p,referralTrialOfferId:N,onReturn:T,continueSession:x=!1}=e,{contextMetadata:S,step:h,paymentSources:P,paymentSourceId:f,setPaymentSourceId:A,purchaseError:v,setPurchaseError:M,purchaseErrorBlockRef:g,paymentAuthenticationState:C,selectedSkuId:O,activeSubscription:R,previousStepRef:j,setPurchaseState:L}=(0,u.usePaymentContext)(),{isGift:y}=(0,o.wD)(),Z={...(0,a.fL)(),paymentSources:P,paymentSourceId:f,setPaymentSourceId:A,purchaseError:v,setPurchaseError:M,purchaseErrorBlockRef:g,paymentAuthenticationState:C,selectedSkuId:O,isGift:y},b=(0,r.N)(N),D=!y&&null!=b&&null!=O&&I.nG[b.trial_id].skus.includes(O),G=null!=T?T:()=>{p(Object.values(P).length<1&&null==s?d.h8.PLAN_SELECT:d.h8.REVIEW,{trackedFromStep:d.h8.PAYMENT_TYPE})};t()(h,"Step should be set here");let U=(0,i.Z)(()=>Date.now(),[h]);return(0,a.vP)({paymentModalArgs:Z,initialStep:x&&null==j.current?d.h8.CREDIT_CARD_INFORMATION:d.h8.PAYMENT_TYPE,prependSteps:[d.h8.PROMOTION_INFO],appendSteps:[d.h8.REVIEW,d.h8.CONFIRM],breadcrumpSteps:l,currentBreadcrumpStep:h,usePaymentModalStep:!0,onReturn:G,onComplete:e=>{e===d.h8.AWAITING_BROWSER_CHECKOUT?(L(_.A.COMPLETED),p(d.h8.CONFIRM,{trackedFromStep:e})):p(d.h8.REVIEW,{trackedFromStep:e})},onStepChange:e=>{let{currentStep:s,toStep:l}=e,t=Date.now();c.default.track(E.rMx.PAYMENT_FLOW_STEP,{...n,from_step:s,to_step:l,step_duration_ms:t-U,flow_duration_ms:t-S.startTime})},isEligibleForTrial:D,allowDesktopRedirectPurchase:(0,m.tr)(O,y,R)})}},793541:function(e,n,s){s.d(n,{Z:function(){return c}});var l=s(735250);s(470079);var t=s(723484),i=s(51499),r=s(614277),a=s(397605);function c(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Z,{}),(0,l.jsx)(r.C3,{children:(0,l.jsx)(t.F,{className:a.awaitingAuthenticationStep})})]})}},380898:function(e,n,s){s.d(n,{Z:function(){return u}}),s(47120);var l=s(735250),t=s(470079),i=s(16084),r=s(86040),a=s(51499),c=s(614277),o=s(767625);function u(){let[e,n]=t.useState(!1),s=async()=>{n(!0),await (0,i.xA)()};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.Z,{}),(0,l.jsx)(c.C3,{children:(0,l.jsx)(r.C,{className:o.body,isEmailResent:e,resendEmail:s})}),(0,l.jsx)(c.O3,{children:(0,l.jsx)(r.N,{})})]})}},710094:function(e,n,s){s.d(n,{l:function(){return C}}),s(47120),s(411104);var l=s(735250),t=s(470079),i=s(512722),r=s.n(i),a=s(330726),c=s(711459),o=s(104494),u=s(639119),d=s(716534),_=s(664891),m=s(911367),E=s(669079),I=s(987209),p=s(598),N=s(409813),T=s(809144),x=s(698708),S=s(614223),h=s(481595),P=s(51499),f=s(678334),A=s(614277),v=s(474936),M=s(231338),g=s(689938);function C(e){var n,s;let i,{handleStepChange:C,trialId:O,trialFooterMessageOverride:R,reviewWarningMessage:j,planGroup:L,openInvoiceId:y,analyticsData:Z,analyticsLocation:b,referralTrialOfferId:D,initialPlanId:G,subscriptionTier:U,handleClose:F}=e,{activeSubscription:B,setUpdatedSubscription:w,contextMetadata:H,currencies:k,paymentSourceId:W,paymentSources:Y,priceOptions:K,purchaseError:V,purchaseTokenAuthState:z,selectedPlan:X,selectedSkuId:J,setCurrency:q,setPaymentSourceId:Q,setPurchaseState:$,setPurchaseError:ee,step:en,purchaseState:es,isPremium:el,setHasAcceptedTerms:et,purchaseType:ei,setEntitlementsGranted:er,startedPaymentFlowWithPaymentSourcesRef:ea,invoicePreview:ec}=(0,p.usePaymentContext)(),{isGift:eo,giftMessage:eu,giftRecipient:ed}=(0,I.wD)();r()(null!=en,"Step should be set");let e_=t.useRef(null),[em,eE]=(0,a.Z)(!1,500);(0,m.t)();let eI=null!==(s=null!=O?O:D)&&void 0!==s?s:null,ep=null!=eI&&(!el||v.nG[eI].skus.includes(J))?eI:null,eN=(0,u.N)(D),eT=(0,o.Ng)(),ex={user_trial_offer_id:null==eN?void 0:eN.id};t.useEffect(()=>{null!=V&&null!=e_.current&&e_.current.scrollIntoView({behavior:"smooth"})},[V]);let eS=t.useCallback((e,n)=>{w(e),null!=n&&er(n),C(N.h8.CONFIRM,{fulfillment:{subscription:e,entitlements:n}})},[C,w,er]),eh=null!=W?Y[W]:null,eP=null!=X&&v.o4.has(X.id)&&null!=eh&&!(0,c.aQ)(eh)?Error(g.Z.Messages.BILLING_ERROR_INVALID_PLAN_FOR_PAYMENT_SOURCE):null,ef=t.useRef(null),[eA,ev]=t.useState(null),eM=!eo&&null!=eN&&null!=J&&v.nG[eN.trial_id].skus.includes(J),eg=null==eT?void 0:null===(n=eT.discount)||void 0===n?void 0:n.plan_ids,eC=!eo&&null!=eT&&null!=eg&&null!=X&&eg.includes(X.id),eO=eo&&(0,E.pO)(ed),eR=null==G&&null==U&&ei===M.GZ.SUBSCRIPTION,ej=(0,S.Kp)({isTrial:eM,isGift:eo,selectedSkuId:J,startedPaymentFlowWithPaymentSources:ea.current}),eL=eo&&ei===M.GZ.ONE_TIME,ey=eL||(ej?eR&&el:el),eZ=t.useCallback(()=>{if(ej){C(N.h8.SKU_SELECT);return}return eL?C(N.h8.GIFT_CUSTOMIZATION):C(N.h8.PLAN_SELECT)},[C,ej,eL]),eb=!1;return ei===M.GZ.ONE_TIME?i=(0,l.jsx)(h.Z,{hasLegalTermsFlash:em,legalTermsNodeRef:ef,onPaymentSourceChange:e=>Q(null!=e?e.id:null),handlePaymentSourceAdd:()=>C(N.h8.ADD_PAYMENT_STEPS)}):(eb=eo?null==ec:null!=eh&&ei===M.GZ.SUBSCRIPTION&&eM&&!eh.canRedeemTrial(),null==B||eo?(r()(null!=X,"Expected plan to be selected"),i=(0,l.jsx)(d.Z,{selectedPlanId:X.id,paymentSources:Y,onPaymentSourceChange:e=>Q(null!=e?e.id:null),priceOptions:K,currencies:k,onCurrencyChange:e=>q(e),handlePaymentSourceAdd:()=>C(N.h8.ADD_PAYMENT_STEPS),setHasAcceptedTerms:et,legalTermsNodeRef:ef,hasLegalTermsFlash:em,trialId:ep,trialFooterMessageOverride:R,reviewWarningMessage:j,purchaseState:es,referralTrialOfferId:D,isTrial:eM||null!=O&&null!=R,isDiscount:eC,handleClose:F})):(r()(null!=X,"Expected plan to be selected"),i=(0,l.jsx)(_.Z,{premiumSubscription:B,paymentSources:Y,priceOptions:K,onPaymentSourceChange:e=>{Q(null!=e?e.id:null)},onPaymentSourceAdd:()=>{C(N.h8.ADD_PAYMENT_STEPS)},planId:X.id,setHasAcceptedTerms:et,legalTermsNodeRef:ef,hasLegalTermsFlash:em,onInvoiceError:e=>ev(e),planGroup:L,currencies:k,onCurrencyChange:e=>q(e),hasOpenInvoice:null!=y,purchaseState:es,handleClose:F}))),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.P,{giftMessage:eu}),!eO&&(0,l.jsx)(P.Z,{isEligibleForTrial:eM}),(0,l.jsxs)(A.C3,{children:[(0,l.jsx)(x.Z,{}),i]}),(0,l.jsx)(A.O3,{children:(0,l.jsx)(f.Z,{premiumSubscription:null!=B?B:null,setPurchaseState:$,onBack:eZ,onNext:eS,onPurchaseError:e=>ee(e),legalTermsNodeRef:ef,flashLegalTerms:()=>eE(!0),invoiceError:eA,planError:eP,analyticsLocation:b,baseAnalyticsData:Z,flowStartTime:H.startTime,trialId:ep,planGroup:L,purchaseTokenAuthState:z,openInvoiceId:y,backButtonEligible:ey,metadata:ex,isTrial:eM,disablePurchase:eb})})]})}},678334:function(e,n,s){s.d(n,{Z:function(){return R}}),s(47120);var l=s(735250),t=s(470079),i=s(512722),r=s.n(i),a=s(442837),c=s(481060),o=s(355467),u=s(906732),d=s(160913),_=s(311821),m=s(459965),E=s(858987),I=s(975060),p=s(882712),N=s(855775),T=s(285952),x=s(626135),S=s(669079),h=s(74538),P=s(987209),f=s(598),A=s(632580),v=s(45572),M=s(919778),g=s(612853),C=s(981631),O=s(248317);function R(e){let{premiumSubscription:n,setPurchaseState:s,onBack:i,onNext:R,legalTermsNodeRef:j,flashLegalTerms:L,invoiceError:y,planError:Z,onPurchaseError:b,baseAnalyticsData:D,flowStartTime:G,trialId:U,planGroup:F,analyticsLocation:B,purchaseTokenAuthState:w,openInvoiceId:H,metadata:k,backButtonEligible:W,disablePurchase:Y,isTrial:K=!1}=e,{selectedPlan:V,priceOptions:z,setHasAcceptedTerms:X,setPurchaseError:J,purchaseType:q,paymentSourceId:Q,paymentSources:$,selectedSkuId:ee,skusById:en,skuPricePreviewsById:es,referralCode:el,contextMetadata:et,invoicePreview:ei}=(0,f.usePaymentContext)(),{isGift:er,selectedGiftStyle:ea,customGiftMessage:ec,emojiConfetti:eo,soundEffect:eu,giftRecipient:ed}=(0,P.wD)(),e_=(0,S.MY)(ed),em={};em.gift_style=ea,e_===S.xr.CUSTOM_MESSAGE_EMOJI_SOUNDBOARD&&(r()(null!=ed,"Gift recipient must be set at purchase review step for these gift options."),em.recipient_id=ed.id,em.custom_message=ec,em.emoji_id=null==eo?void 0:eo.id,em.emoji_name=(null==eo?void 0:eo.id)==null?null==eo?void 0:eo.surrogates:void 0,em.sound_id=null==eu?void 0:eu.soundId);let eE=null==V?void 0:V.id,eI=(0,M.sE)(U,z.paymentSourceId,eE),ep=(0,a.e7)([I.Z],()=>I.Z.popupCallbackCalled),{analyticsLocations:eN}=(0,u.ZP)(),eT=null!=Q?$[Q]:null,[ex,eS]=t.useState(eI),[eh,eP]=t.useState(!1),{hasEntitlements:ef}=(0,m.H)(eE,er),eA=(0,h.Ap)(z.paymentSourceId),ev=ef||eI,eM=(0,d.U)(),eg=null,eC=null;if(q===C.GZQ.ONE_TIME){var eO;r()(null!=ee,"SKU must be selected for one-time purchases"),eg=null!==(eO=en[ee])&&void 0!==eO?eO:null,r()(null!=eg,"SKU must exist and be fetched.");let e=es[ee],n=null!=Q?Q:N.c;eC=null!=e?e[n]:null}let eR=async()=>{await (0,A.H)({setPurchaseState:s,setHasAcceptedTerms:X,setIsSubmitting:eS,setPurchaseError:J,hasRedirectURL:eh,setHasRedirectURL:eP,isGift:er,baseAnalyticsData:D,analyticsLocation:B,analyticsLocations:eN,flowStartTime:G,subscriptionPlan:V,planGroup:F,trialId:U,priceOptions:z,paymentSource:eT,isPrepaidPaymentPastDue:eM,openInvoiceId:H,premiumSubscription:n,onNext:R,metadata:k,sku:eg,skuPricePreview:eC,purchaseType:q,referralCode:el,loadId:et.loadId,giftInfoOptions:em,invoicePreview:ei})};t.useEffect(()=>{(async()=>{if(!0===ep)try{if(null==I.Z.redirectedPaymentId)return;await (0,o.OP)(I.Z.redirectedPaymentId),s(v.A.COMPLETED),R()}catch(e){s(v.A.FAIL),b(e),x.default.track(C.rMx.PAYMENT_FLOW_FAILED,{...D,payment_error_code:null==e?void 0:e.code,payment_source_id:Q,payment_source_type:null==eT?void 0:eT.type,duration_ms:Date.now()-G})}finally{eS(!1),(0,o.K2)()}else w===p.I.SUCCESS&&await eR()})()},[ep]),t.useEffect(()=>{eI&&!er&&null==n&&eR()},[eI,er,n]);let ej=null!=H||q===C.GZQ.ONE_TIME&&!er;return eI?null:(0,l.jsxs)(c.ModalFooter,{align:T.Z.Align.CENTER,children:[(0,l.jsx)(E.Z,{legalTermsNodeRef:j,invoiceError:y,planError:Z,disablePurchase:Y,flashLegalTerms:L,isSubmitting:ex,premiumSubscription:n,isGift:er,planGroup:F,isPrepaid:eA,isTrial:K,makePurchase:eR,needsPaymentSource:null==eT&&!ev}),(0,l.jsx)(g.Z,{}),W&&!ej?(0,l.jsx)("div",{className:O.back,children:(0,l.jsx)(_.Z,{onClick:i})}):null]})}},919778:function(e,n,s){s.d(n,{sE:function(){return a}});var l=s(818083),t=s(74538);let i=(0,l.B)({kind:"user",id:"2022-06_no_payment_info_trial",label:"No Payment Info Trial",defaultConfig:{bypassCheckout:!1},treatments:[{id:1,label:"Bypass collecting payment info",config:{bypassCheckout:!0}}]}),r=(e,n,s)=>{let l=null==s||(0,t.uZ)(s);return null!=e&&null==n&&l},a=(e,n,s)=>{let{bypassCheckout:l}=i.useExperiment({location:"aeb070_1"},{autoTrackExposure:!1}),t=r(e,n,s);return l&&t}},809144:function(e,n,s){s.d(n,{P:function(){return u}});var l=s(735250);s(470079);var t=s(481060),i=s(609194),r=s(669079),a=s(987209),c=s(689938),o=s(495015);function u(e){let{giftMessage:n=c.Z.Messages.PREMIUM_PAYMENT_IS_GIFT}=e,{isGift:s,giftRecipient:u}=(0,a.wD)();return!s||(0,r.pO)(u)?null:(0,l.jsx)(i.Z,{className:o.paymentNote,iconSize:i.Z.Sizes.SMALL,icon:t.GiftIcon,color:null==n?i.Z.Colors.PRIMARY:i.Z.Colors.SECONDARY,children:n})}},481595:function(e,n,s){s.d(n,{Z:function(){return b}});var l=s(735250),t=s(470079),i=s(512722),r=s.n(i),a=s(742280),c=s(399606),o=s(481060),u=s(224550),d=s(609194),_=s(275850),m=s(672971),E=s(115130),I=s(653798),p=s(314182),N=s(251660),T=s(246946),x=s(351402),S=s(855775),h=s(695103),P=s(366695),f=s(4912),A=s(669079),v=s(937615),M=s(987209),g=s(598),C=s(45572),O=s(119226),R=s(981631),j=s(689938),L=s(482775);function y(e){let{sku:n,skuPricePreview:s}=e;r()(null!=s.amount,"SKU must have a price set.");let t=s.amount-s.tax;return!s.tax_inclusive&&s.tax>0?(0,l.jsxs)(I.PO,{className:L.invoice,children:[(0,l.jsx)(I.R$,{label:n.name,value:(0,v.T4)(t,s.currency),className:L.subscriptionCostRow}),(0,l.jsx)(I.R$,{label:j.Z.Messages.PURCHASE_REVIEW_TAX_LABEL,value:(0,v.T4)(s.tax,s.currency),className:L.subscriptionCostRow}),(0,l.jsx)(I.KU,{}),(0,l.jsx)(I.Ji,{label:j.Z.Messages.BILLING_INVOICE_TOTAL.format(),value:(0,v.T4)(s.amount,s.currency),className:L.subscriptionCostRow})]}):(0,l.jsx)(I.PO,{className:L.invoice,children:(0,l.jsx)(I.R$,{label:n.name,value:(0,v.T4)(s.amount,s.currency),className:L.subscriptionCostRow})})}function Z(e){let{application:n,sku:s,isEmbeddedIAP:t}=e;return!0!==t?null:(0,l.jsxs)("div",{className:L.skuHeading,children:[(0,l.jsx)(P.Z,{game:n}),(0,l.jsx)(o.Heading,{variant:"heading-lg/bold",className:L.skuHeadingText,children:s.name})]})}function b(e){let{hasLegalTermsFlash:n,legalTermsNodeRef:s,onPaymentSourceChange:i,handlePaymentSourceAdd:P}=e,{application:v,purchaseState:b,paymentSources:D,paymentSourceId:G,setHasAcceptedTerms:U,skusById:F,skuPricePreviewsById:B,selectedSkuId:w,isEmbeddedIAP:H,purchaseType:k,purchasePreviewError:W}=(0,g.usePaymentContext)(),{isGift:Y,giftRecipient:K}=(0,M.wD)(),V=Y&&(0,A.pO)(K);r()(null!=w,"Expected selectedSkuId");let z=F[w],X=B[w],J=null!=G?G:S.c,q=null!=X?X[J]:null;r()(null!=z,"SKU must exist and be fetched."),r()(null!=v,"Application must exist.");let Q=(0,c.e7)([E.Z,h.Z],()=>h.Z.inTestModeForApplication(v.id)||E.Z.inDevModeForApplication(v.id),[v.id]),$=(0,c.e7)([T.Z],()=>T.Z.enabled),ee=a.M.EEA_COUNTRIES.has(x.Z.ipCountryCodeWithFallback),en=b===C.A.PURCHASING||b===C.A.COMPLETED,es=null!=G?D[G].type:null,el=t.useMemo(()=>null!=q?(0,l.jsx)(y,{sku:z,skuPricePreview:q}):null==W?(0,l.jsx)(o.Spinner,{type:o.Spinner.Type.WANDERING_CUBES,className:L.invoiceSpinner}):(0,l.jsx)(I.PO,{className:L.invoice,children:(0,l.jsx)(I.R$,{label:z.name,value:null,className:L.subscriptionCostRow})}),[W,z,q]);return(0,l.jsxs)("div",{className:L.stepBody,children:[Q&&(0,l.jsx)(d.Z,{icon:(0,o.makeIconCompat)(f.Z),iconSize:d.Z.Sizes.SMALL,color:d.Z.Colors.WARNING,className:L.errorBlock,children:j.Z.Messages.APPLICATION_STORE_PURCHASE_TEST_MODE},"TEST_MODE"),(0,l.jsx)(Z,{application:v,sku:z,isEmbeddedIAP:H}),V&&(0,l.jsx)(O.Z,{sku:z}),null!=K?(0,l.jsx)(N.s,{giftRecipient:K}):null,(0,l.jsx)(o.FormTitle,{tag:o.FormTitleTags.H5,children:Y?j.Z.Messages.PREMIUM_GIFTING_BUTTON:j.Z.Messages.ONE_TIME_PURCHASE_REVIEW_STEP_PURCHASE_DETAILS_LABEL}),el,(0,l.jsxs)("div",{className:L.paymentSourceWrapper,children:[(0,l.jsx)(o.FormTitle,{tag:o.FormTitleTags.H5,children:j.Z.Messages.PAYMENT_SOURCE_PAYMENT_REQUEST_INFO_TITLE}),(0,l.jsx)(_.Z,{paymentSources:Object.values(D),selectedPaymentSourceId:G,onChange:i,onPaymentSourceAdd:P,hidePersonalInformation:$})]}),(0,l.jsx)(p.Z,{isActive:n,ref:s,children:(0,l.jsx)(m.Z,{onChange:U,forceShow:!0,showWithdrawalWaiver:ee,disabled:en,subscriptionPlan:null,finePrintClassname:L.fineprint,purchaseType:k,isGift:Y,checkboxLabel:z.productLine===R.POd.COLLECTIBLES?j.Z.Messages.BILLING_LEGAL_MUMBO_JUMBO_TERMS_LABEL_SIMPLE.format({paidURL:R.EYA.PAID_TERMS}):void 0,finePrint:(0,l.jsx)(u.Z,{paymentSourceType:es,isEmbeddedIAP:H,purchaseType:k,productLine:z.productLine,isGift:Y})})})]})}},119226:function(e,n,s){s.d(n,{Z:function(){return P}}),s(627341);var l=s(735250);s(470079);var t=s(278074),i=s(979554),r=s(481060),a=s(1585),c=s(125988),o=s(583434),u=s(479446),d=s(981632),_=s(731896),m=s(680295),E=s(998502),I=s(987209),p=s(689938),N=s(578599),T=s(241822);let x=E.ZP.getEnableHardwareAcceleration()?r.AnimatedAvatar:r.Avatar;function S(e){let{avatarDecoration:n}=e,{avatarDecorationSrc:s,eventHandlers:t,avatarPlaceholderSrc:i}=(0,c.Z)({avatarDecorationOverride:n,size:(0,a.y9)(r.AvatarSizes.SIZE_152)});return(0,l.jsx)("div",{className:N.giftMainAnimationWrapper,children:(0,l.jsx)(x,{...t,avatarDecoration:s,src:i,className:N.avatar,size:r.AvatarSizes.SIZE_152,"aria-label":p.Z.Messages.USER_SETTINGS_AVATAR})})}function h(e){var n;let{id:s}=e,t=null===(n=(0,_.V)(s))||void 0===n?void 0:n.config;return(0,l.jsxs)("div",{className:N.profileEffectContainer,children:[(0,l.jsx)("img",{src:T,alt:null==t?void 0:t.accessibilityLabel,className:N.profileEffectBackground}),(0,l.jsx)(m.Z,{profileEffectId:s})]})}function P(e){let{sku:n}=e,{selectedGiftStyle:s}=(0,I.wD)(),{product:r}=(0,o.T)(null==n?void 0:n.id),a=null==r?void 0:r.items[0],c=(0,t.EQ)(a).with({type:i.Z.AVATAR_DECORATION},e=>(0,l.jsx)(S,{avatarDecoration:e})).with({type:i.Z.PROFILE_EFFECT},e=>(0,l.jsx)(h,{id:e.id})).otherwise(()=>null);return null!=s&&null==c?(0,l.jsx)("div",{className:N.giftMainAnimationWrapper,children:(0,l.jsx)(d.Z,{defaultAnimationState:u.S.LOOP,giftStyle:s,shouldAnimate:!0,className:N.__invalid_giftMainAnimation})}):c}},631818:function(e,n,s){var l=s(818083);n.Z=(0,l.B)({kind:"user",id:"2022-12_localized_pricing_poland_notice",label:"Localized Pricing Poland Notice",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enable Poland Notice",config:{enabled:!0}}]})},987033:function(e,n,s){var l=s(818083);n.Z=(0,l.B)({kind:"user",id:"2023-05_localized_pricing_turkey_notice",label:"Localized Pricing Turkey Notice",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enable Turkey Notice",config:{enabled:!0}}]})},711459:function(e,n,s){s.d(n,{aQ:function(){return a}}),s(47120);var l=s(742280),t=s(818083),i=s(474936);n.ZP=(0,t.B)({kind:"user",id:"2022-02_multi_month_plans",label:"Multi Month Plans",defaultConfig:{newPlans:[]},treatments:[{id:1,label:"3 and 6 Month Plans",config:{newPlans:[i.Xh.PREMIUM_6_MONTH_TIER_2,i.Xh.PREMIUM_3_MONTH_TIER_2]}},{id:2,label:"3 Month Plan Only",config:{newPlans:[i.Xh.PREMIUM_3_MONTH_TIER_2]}}]});let r=new Set([l.S.US,l.S.CA]);function a(e){return null==e||r.has(e.country)}},160913:function(e,n,s){s.d(n,{U:function(){return _}});var l=s(913527),t=s.n(l),i=s(442837),r=s(853872),a=s(509545),c=s(78839),o=s(74538),u=s(981631),d=s(231338);function _(){let e=(0,i.e7)([c.ZP],()=>c.ZP.getPremiumTypeSubscription()),n=(0,i.e7)([a.Z],()=>null!=e&&null!=e.planIdFromItems?a.Z.get(null==e?void 0:e.planIdFromItems):null),s=(0,i.e7)([r.Z],()=>null!=e&&null!=e.paymentSourceId?r.Z.getPaymentSource(e.paymentSourceId):null,[e]),l=null!=s&&d.Uk.has(s.type),_=(null==e?void 0:e.status)===u.O0b.PAST_DUE?t()().diff(t()(e.currentPeriodStart),"days"):0;return!!(null!=e&&null!=n&&(0,o.uZ)(n.id))&&l&&_>=0&&_<=(0,o.lY)(e).days&&e.status===u.O0b.PAST_DUE&&!e.isPurchasedExternally}},642530:function(e,n,s){var l=s(735250);s(470079);var t=s(987209),i=s(598),r=s(248042),a=s(196567),c=s(474936),o=s(689938),u=s(576688);n.Z=()=>{let e=(0,r.Vi)(),{selectedSkuId:n}=(0,i.usePaymentContext)(),{isGift:s}=(0,t.wD)();return s||n!==c.Si.TIER_2||!e?null:(0,l.jsx)(a.Z,{copy:o.Z.Messages.BOGO_PAYMENT_MODAL_BANNER_2024,bannerImage:u})}},55610:function(e,n,s){s.d(n,{U:function(){return p}});var l=s(735250);s(470079);var t=s(120356),i=s.n(t),r=s(512722),a=s.n(r),c=s(481060),o=s(63063),u=s(631818),d=s(987033),_=s(53900),m=s(981631),E=s(689938),I=s(180002);function p(){let e=(0,_.Z)(),{enabled:n}=u.Z.useExperiment({location:"5ebfcf_1"},{autoTrackExposure:!1}),{enabled:s}=d.Z.useExperiment({location:"5ebfcf_2"},{autoTrackExposure:!1});return null!=e&&("PL"===e?n:"TR"===e&&s)}n.Z=e=>{var n,s;let{fromBoostCancelModal:t,className:r}=e,u=(0,_.Z)();if(!p())return null;return a()(null!=u,"Subscription billing country should not be null"),(0,l.jsxs)("div",{className:i()(I.noticeRoot,r),children:[(0,l.jsx)("div",{className:I.iconContainer,children:(0,l.jsx)(c.CircleExclamationPointIcon,{size:"custom",width:20,height:20,color:"currentColor",className:I.infoIcon})}),(0,l.jsx)("div",{className:I.text,children:(n=u,s=t,"PL"===n?s?E.Z.Messages.LOCALIZED_PRICING_PLN_LEGACY_PRICING_BOOST_WARNING:E.Z.Messages.LOCALIZED_PRICING_PLN_LEGACY_PRICING_WARNING:"TR"===n?s?E.Z.Messages.LOCALIZED_PRICING_TRY_LEGACY_PRICING_BOOST_WARNING:E.Z.Messages.LOCALIZED_PRICING_TRY_LEGACY_PRICING_WARNING:s?E.Z.Messages.LOCALIZED_PRICING_LEGACY_PRICING_BOOST_WARNING:E.Z.Messages.LOCALIZED_PRICING_LEGACY_PRICING_WARNING).format({helpCenterLink:o.Z.getArticleURL(m.BhN.LOCALIZED_PRICING)})})]})}},927699:function(e,n,s){s.d(n,{Z:function(){return T}}),s(47120);var l=s(735250),t=s(470079),i=s(120356),r=s.n(i),a=s(481060),c=s(541716),o=s(752305),u=s(893718),d=s(993413),_=s(131704),m=s(474936),E=s(981631),I=s(689938),p=s(183165);let N=(0,_.kt)({id:"1",type:E.d4z.DM});function T(e){let{sectionTitle:n,errors:s,onTextChange:i,pendingText:_,placeholder:E,currentText:T,className:x,innerClassName:S,disabled:h=!1,disableThemedBackground:P=!1}=e,[f,A]=t.useState(null!=_?_:T),[v,M]=t.useState((0,o.JM)(f)),g=t.useRef(!1);return t.useEffect(()=>{g.current=!0},[]),t.useEffect(()=>{if(void 0===_){let e=(0,o.JM)(T);A(T),M(e)}},[_,T]),(0,l.jsx)("div",{className:r()(p.body,x),children:(0,l.jsxs)(d.Z,{title:n,errors:s,disabled:h,children:[(0,l.jsx)(u.Z,{innerClassName:r()(p.textArea,S),editorClassName:p.editorTextArea,maxCharacterCount:m.$n,onChange:function(e,n,s){n!==f&&(A(n),M(s),i(n))},placeholder:E,channel:N,textValue:f,richValue:v,type:c.I.CUSTOM_GIFT,onBlur:()=>{g.current=!1},onFocus:()=>{g.current=!0},focused:g.current,onSubmit:function(){return new Promise(e=>{e({shouldClear:!1,shouldRefocus:!0})})},disableThemedBackground:P}),(0,l.jsx)(a.HiddenVisually,{children:I.Z.Messages.MAXIMUM_LENGTH.format({maxLength:m.$n})})]})})}},987716:function(e,n,s){s.d(n,{q:function(){return N}}),s(47120);var l=s(735250),t=s(470079),i=s(481060),r=s(987209),a=s(321051),c=s(669079),o=s(479446),u=s(646476),d=s(981632),_=s(96848),m=s(703926),E=s(474936),I=s(689938),p=s(635904);let N=e=>{let{isShopGift:n}=e,{giftRecipient:s,selectedGiftStyle:N,setSelectedGiftStyle:T,emojiConfetti:x,soundEffect:S,setEmojiConfetti:h,setSoundEffect:P}=(0,r.wD)(),[f,A]=t.useState(!1),v=t.useRef(null),M=(0,i.useRadioGroup)({orientation:"horizontal"}),g=(0,c.MY)(s,n),C=g===c.xr.CUSTOM_MESSAGE_EMOJI_SOUNDBOARD,O=g!==c.xr.DEFAULT,R=(0,u.rK)(),{enabled:j}=u.ZP.useExperiment({location:"premiumGiftSelect_GiftAnimationOptions"},{autoTrackExposure:R}),L=null;return O&&(L=R&&j?E.V4:E.QI),(0,l.jsxs)("div",{children:[O&&(0,l.jsxs)("div",{className:p.giftMainAnimation,children:[null!=N?(0,l.jsx)(d.Z,{giftStyle:N,defaultAnimationState:o.S.ACTION,idleAnimationState:o.S.LOOP,shouldAnimate:!0,className:p.animation}):(0,l.jsx)(i.Spinner,{className:p.spinner}),C&&(0,l.jsxs)("div",{className:p.soundEmojiContainer,children:[(0,l.jsx)("div",{className:p.sound,children:(0,l.jsx)(a.Z,{sound:S,onSelect:e=>{null!=P&&P(null==e?void 0:e)}})}),(0,l.jsx)("div",{className:p.emoji,children:(0,l.jsx)(_.Z,{setEmojiConfetti:h,emojiConfetti:null==x?void 0:x})})]})]}),(0,l.jsx)("div",{tabIndex:null!=N||f?void 0:0,onFocus:e=>{var n;e.target===e.currentTarget&&(null===(n=v.current)||void 0===n||n.focus())},className:p.giftBoxOptionContainer,"aria-label":I.Z.Messages.SEASONAL_GIFTING_CUSTOMIZE_YOUR_GIFT_BOX,...M,children:null!=L&&L.map((e,n)=>(0,l.jsx)(m.m,{isSelected:N===e,giftStyle:e,setSelectedGiftStyle:T,ref:0===n?v:null,onFocus:()=>A(!0),onBlur:()=>A(!1)},e))}),(0,l.jsx)("div",{className:p.__invalid_selectPlanDivider})]})}},96848:function(e,n,s){s.d(n,{Z:function(){return m}}),s(47120),s(757143);var l=s(735250),t=s(470079),i=s(481060),r=s(907040),a=s(981631),c=s(185923),o=s(689938),u=s(605099);let d={section:a.jXE.VOICE_CHANNEL_EFFECTS_EMOJI_PICKER,openPopoutType:"gift_effect_emoji_picker"},_=c.Hz.GIFT;function m(e){let{setEmojiConfetti:n,emojiConfetti:s}=e,[a,c]=t.useState(!1),m=e=>(0,l.jsxs)("div",{className:u.customGiftContent,children:[(0,l.jsxs)("div",{className:u.customGiftHeader,children:[(0,l.jsx)(i.Text,{variant:"text-md/bold",children:o.Z.Messages.GIFT_SELECT_EMOJI}),(0,l.jsx)(i.Text,{variant:"text-sm/normal",children:o.Z.Messages.GIFT_SELECT_SOUNDBOARD_OR_EMOJI_DESCRIPTION})]}),e]}),E=e=>{null!=n&&(n(e),c(!1))};return(0,l.jsx)(i.Popout,{shouldShow:a,position:"bottom",align:"left",autoInvert:!1,onRequestClose:()=>c(!1),renderPopout:e=>{let{closePopout:n}=e;return(0,l.jsx)(i.Dialog,{children:(0,l.jsx)(r.Z,{analyticsOverride:d,closePopout:n,onSelectEmoji:E,wrapper:"div",pickerIntention:_,renderHeader:m,headerClassName:u.emojiHeader,className:u.emojiList,listHeaderClassName:u.emojiList,searchProps:{accessory:(0,l.jsx)(l.Fragment,{})}})})},children:()=>(0,l.jsx)("div",{className:u.container,children:(0,l.jsx)(i.Clickable,{className:u.emoji,onClick:()=>c(!0),children:(null==s?void 0:s.name)==null?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.ReactionIcon,{size:"custom",color:"currentColor",className:u.emojiIcon,width:14,height:14}),(0,l.jsx)(i.Text,{className:u.text,variant:"text-sm/semibold",children:o.Z.Messages.GIFT_SELECT_EMOJI})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Text,{className:u.textSelected,variant:"text-sm/semibold",children:null==s.guildId?s.optionallyDiverseSequence:null}),(0,l.jsx)(i.Text,{className:u.text,variant:"text-sm/semibold",children:s.name.replace(/_/g," ")})]})})})})}},703926:function(e,n,s){s.d(n,{m:function(){return N}});var l=s(735250),t=s(470079),i=s(481060),r=s(474936),a=s(815642),c=s(426831),o=s(257510),u=s(74838),d=s(720834),_=s(385925),m=s(588921),E=s(718720),I=s(721513);let p={[r.Cj.STANDARD_BOX]:_,[r.Cj.CAKE]:m,[r.Cj.CHEST]:E,[r.Cj.COFFEE]:I,[r.Cj.SNOWGLOBE]:"",[r.Cj.BOX]:"",[r.Cj.CUP]:"",[r.Cj.SEASONAL_CAKE]:o,[r.Cj.SEASONAL_CHEST]:u,[r.Cj.SEASONAL_COFFEE]:d,[r.Cj.SEASONAL_STANDARD_BOX]:c},N=t.forwardRef(function(e,n){let{isSelected:s,giftStyle:t,setSelectedGiftStyle:r,onFocus:c,onBlur:o}=e;return(0,l.jsx)(i.Clickable,{innerRef:n,onClick:()=>r(t),onFocus:c,onBlur:o,children:(0,l.jsx)("img",{style:{width:"100%",height:"100%"},alt:"",src:p[t],className:s?a.customGiftBoxHighlighted:a.customGiftBox})})})},314404:function(e,n,s){s.d(n,{M:function(){return w},O:function(){return B}}),s(47120);var l=s(735250),t=s(470079),i=s(512722),r=s.n(i),a=s(442837),c=s(481060),o=s(490504),u=s(911969),d=s(620037),_=s(940824),m=s(987209),E=s(598),I=s(409813),p=s(509545),N=s(78839),T=s(669079),x=s(63063),S=s(74538),h=s(937615),P=s(711459),f=s(847903),A=s(104494),v=s(639119),M=s(55610),g=s(653798),C=s(553797),O=s(927699),R=s(987716),j=s(311821),L=s(459965),y=s(811616),Z=s(251660),b=s(474936),D=s(981631),G=s(231338),U=s(689938),F=s(197266);function B(e){var n,s,i,I;let{premiumSubscription:N,skuId:j,selectedPlanId:L,setSelectedPlanId:B,priceOptions:w,planOptions:H,eligibleForMultiMonthPlans:k,referralTrialOfferId:W,subscriptionPeriodEnd:Y,showTotal:K=!0,discountInvoiceItems:V,handleClose:z}=e,{activeSubscription:X,setSelectedPlanId:J,selectedSkuId:q,selectedPlan:Q,priceOptions:$}=(0,E.usePaymentContext)(),{isGift:ee,giftRecipient:en,selectedGiftStyle:es,customGiftMessage:el,setCustomGiftMessage:et}=(0,m.wD)(),ei=(0,T.MY)(en),er=ee&&(0,T.pO)(en),{confirmUpsellEnabled:ea}=(0,d.Z)({location:"PremiumSwitchPlanSelectBody"});j=null!=j?j:q,N=null!=N?N:X,r()(void 0!==N,"should not be undefined");let[ec,eo]=(0,a.Wu)([p.Z],()=>[null!=N?p.Z.get(N.planId):null,null!=L?p.Z.get(L):null]),eu=(0,v.N)(W),ed=null==eu?void 0:eu.subscription_trial,e_=(0,A.Ng)(),em=null==e_?void 0:null===(n=e_.discount)||void 0===n?void 0:n.plan_ids,eE=null!=eo?eo:Q,eI=t.useCallback(e=>{null!=B?B(e):J(e)},[B,J]),ep=null!=w?w:$;r()(null!=ep,"Price option has to be set");let eN=null!=eu&&b.nG[eu.trial_id].skus.includes(j),eT=null!=e_&&H.some(e=>null==em?void 0:em.includes(e))&&null!=e_.discount,ex=(0,S.aS)(b.Xh.PREMIUM_MONTH_TIER_2,!1,ee,ep);t.useEffect(()=>{k&&P.ZP.trackExposure({location:"5f89bb_1"})},[k]);let eS=(null==eE?void 0:eE.id)!=null&&H.includes(eE.id);t.useEffect(()=>{if(!eS){if(null==ec||ee)eI(H[0]);else if(null!=ec){let e=H.find(e=>e!==ec.id);null!=e&&eI(e)}}},[eS,ee,H,ec,eI]);let eh=!er&&(ee||!eN&&!eT)&&eS&&K,eP=(0,c.useRadioGroup)(),ef=(null==eE?void 0:eE.id)!=null?(0,S.aS)(eE.id,!1,ee,ep):void 0,{ipCountryCode:eA}=(0,f.Z)(),ev="HR"===eA&&null!=ef&&ef.currency===G.pK.EUR,eM=(0,S.Ap)(ep.paymentSourceId),eg=(null==ed?void 0:ed.interval)===b.rV.DAY?U.Z.Messages.BILLING_TRIAL_2_WEEK_PERIOD:U.Z.Messages.BILLING_TRIAL_30_DAY_PERIOD,eC=!ee&&(eT||null!=ed&&eN&&null!=Y),eO=null==V?void 0:null===(I=V.find(e=>e.subscriptionPlanId===b.Xh.PREMIUM_MONTH_TIER_2))||void 0===I?void 0:null===(i=I.discounts)||void 0===i?void 0:null===(s=i.find(e=>e.type===u.eW.SUBSCRIPTION_PLAN))||void 0===s?void 0:s.amount;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:er?F.stepBodyCustomGift:F.stepBody,children:[(0,l.jsxs)("div",{className:er?F.bodyColumnMiddle:void 0,children:[(0,l.jsx)(M.Z,{fromBoostCancelModal:!1,className:F.legacyPricingNotice}),er&&null!=es&&(0,l.jsx)(R.q,{})]}),(0,l.jsxs)("div",{className:er?F.bodyColumnRight:void 0,children:[(0,l.jsx)(Z.s,{giftRecipient:en}),(()=>{if(ei===T.xr.CUSTOM_MESSAGE_EMOJI_SOUNDBOARD&&null!=et)return(0,l.jsx)(O.Z,{sectionTitle:U.Z.Messages.GIFT_OPTIONAL_MESSAGE,onTextChange:e=>et(e),pendingText:el,currentText:el})})(),null!=ec&&!ee&&(0,l.jsx)("div",{className:F.bodyText,children:function(e,n){let s=U.Z.Messages.BILLING_SWITCH_PLAN_DOWNGRADE_BODY_MONTH,l=U.Z.Messages.BILLING_SWITCH_PLAN_UPGRADE_BODY_TIER_1_YEAR,t=(()=>{switch(e.interval){case b.rV.YEAR:return s;case b.rV.MONTH:default:return l}})(),i=e.skuId;switch(n){case b.Si.TIER_0:switch(i){case b.Si.TIER_1:return U.Z.Messages.BILLING_SWITCH_PLAN_DOWNGRADE_BODY_TIER_1_TO_TIER_0;case b.Si.TIER_2:return U.Z.Messages.BILLING_SWITCH_PLAN_DOWNGRADE_BODY_TIER_0;default:return t}case b.Si.TIER_1:switch(i){case b.Si.TIER_0:return U.Z.Messages.BILLING_SWITCH_PLAN_UPGRADE_BODY_TIER_1;case b.Si.TIER_2:return U.Z.Messages.BILLING_SWITCH_PLAN_DOWNGRADE_BODY_TIER_1;default:return t}case b.Si.TIER_2:switch(i){case b.Si.TIER_0:case b.Si.TIER_1:return U.Z.Messages.BILLING_SWITCH_PLAN_UPGRADE_BODY_TIER_2;case b.Si.TIER_2:return e.interval===b.rV.MONTH?U.Z.Messages.BILLING_SWITCH_PLAN_UPGRADE_BODY_TIER_2_YEAR.format({numFreeGuildSubscriptions:b.cb}):t;default:return t}default:return t}}(ec,j)}),((e,n,s)=>{if(er)return(0,l.jsx)(c.FormTitle,{children:U.Z.Messages.GIFT_SUBSCRIPTION_SELECTION});if(!eC)return(0,l.jsx)("div",{className:F.selectPlanChooseTitle,children:U.Z.Messages.BILLING_SWITCH_PLAN_CHOOSE_ONE});if(n){let n=(null==e?void 0:e.trial_id)===b.a7;return(0,l.jsxs)("div",{children:[(0,l.jsx)(c.Text,{variant:"text-sm/normal",className:F.trialPlanSelectHeader,children:n?U.Z.Messages.REFERRAL_PROGRAM_PAYMENT_MODAL_COPY.format({endDate:Y}):U.Z.Messages.BILLING_TRIAL_PAYMENT_MODAL_INFO.format({trialEnd:Y,trialPeriod:eg})}),(0,l.jsx)("hr",{className:F.planSelectSeparator})]})}if(s&&null!=eO&&null!=ex&&L===b.Xh.PREMIUM_MONTH_TIER_2)return(0,l.jsxs)("div",{children:[(0,l.jsx)(c.Text,{variant:"text-sm/normal",className:F.trialPlanSelectHeader,children:U.Z.Messages.BILLING_DISCOUNT_PAYMENT_MODAL_INFO_GENERIC.format({numMonths:null==e_?void 0:e_.discount.user_usage_limit,discountedPrice:(0,h.T4)(ex.amount-eO,ex.currency),regularPrice:(0,h.T4)(ex.amount,ex.currency)})}),(0,l.jsx)("hr",{className:F.planSelectSeparator})]})})(eu,eN,eT),(0,l.jsx)("div",{...eP,children:H.map(e=>(0,l.jsx)(y.Z,{planId:e,premiumSubscription:ee?null:null!=N?N:null,selectPlan:eI,selected:(null==eE?void 0:eE.id)===e,priceOptions:ep,shouldShowUpdatedPaymentModal:eC,isEligibleForDiscount:eT,discountAmountOff:eO,isEligibleForTrial:eN},e))}),(0,l.jsx)("div",{children:eh&&null!=eE&&null!=ef?(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:F.selectPlanDivider}),(0,l.jsx)(g.Ji,{label:U.Z.Messages.BILLING_PAYMENT_BREAKDOWN_TOTAL,value:(0,l.jsx)(C.Z,{price:ef.amount,currency:ef.currency,intervalType:ee?null:eE.interval,intervalCount:eE.intervalCount,isPrepaidPaymentSource:eM}),className:F.selectPlanTotalRow})]}):null}),ev&&(0,l.jsx)(o.Z,{message:U.Z.Messages.LOCALIZED_PRICING_HRK_EURO_WARNING.format({kunaPriceWithCurrency:(0,h.T4)(7.5345*ef.amount,G.pK.HRK)})}),!ee&&!eC&&K&&(0,l.jsx)(o.Z,{message:U.Z.Messages.BILLING_FINAL_PRICE_MAY_CHANGE.format({documentationLink:x.Z.getArticleURL(D.BhN.LOCALIZED_PRICING)})}),ea&&ee&&(0,l.jsx)(_.Z,{onClose:z})]})]})})}function w(e){let{onStepChange:n,selectedPlanId:s,paymentSources:t,onBackClick:i,showBackButton:r,planOptions:a,shouldRenderUpdatedPaymentModal:o=!1,isTrial:u}=e,{paymentSources:d,selectedPlan:_}=(0,E.usePaymentContext)(),{isGift:I}=(0,m.wD)();return t=null!=t?t:d,s=null!=s?s:null==_?void 0:_.id,(0,l.jsxs)(l.Fragment,{children:[null!=s&&a.includes(s)?(0,l.jsx)(H,{paymentSources:t,onStepChange:n,selectedPlanId:s,isGift:I,shouldRenderUpdatedPaymentModal:o,isTrial:u}):(0,l.jsx)(c.Button,{disabled:!0,children:U.Z.Messages.SELECT}),r?(0,l.jsx)(j.Z,{onClick:i}):null]})}function H(e){let{onStepChange:n,selectedPlanId:s,isGift:t,paymentSources:i,shouldRenderUpdatedPaymentModal:r,isTrial:o}=e,u=(0,a.e7)([N.ZP],()=>N.ZP.getPremiumTypeSubscription()),{hasEntitlements:d}=(0,L.H)(s,t),_=null!=u&&null!=u.paymentSourceId||Object.keys(i).length>0||d&&!o;var m=r?U.Z.Messages.NEXT:U.Z.Messages.SELECT,E=I.h8.ADD_PAYMENT_STEPS;return _&&(E=I.h8.REVIEW),(0,l.jsx)(c.Button,{onClick:()=>n(E),children:m})}},811616:function(e,n,s){s.d(n,{Z:function(){return P}});var l=s(735250);s(470079);var t=s(120356),i=s.n(t),r=s(512722),a=s.n(r),c=s(442837),o=s(692547),u=s(481060),d=s(987209),_=s(706454),m=s(509545),E=s(669079),I=s(930153),p=s(74538),N=s(937615),T=s(104494),x=s(474936),S=s(689938),h=s(901770);function P(e){let{premiumSubscription:n,planId:s,selectPlan:t,selected:r,priceOptions:P,shouldShowUpdatedPaymentModal:f,isEligibleForDiscount:A,discountAmountOff:v,isEligibleForTrial:M}=e,g=(0,c.e7)([_.default],()=>_.default.locale),C=(0,c.e7)([m.Z],()=>m.Z.get(s)),{isGift:O,giftRecipient:R}=(0,d.wD)(),j=O&&(0,E.pO)(R);a()(null!=C,"Missing subscriptionPlan");let L=null!=n&&n.planId===s,y=L||s===x.Xh.PREMIUM_MONTH_TIER_2&&null!=n&&[x.Xh.PREMIUM_YEAR_TIER_0,x.Xh.PREMIUM_YEAR_TIER_1].includes(n.planId),Z=x.nH[s],b=(0,p.aS)(s,!1,O,P),D=(0,p.Ap)(P.paymentSourceId),G=null!=Z&&!f,U=(0,T.Ng)(),F=C.interval===x.rV.YEAR?S.Z.Messages.BILLING_TRIAL_YEARLY_PRICE_AFTER_TRIAL:S.Z.Messages.BILLING_TRIAL_MONTHLY_PRICE_AFTER_TRIAL,B=()=>null!=Z&&(0,l.jsx)(u.Text,{tag:"span",variant:"eyebrow",color:"always-white",className:h.planOptionDiscount,children:S.Z.Messages.BILLING_PLAN_SELECTION_DISCOUNT.format({discount:(0,I.T3)(g,Z/100)})}),w=()=>C.interval===x.rV.YEAR&&null!=n||G&&!L?C.interval===x.rV.YEAR&&null!=n?(0,l.jsxs)("span",{className:h.planOptionMonthsFree,children:["(",S.Z.Messages.BILLING_SWITCH_PLAN_YEARLY_FREE_MONTHS,")"]}):G&&!L?B():void 0:null;return(0,l.jsxs)(u.Clickable,{role:j?"menuitem":"radio","aria-checked":r,tabIndex:r?0:-1,focusProps:{offset:{left:-4,right:-4,top:0,bottom:0}},onClick:y?void 0:()=>t(s),className:i()(h.planOptionClickableContainer,{[h.selectedPlan]:j&&r,[h.selectionBox]:j}),children:[(0,l.jsxs)("div",{className:i()(h.planOption,{[h.planOptionDisabled]:y}),children:[(0,l.jsxs)("div",{className:h.planOptionClickable,children:[!j&&(0,l.jsx)(u.Checkbox,{readOnly:!0,displayOnly:!0,value:r,shape:u.Checkbox.Shapes.ROUND,color:o.Z.unsafe_rawColors.BRAND_500.css,type:u.Checkbox.Types.INVERTED,className:h.planOptionCheckbox}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:i()(h.planOptionInterval,{[h.optionSelected]:r||j,[h.updatedOptionSelected]:f&&(r||j)}),children:[(0,p.L7)(C.interval,O,D,C.intervalCount,j,(0,p.Rd)(C.id)),j&&w()]}),j&&(0,l.jsx)("div",{className:h.planOneTimeCost,children:S.Z.Messages.ONE_TIME_CHARGE.format({currencyAmount:(0,N.T4)(b.amount,b.currency)})})]}),L&&(0,l.jsxs)("span",{className:h.planOptionCurrentPlan,children:["(",S.Z.Messages.BILLING_SWITCH_PLAN_CURRENT_PLAN,")"]}),!j&&w()]}),f?(0,l.jsx)("div",{className:i()({[h.optionPriceSelected]:r}),children:S.Z.Messages.BILLING_TRIAL_PRICE_NOW.format({price:A&&null!=v&&C.interval===x.rV.MONTH?(0,N.T4)(b.amount-v,b.currency):M?(0,N.T4)(0,b.currency,{maximumFractionDigits:0}):(0,N.T4)(b.amount,b.currency)})}):(0,l.jsx)("div",{className:i()({[h.optionSelected]:r||j}),children:(0,N.T4)(b.amount,b.currency)})]}),f&&(0,l.jsx)("div",{className:h.planOptionSubtextContainer,children:(0,l.jsx)(u.Text,{variant:"text-md/normal",color:r?"text-normal":"interactive-normal",className:i()(h.planOptionSubtext,{[h.discountPlanOptionSubtext]:A}),children:(()=>{if(A&&null!=v&&C.interval===x.rV.MONTH){var e;return S.Z.Messages.BILLING_DISCOUNT_MONTHLY_PRICE_GENERIC.format({numMonths:null!==(e=null==U?void 0:U.discount.user_usage_limit)&&void 0!==e?e:x.rt,discountedPrice:(0,N.T4)(b.amount-v,b.currency),regularPrice:(0,N.T4)(b.amount,b.currency)})}return M?F.format({price:(0,N.T4)(b.amount,b.currency)}):(C.interval===x.rV.YEAR&&S.Z.Messages.BILLING_YEARLY_PLAN_SAVINGS.format({percent:Z}),null)})()})})]})}},251660:function(e,n,s){s.d(n,{s:function(){return o}});var l=s(735250);s(470079);var t=s(481060),i=s(700582),r=s(51144),a=s(689938),c=s(6805);let o=e=>{let{giftRecipient:n}=e;return null==n?null:(0,l.jsxs)("div",{className:c.content,children:[(0,l.jsx)(t.FormTitle,{children:a.Z.Messages.FORM_LABEL_SEND_TO}),(0,l.jsxs)("div",{className:c.giftRecipientInfo,children:[(0,l.jsx)(i.Z,{user:n,className:c.__invalid_giftRecipient,size:t.AvatarSizes.SIZE_20}),(0,l.jsx)(t.Heading,{className:c.giftRecipientName,variant:"text-md/normal",children:r.ZP.getName(n)}),(0,l.jsx)(t.Heading,{className:c.giftRecipientTag,variant:"text-md/normal",children:r.ZP.getUserTag(n)})]})]})}},716534:function(e,n,s){s.d(n,{Z:function(){return k}}),s(47120);var l=s(735250),t=s(470079),i=s(512722),r=s.n(i),a=s(742280),c=s(442837),o=s(692547),u=s(481060),d=s(190947),_=s(224550),m=s(275850),E=s(672971),I=s(128069),p=s(987209),N=s(598),T=s(45572),x=s(919778),S=s(614223),h=s(246946),P=s(351402),f=s(509545),A=s(669079),v=s(74538),M=s(937615),g=s(479446),C=s(374649),O=s(104494),R=s(642530),j=s(653798),L=s(314182),y=s(981632),Z=s(314404),b=s(42818),D=s(459965),G=s(251660),U=s(474936),F=s(981631),B=s(231338),w=s(689938),H=s(711978);function k(e){var n,s,i,k;let W,Y,K,{selectedPlanId:V,paymentSources:z,priceOptions:X,currencies:J,onCurrencyChange:q,onPaymentSourceChange:Q,handlePaymentSourceAdd:$,setHasAcceptedTerms:ee,legalTermsNodeRef:en,hasLegalTermsFlash:es,trialId:el,trialFooterMessageOverride:et,reviewWarningMessage:ei,metadata:er,purchaseState:ea,hideSubscriptionDetails:ec,referralTrialOfferId:eo,isTrial:eu=!1,isDiscount:ed=!1,handleClose:e_}=e,{isEmbeddedIAP:em,activeSubscription:eE,selectedSkuId:eI,defaultPlanId:ep,isPremium:eN,startedPaymentFlowWithPaymentSourcesRef:eT,setInvoicePreview:ex,contextMetadata:eS}=(0,N.usePaymentContext)(),{isGift:eh,giftRecipient:eP,selectedGiftStyle:ef}=(0,p.wD)(),eA=(0,O.Ng)(),ev=null==eA?void 0:null===(n=eA.discount)||void 0===n?void 0:n.plan_ids.some(e=>U.GP[e].skuId===eI),eM=!eh&&null!=eA&&null!=eI&&ev,eg=(0,c.e7)([f.Z],()=>f.Z.get(V));r()(null!=eg,"Missing plan");let eC=[{planId:eg.id,quantity:1}],eO=ea===T.A.PURCHASING||ea===T.A.COMPLETED,eR=eh||eO,[ej,eL]=(0,C.ED)({items:eC,renewal:!1,preventFetch:eR,applyEntitlements:!0,paymentSourceId:X.paymentSourceId,currency:X.currency,trialId:el,metadata:er}),[ey,eZ]=(0,C.ED)({items:eC,renewal:!0,preventFetch:eR,trialId:el,paymentSourceId:X.paymentSourceId,currency:X.currency,metadata:er}),[eb,eD]=(0,C.ED)({items:[{planId:U.Xh.PREMIUM_MONTH_TIER_2,quantity:1}],renewal:!0,preventFetch:!eM,trialId:el,paymentSourceId:X.paymentSourceId,currency:X.currency,metadata:er}),[eG,eU]=(0,C.o5)({paymentSourceId:X.paymentSourceId,skuId:eI,subscriptionPlanId:V,currency:X.currency,preventFetch:!eh||eO,loadId:eS.loadId});t.useEffect(()=>{ex(eG)},[ex,eG]);let eF=eh&&(0,A.pO)(eP),eB=null!==(k=null!==(i=null!=eL?eL:eZ)&&void 0!==i?i:eD)&&void 0!==k?k:eU,ew=(0,c.e7)([h.Z],()=>h.Z.enabled),eH=X.paymentSourceId,{hasEntitlements:ek,entitlements:eW}=(0,D.H)(eg.id,eh),eY=(0,v.Ap)(X.paymentSourceId),eK=(0,x.sE)(el,eH,V),eV=(0,S.Kp)({isTrial:eu,isGift:eh,selectedSkuId:eI,startedPaymentFlowWithPaymentSources:eT.current}),[ez,eX]=t.useState(null==ej?void 0:ej.subscriptionPeriodEnd);t.useEffect(()=>{null==ez&&eX(null==ej?void 0:ej.subscriptionPeriodEnd)},[null==ej?void 0:ej.subscriptionPeriodEnd,ez]);let eJ=t.useMemo(()=>(0,v.V7)({skuId:eI,isPremium:eN,multiMonthPlans:[],currentSubscription:eE,isGift:eh,isEligibleForTrial:eu,defaultPlanId:ep,defaultToMonthlyPlan:!1}),[eI,eE,eh,ep,eN,eu]),eq=(0,S.$g)(eV,ej,eg);if(null!=eB){let e=eB.message;eB.code===I.SM.INVALID_CURRENCY_FOR_PAYMENT_SOURCE&&(e=w.Z.Messages.BILLING_ERROR_UNSUPPORTED_CURRENCY),Y=(0,l.jsx)(u.FormErrorBlock,{children:e})}else if(eh&&null!=eG)K=(0,l.jsx)(b.e9,{plan:eg,className:H.invoice,isPrepaidPaymentSource:eY,isCustomGift:eF,invoicePreview:eG});else if(eu&&null!=ej)K=(0,l.jsxs)("div",{children:[(0,l.jsx)(j.KU,{negativeMarginTop:!0}),(0,l.jsxs)(j.PO,{className:H.invoice,children:[(0,l.jsxs)("div",{className:H.trialPriceLine,children:[(0,l.jsx)(u.Text,{variant:"text-md/bold",children:w.Z.Messages.BILLING_PAYMENT_BREAKDOWN_TOTAL}),(0,l.jsx)(u.Text,{variant:"text-md/normal",children:w.Z.Messages.BILLING_TRIAL_PRICE_NOW.format({price:(0,M.T4)(0,ej.currency,{maximumFractionDigits:0})})})]}),(0,l.jsx)("div",{className:H.afterTrialPriceLine,children:(0,l.jsx)(b.yT,{invoice:ej,plan:eg})})]})]});else{if(null==ej||null==ey||eq)return(0,l.jsx)("div",{className:H.spinnerWrapper,children:(0,l.jsx)(u.Spinner,{})});eu&&ej.subscriptionPeriodEnd!==ey.subscriptionPeriodEnd&&(W=ej.subscriptionPeriodEnd),K=(0,l.jsxs)(j.PO,{className:H.invoice,children:[(0,l.jsx)(j.q9,{children:w.Z.Messages.BILLING_SWITCH_PLAN_PURCHASE_DETAILS}),(0,l.jsx)(b.Lu,{invoice:ej,newPlan:eg,isPrepaidPaymentSource:eY,referralTrialOfferId:eo}),eY?null:(0,l.jsx)(b.nd,{renewalInvoice:ey,isTrial:eu,priceOptions:X,overrideRenewalDate:W,trialFooterMessageOverride:et,hideSubscriptionDetails:ec})]})}let eQ=a.M.EEA_COUNTRIES.has(P.Z.ipCountryCodeWithFallback),{checkboxLabel:e$,checkboxClassname:e0,checkboxLabelClassname:e1}=function(e,n,s){let l=null,t=null,i=null;if(e&&null!=n){let{intervalType:e,intervalCount:r}=v.ZP.getIntervalForInvoice(n),a=(0,M.og)((0,M.T4)(n.total,n.currency),e,r),c=null!=s?s:n.subscriptionPeriodEnd;l=w.Z.Messages.BILLING_LEGAL_MUMBO_JUMBO_TRIAL_TERMS_LABEL.format({termsURL:F.EYA.TERMS,paidURL:F.EYA.PAID_TERMS,rate:a,renewalDate:c}),t=H.trialCheckbox,i=H.trialCheckboxLabel}return{checkboxLabel:l,checkboxClassname:t,checkboxLabelClassname:i}}(null!=eu&&eu,ey,W),e9=w.Z.Messages.BILLING_SELECT_PLAN_GUILD_SUBSCRIPTION.format({planName:eg.name});return eh&&!eF?e9=w.Z.Messages.PAYMENT_MODAL_SUBTITLE_PREMIUM_GIFT:eh&&eF?e9="":(0,v.PV)(eg.id)&&(e9=v.ZP.getBillingReviewSubheader(null,eg)),eK?null:(0,l.jsxs)("div",{className:H.stepBody,children:[null!=ei&&(0,l.jsxs)("div",{className:H.reviewWarningMessageContainer,children:[(0,l.jsx)(u.CircleInformationIcon,{size:"custom",color:o.Z.unsafe_rawColors.YELLOW_300.css,width:20,height:20}),(0,l.jsx)(u.Text,{className:H.reviewWarningMessage,variant:"text-sm/normal",children:ei})]}),Y,eV&&(0,l.jsxs)("div",{children:[(0,l.jsx)(j.KU,{negativeMarginTop:!0,negativeMarginBottom:!0}),(0,l.jsx)(R.Z,{}),(0,l.jsx)(Z.O,{planOptions:eJ,eligibleForMultiMonthPlans:!1,referralTrialOfferId:void 0,selectedPlanId:V,subscriptionPeriodEnd:ez,showTotal:!1,discountInvoiceItems:eM?null==eb?void 0:eb.invoiceItems:void 0,handleClose:e_}),(0,l.jsx)(j.KU,{})]}),!eu&&(0,l.jsx)(u.FormTitle,{tag:u.FormTitleTags.H5,children:e9}),eF&&null!=ef&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y.Z,{defaultAnimationState:g.S.LOOP,giftStyle:ef,shouldAnimate:!0,className:H.__invalid_giftMainAnimation}),(0,l.jsx)(G.s,{giftRecipient:eP})]}),K,(0,l.jsxs)("div",{className:H.paymentSourceWrapper,children:[eu?(0,l.jsx)(u.FormTitle,{tag:u.FormTitleTags.H5,className:H.formTitle,children:w.Z.Messages.BILLING_STEP_PAYMENT_METHOD}):(0,l.jsx)(u.FormTitle,{tag:u.FormTitleTags.H5,children:w.Z.Messages.PAYMENT_SOURCE_PAYMENT_REQUEST_INFO_TITLE}),(0,l.jsx)(m.Z,{paymentSources:Object.values(z),selectedPaymentSourceId:eH,prependOption:ek&&!eu?{label:w.Z.Messages.ATTACH_PAYMENT_SOURCE_PROMPT_OPTION_OPTIONAL,value:null}:null,onChange:Q,onPaymentSourceAdd:$,hidePersonalInformation:ew,isTrial:eu}),ek&&null==eH?(0,l.jsx)("div",{className:H.paymentSourceOptionalWarning,children:w.Z.Messages.ATTACH_PAYMENT_SOURCE_OPTIONAL_WITH_ENTITLEMENTS_WARNING.format({months:eW.length})}):null,ed?null:(0,l.jsxs)(d.b,{currencies:J,className:H.currencyWrapper,children:[(0,l.jsx)(u.FormTitle,{tag:u.FormTitleTags.H5,children:w.Z.Messages.PAYMENT_CURRENCY}),(0,l.jsx)(d.Z,{selectedCurrency:X.currency,currencies:J,onChange:q})]})]}),(0,l.jsx)(L.Z,{isActive:es,ref:en,children:(0,l.jsx)(E.Z,{onChange:ee,forceShow:!0,checkboxLabel:e$,checkboxClassname:e0,checkboxLabelClassname:e1,finePrint:null!=et?et:(0,l.jsx)(_.Z,{hide:eu||ed,subscriptionPlan:eg,renewalInvoice:ey,isGift:eh,paymentSourceType:null===(s=z[null!=eH?eH:""])||void 0===s?void 0:s.type,isEmbeddedIAP:em,basePrice:(0,v.aS)(eg.id,!1,eh,X)}),showPricingLink:eg.currency!==B.pK.USD,showWithdrawalWaiver:eQ,disabled:eO,isTrial:eu&&null==et,isDiscount:ed,subscriptionPlan:eg,isGift:eh})})]})}},664891:function(e,n,s){s.d(n,{Z:function(){return D}}),s(47120);var l=s(735250),t=s(470079),i=s(512722),r=s.n(i),a=s(742280),c=s(442837),o=s(481060),u=s(190947),d=s(224550),_=s(275850),m=s(672971),E=s(100527),I=s(906732),p=s(987209),N=s(598),T=s(45572),x=s(614223),S=s(246946),h=s(351402),P=s(509545),f=s(74538),A=s(296848),v=s(374649),M=s(642530),g=s(653798),C=s(585602),O=s(314182),R=s(314404),j=s(42818),L=s(981631),y=s(689938),Z=s(598891),b=s(711978);function D(e){var n;let s,{premiumSubscription:i,paymentSources:E,priceOptions:I,onPaymentSourceChange:v,onPaymentSourceAdd:C,planId:j,setHasAcceptedTerms:Z,legalTermsNodeRef:D,hasLegalTermsFlash:H,onInvoiceError:k,planGroup:W,currencies:Y,onCurrencyChange:K,hasOpenInvoice:V,purchaseState:z,handleClose:X}=e,{selectedSkuId:J,defaultPlanId:q,isPremium:Q,startedPaymentFlowWithPaymentSourcesRef:$}=(0,N.usePaymentContext)(),{isGift:ee}=(0,p.wD)(),en=I.paymentSourceId,es=(0,c.e7)([P.Z],()=>P.Z.get(j));r()(null!=es,"Missing newPlan");let el=(0,c.e7)([S.Z],()=>S.Z.hidePersonalInformation),et=a.M.EEA_COUNTRIES.has(h.Z.ipCountryCodeWithFallback),ei=z===T.A.PURCHASING||z===T.A.COMPLETED,er=(0,x.Kp)({isTrial:!1,isGift:ee,selectedSkuId:J,startedPaymentFlowWithPaymentSources:$.current}),ea=(null==i?void 0:i.status)===L.O0b.PAUSED,ec=t.useMemo(()=>(0,f.V7)({skuId:J,isPremium:Q,multiMonthPlans:[],currentSubscription:i,isGift:ee,isEligibleForTrial:!1,defaultPlanId:q,defaultToMonthlyPlan:!1}),[J,i,q,Q,ee]);s=V||ea?y.Z.Messages.BILLING_PURCHASE_DETAILS_HEADER:(0,f.PV)(j)?(0,f.W_)(i,es):y.Z.Messages.BILLING_SELECT_PLAN_GUILD_SUBSCRIPTION.format({planName:es.name});let eo=null;return null!=i&&(eo=V?(0,l.jsx)(G,{premiumSubscription:i,onInvoiceError:k,priceOptions:I,preventFetch:!1}):ea?(0,l.jsx)(B,{premiumSubscription:i,onInvoiceError:k,priceOptions:I,preventFetch:ei}):(0,A.R4)(i,j,W)?(0,l.jsx)(U,{premiumSubscription:i,newPlan:es,onInvoiceError:k,planGroup:W,priceOptions:I,preventFetch:ei}):(0,l.jsx)(w,{premiumSubscription:i,newPlan:es,planGroup:W,priceOptions:I,preventFetch:ei})),(0,l.jsxs)("div",{className:b.stepBody,children:[!ea&&er&&(0,l.jsxs)("div",{children:[(0,l.jsx)(g.KU,{negativeMarginBottom:!0,negativeMarginTop:!0}),(0,l.jsx)(M.Z,{}),(0,l.jsx)(R.O,{planOptions:ec,eligibleForMultiMonthPlans:!1,selectedPlanId:j,showTotal:!1,handleClose:X}),(0,l.jsx)(g.KU,{})]}),(0,l.jsx)(o.FormTitle,{tag:o.FormTitleTags.H5,children:s}),eo,(0,l.jsxs)("div",{className:b.paymentSourceWrapper,children:[(0,l.jsx)(o.FormTitle,{tag:o.FormTitleTags.H5,children:y.Z.Messages.PAYMENT_SOURCE_PAYMENT_REQUEST_INFO_TITLE}),(0,l.jsx)(_.Z,{paymentSources:Object.values(E),selectedPaymentSourceId:en,onChange:v,onPaymentSourceAdd:C,hidePersonalInformation:el,disabled:ei})]}),(0,l.jsxs)(u.b,{currencies:Y,className:b.currencyWrapper,children:[(0,l.jsx)(o.FormTitle,{tag:o.FormTitleTags.H5,children:y.Z.Messages.PAYMENT_CURRENCY}),(0,l.jsx)(u.Z,{selectedCurrency:I.currency,currencies:Y,onChange:K,disabled:ei})]}),(0,l.jsx)(O.Z,{isActive:H,ref:D,children:null!=i&&(0,A.R4)(i,j,W)?(0,l.jsx)(F,{premiumSubscription:i,newPlan:es,onInvoiceError:k,planGroup:W,priceOptions:I,preventFetch:ei,disabled:ei,isEEA:et,paymentSources:E,setHasAcceptedTerms:Z}):(0,l.jsx)(m.Z,{onChange:Z,finePrint:(0,l.jsx)(d.Z,{subscriptionPlan:es,paymentSourceType:null===(n=E[null!=en?en:""])||void 0===n?void 0:n.type,basePrice:(0,f.aS)(es.id,!1,ee,I),currentSubscription:i,planGroup:W}),forceShow:!0,showPricingLink:es.currency!==L.pKx.USD,showWithdrawalWaiver:et,disabled:ei,subscriptionPlan:es,currentSubscription:i,planGroup:W})})]})}function G(e){let{premiumSubscription:n,onInvoiceError:s,priceOptions:i,preventFetch:r}=e,[a,c]=(0,v.Ox)({subscriptionId:n.id,preventFetch:r});t.useEffect(()=>{s(c)},[s,c]);let u=(0,f.Ap)(i.paymentSourceId);return null!=a?(0,l.jsxs)(g.PO,{className:Z.__invalid_invoice,children:[(0,l.jsx)(j.By,{invoice:a,isPrepaidPaymentSource:u}),(0,l.jsx)(j.nd,{premiumSubscription:n,renewalInvoice:a,isUpdate:!0,isPrepaidPaymentSource:u})]}):(0,l.jsx)(o.Spinner,{})}function U(e){let{premiumSubscription:n,newPlan:s,onInvoiceError:i,planGroup:r,priceOptions:a,preventFetch:c}=e,{selectedSkuId:u,startedPaymentFlowWithPaymentSourcesRef:d}=(0,N.usePaymentContext)(),{isGift:_}=(0,p.wD)(),{analyticsLocations:m}=(0,I.ZP)(),T=(0,f.al)(n,s.id,1,new Set(r)),[S,h]=(0,v.ED)({subscriptionId:n.id,items:T,renewal:!1,applyEntitlements:!0,paymentSourceId:a.paymentSourceId,currency:a.currency,preventFetch:c,analyticsLocations:m,analyticsLocation:E.Z.BILLING_SWITCH_PLAN_IMMEDIATE_PRORATED_INVOICE_PREVIEW}),[P,A]=(0,v.ED)({subscriptionId:n.id,items:T,renewal:!0,paymentSourceId:a.paymentSourceId,currency:a.currency,preventFetch:c,analyticsLocations:m,analyticsLocation:E.Z.BILLING_SWITCH_PLAN_IMMEDIATE_RENEWAL_INVOICE_PREVIEW}),M=null!=h?h:A;if(t.useEffect(()=>{i(M)},[i,M]),null!=M)return(0,l.jsx)(o.FormErrorBlock,{children:M.message});let C=(0,x.Kp)({isTrial:!1,isGift:_,selectedSkuId:u,startedPaymentFlowWithPaymentSources:d.current}),O=(0,x.$g)(C,S,s);if(null==S||null==P||O)return(0,l.jsx)(o.Spinner,{className:b.__invalid_spinner});let R=(0,f.Ap)(a.paymentSourceId);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.hG,{proratedInvoice:S,renewalInvoice:P}),(0,l.jsxs)(g.PO,{className:b.invoice,children:[(0,l.jsx)(g.q9,{children:y.Z.Messages.BILLING_SWITCH_PLAN_PURCHASE_DETAILS}),(0,l.jsx)(j.Lu,{invoice:S,newPlan:s,isPrepaidPaymentSource:R}),(0,l.jsx)(j.nd,{premiumSubscription:n,proratedInvoice:S,renewalInvoice:P,isUpdate:!0,isPrepaidPaymentSource:R})]})]})}function F(e){var n,s;let i,{premiumSubscription:r,newPlan:a,onInvoiceError:c,planGroup:u,priceOptions:_,preventFetch:p,disabled:N,isEEA:T,paymentSources:x,setHasAcceptedTerms:S}=e,{analyticsLocations:h}=(0,I.ZP)(),P=(0,f.al)(r,a.id,1,new Set(u)),[A,M]=(0,v.ED)({subscriptionId:r.id,items:P,renewal:!0,paymentSourceId:_.paymentSourceId,currency:_.currency,preventFetch:p,analyticsLocations:h,analyticsLocation:E.Z.BILLING_SWITCH_PLAN_IMMEDIATE_RENEWAL_INVOICE_PREVIEW});return(t.useEffect(()=>{c(M)},[c,M]),null!=M)?(0,l.jsx)(o.FormErrorBlock,{children:M.message}):(null!=A&&(i={amount:A.total,currency:A.currency,tax:A.tax,taxInclusive:A.taxInclusive}),null==i)?null:(0,l.jsx)(m.Z,{onChange:S,finePrint:(0,l.jsx)(d.Z,{subscriptionPlan:a,paymentSourceType:null===(n=x[null!==(s=_.paymentSourceId)&&void 0!==s?s:""])||void 0===n?void 0:n.type,basePrice:i,currentSubscription:r,planGroup:u}),forceShow:!0,showPricingLink:a.currency!==L.pKx.USD,showWithdrawalWaiver:T,disabled:N,subscriptionPlan:a,currentSubscription:r,planGroup:u})}function B(e){let{premiumSubscription:n,priceOptions:s,preventFetch:i,onInvoiceError:r}=e,{analyticsLocations:a}=(0,I.ZP)(),[c,u]=(0,v.ED)({subscriptionId:n.id,renewal:!0,applyEntitlements:!0,paymentSourceId:s.paymentSourceId,currency:s.currency,preventFetch:i,analyticsLocations:a,analyticsLocation:E.Z.BILLING_PAUSED_SUBSCRIPTION_INVOICE_RESUME_PREVIEW}),[d,_]=(0,v.ED)({subscriptionId:n.id,renewal:!0,paymentSourceId:s.paymentSourceId,currency:s.currency,preventFetch:i,analyticsLocations:a,analyticsLocation:E.Z.BILLING_PAUSED_SUBSCRIPTION_INVOICE_RENEWAL_PREVIEW}),m=null!=u?u:_;if(t.useEffect(()=>{r(m)},[r,m]),null!=m)return(0,l.jsx)(o.FormErrorBlock,{children:m.message});if(null==c||null==d)return(0,l.jsx)(o.Spinner,{className:b.__invalid_spinner});let p=(0,f.Ap)(s.paymentSourceId);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:Z.renewalInvoiceDate,children:y.Z.Messages.BILLING_RESUME_PAUSED_SUBSCRIPTION_IMMEDIATELY}),(0,l.jsxs)(g.PO,{className:b.invoice,children:[(0,l.jsx)(g.q9,{children:y.Z.Messages.BILLING_SWITCH_PLAN_PURCHASE_DETAILS}),(0,l.jsx)(j.By,{invoice:c,isPrepaidPaymentSource:p}),(0,l.jsx)(j.nd,{premiumSubscription:n,renewalInvoice:d,isUpdate:!0,isPrepaidPaymentSource:p})]})]})}function w(e){let n,{premiumSubscription:s,newPlan:t,planGroup:i,priceOptions:r,preventFetch:a}=e,{analyticsLocations:c}=(0,I.ZP)(),[u,d]=(0,v.ED)({subscriptionId:s.id,items:(0,f.al)(s,t.id,1,new Set(i)),renewal:!0,applyEntitlements:!1,paymentSourceId:r.paymentSourceId,currency:r.currency,preventFetch:a,analyticsLocations:c,analyticsLocation:"billing_switch_plan_renewal_mutation_renewal_invoice_preview"});if(null!=d)return(0,l.jsx)(o.FormErrorBlock,{children:d.message});if(null==u)return(0,l.jsx)("div",{children:(0,l.jsx)(o.Spinner,{})});n=s.type===L.NYc.PREMIUM?(0,f.Gf)(t.id):t.name;let _=(0,f.Ap)(r.paymentSourceId);return(0,l.jsxs)("div",{className:b.bodyText,children:[(0,l.jsx)("div",{className:Z.renewalInvoiceDate,children:y.Z.Messages.BILLING_SWITCH_PLAN_CHANGE_DATE.format({renewalDate:u.subscriptionPeriodStart})}),(0,l.jsxs)(g.PO,{className:b.invoice,children:[(0,l.jsx)(g.q9,{children:y.Z.Messages.PREMIUM_SUBSCRIPTION_UPDATES}),(0,l.jsx)(g.R$,{label:n,value:(0,f.PK)(t,r,!0)}),(0,l.jsx)(C.Z,{invoice:u}),(0,l.jsx)(g.KU,{}),(0,l.jsx)(j.nd,{premiumSubscription:s,renewalInvoice:u,isUpdate:!0,isPrepaidPaymentSource:_})]})]})}},196567:function(e,n,s){s.d(n,{Z:function(){return c}});var l=s(735250);s(470079);var t=s(120356),i=s.n(t),r=s(481060),a=s(397590);function c(e){let{className:n,copy:s,bannerImage:t,textColor:c="always-white"}=e;return(0,l.jsxs)("div",{className:i()(a.bannerContainer,n),children:[null==t?null:(0,l.jsx)("img",{alt:"",className:a.banner,src:t}),(0,l.jsxs)("div",{className:a.textContainer,children:[(0,l.jsx)(r.GiftIcon,{size:"md",color:"currentColor",className:a.giftIcon}),(0,l.jsx)(r.Heading,{className:a.textHeader,color:c,variant:"eyebrow",children:s})]})]})}},993413:function(e,n,s){s.d(n,{Z:function(){return _}}),s(757143);var l=s(735250);s(470079);var t=s(120356),i=s.n(t),r=s(481060),a=s(403182),c=s(587446),o=s(504983),u=s(410728);function d(e){let{errors:n}=e;return(0,l.jsx)(l.Fragment,{children:n.map((e,n)=>(0,l.jsx)(r.Text,{variant:"text-xs/normal",color:"text-danger",className:u.errorMessage,children:e.replace(/[0-9.,]+ ?kb/g,e=>{let n=1024*parseInt(e,10);return isNaN(n)?e:(0,a.Ng)(n)})},n))})}function _(e){let{title:n,titleIcon:s,titleId:t,description:a,children:_,className:m,errors:E,disabled:I=!1,hideDivider:p=!1,showBorder:N=!1,borderType:T,hasBackground:x=!1,forcedDivider:S=!1,showPremiumIcon:h=!1}=e;return(0,l.jsx)("div",{className:i()(u.customizationSection,m,{[u.disabled]:I,[u.hideDivider]:p,[u.showBorder]:N,[u.withDivider]:S}),children:(0,l.jsxs)(o.Z,{className:u.customizationSectionBorder,backgroundClassName:u.customizationSectionBackground,isShown:N,type:T,hasBackground:x,children:[(0,l.jsxs)(r.FormTitle,{className:u.title,id:t,children:[n,h&&(0,l.jsx)(c.Z,{}),s]}),null!=a?(0,l.jsx)(r.FormText,{type:r.FormText.Types.DESCRIPTION,className:u.sectionDescription,children:a}):null,_,null!=E&&(0,l.jsx)(d,{errors:E})]})})}},321051:function(e,n,s){s.d(n,{Z:function(){return m}}),s(47120);var l=s(735250),t=s(470079),i=s(692547),r=s(481060),a=s(697426),c=s(603074),o=s(689938),u=s(290934);let d=[54,8,8,8];function _(e){let{onSelect:n,sound:s}=e,[_,m]=t.useState(!1);function E(e){m(!1),null==n||n(e)}let I=e=>(0,l.jsxs)("div",{className:u.customGiftHeader,children:[(0,l.jsxs)("div",{className:u.__invalid_customGiftHeaderText,children:[(0,l.jsx)(r.Text,{variant:"text-md/bold",children:o.Z.Messages.GIFT_SELECT_SOUND}),(0,l.jsx)(r.Text,{variant:"text-sm/normal",children:o.Z.Messages.GIFT_SELECT_SOUNDBOARD_OR_EMOJI_DESCRIPTION})]}),(0,l.jsx)("div",{className:u.searchAndSound,children:e})]});return(0,l.jsx)(r.Popout,{shouldShow:_,position:"bottom",align:"left",onRequestClose:()=>m(!1),renderPopout:e=>{let{closePopout:n}=e;return(0,l.jsx)(r.Dialog,{children:(0,l.jsx)(c.Z,{suppressPlaySound:!0,shouldShowUpsell:!1,guildId:null,channel:null,onClose:n,onSelect:E,analyticsSource:"gift soundboard",soundButtonOverlay:a.Pb.ADD,listPadding:d,renderHeader:I,defaultSoundsOnly:!0})})},children:()=>(0,l.jsx)(r.Clickable,{className:u.sound,onClick:()=>m(!0),children:null==s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.SoundboardIcon,{size:"custom",color:i.Z.colors.WHITE,className:u.soundIcon,width:14,height:14}),(0,l.jsx)(r.Text,{className:u.text,variant:"text-sm/semibold",children:o.Z.Messages.GIFT_SELECT_SOUND})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Text,{className:u.textSelected,variant:"text-sm/semibold",children:s.emojiName}),(0,l.jsx)(r.Text,{className:u.text,variant:"text-sm/semibold",children:s.name})]})})})}function m(e){let{sound:n,onSelect:s}=e;return(0,l.jsx)("div",{className:u.container,children:(0,l.jsx)(_,{onSelect:s,sound:n})})}},991862:function(e,n,s){s.d(n,{T:function(){return t}});var l=s(689938);function t(e){switch(e){case"brl":return l.Z.Messages.BRL_NAME;case"pln":return l.Z.Messages.PLN_NAME;case"try":return l.Z.Messages.TRY_NAME;case"usd":return l.Z.Messages.USD_NAME;case"aud":return l.Z.Messages.AUD_NAME;case"pen":return l.Z.Messages.PEN_NAME;case"php":return l.Z.Messages.PHP_NAME;case"ars":return l.Z.Messages.ARS_NAME;case"cop":return l.Z.Messages.COP_NAME;case"clr":return l.Z.Messages.CLR_NAME;case"jpy":return l.Z.Messages.JPY_NAME;case"idr":return l.Z.Messages.IDR_NAME;case"vnd":return l.Z.Messages.VND_NAME;case"thb":return l.Z.Messages.THB_NAME;case"myr":return l.Z.Messages.MYR_NAME;case"krw":return l.Z.Messages.KRW_NAME;case"mxn":return l.Z.Messages.MXN_NAME;case"bgn":return l.Z.Messages.BGN_NAME;case"czk":return l.Z.Messages.CZK_NAME;case"dkk":return l.Z.Messages.DKK_NAME;case"huf":return l.Z.Messages.HUF_NAME;case"ron":return l.Z.Messages.RON_NAME;case"sek":return l.Z.Messages.SEK_NAME;case"eur":return l.Z.Messages.EUR_NAME;default:return""}}}}]);
//# sourceMappingURL=d0ef0193e8ee051fe229.js.map