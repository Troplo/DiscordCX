"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["87624"],{63243:function(e,t,n){e.exports=n.p+"b2fad2364372ac883853.png"},244488:function(e,t,n){e.exports=n.p+"f0b741b24bffce0dd3cf.png"},15888:function(e,t,n){e.exports=n.p+"b2e8f732590705176d23.png"},16724:function(e,t,n){e.exports=n.p+"42805d6e8621df404add.png"},774694:function(e,t,n){e.exports=n.p+"499681d7cba7c4250d56.png"},402344:function(e,t,n){e.exports=n.p+"63eba15c08ff69f7aec3.png"},289901:function(e,t,n){e.exports=n.p+"4439a1724f27ea200e40.png"},709393:function(e,t,n){e.exports=n.p+"dd701c1d70c1d51d00ac.png"},432170:function(e,t,n){e.exports=n.p+"aaf60661aaad266e505c.png"},448509:function(e,t,n){e.exports=n.p+"a9d51096f8a0d4296a87.png"},799718:function(e,t,n){e.exports=n.p+"eaba1e8b5a274a8e7b6d.png"},241371:function(e,t,n){e.exports=n.p+"c2da3e35e8af9401dbea.png"},292006:function(e,t,n){e.exports=n.p+"6cfa9a628fa2ff658fc0.png"},441506:function(e,t,n){e.exports=n.p+"3d3f2551422bdf6b1413.png"},304088:function(e,t,n){e.exports=n.p+"38f2e2d5427ed8728d9e.png"},647387:function(e,t,n){e.exports=n.p+"9295fa8b7ed6875453cf.png"},646584:function(e,t,n){e.exports=n.p+"3db2f9c4e006e063dc22.png"},764707:function(e,t,n){n(47120);var r=n(979590),a=n.n(r),o=n(399606),l=n(607070),i=n(168631);let s=(e,t)=>{let n=e.toRgb(),r=t.toRgb(),[o,l,s]=(0,i.J2)([n.r,n.g,n.b],[r.r,r.g,r.b],50);return a()({r:o,g:l,b:s})},c=(e,t)=>0===t.length?void 0:1===t.length?{primary:t[0],secondary:t[0],border:t[0].setAlpha(.4),label:t[0].isLight()?e.dark:e.light}:{primary:t[0],secondary:t[1],border:s(t[0],t[1]).setAlpha(.4),label:s(t[0],t[1]).isLight()?e.dark:e.light},d=(e,t)=>0===t.length?void 0:1===t.length?{primary:t[0],secondary:t[0],text:t[0].isLight()?e.dark:e.light}:{primary:t[0],secondary:t[1],text:s(t[0],t[1]).isLight()?e.dark:e.light},u=(e,t)=>{let{h:n,s:r,l:o}=e.toHsl();return a()({h:n,s:r*t,l:o})};t.Z=e=>t=>{let n=(0,o.e7)([l.Z],()=>l.Z.saturation);if(null==t)return{};let r={backgroundColors:c(e,t.backgroundColors),buttonColors:d(e,t.buttonColors),confettiColors:t.confettiColors};return 1===n?{...r}:{backgroundColors:null!=r.backgroundColors?{primary:u(r.backgroundColors.primary,n),secondary:u(r.backgroundColors.secondary,n),border:u(r.backgroundColors.border,n),label:u(r.backgroundColors.label,n)}:void 0,buttonColors:null!=r.buttonColors?{primary:u(r.buttonColors.primary,n),secondary:u(r.buttonColors.secondary,n),text:u(r.buttonColors.text,n)}:void 0,confettiColors:r.confettiColors.map(e=>u(e,n))}}},266386:function(e,t,n){n.d(t,{c:function(){return a}});let r=(0,n(818083).B)({kind:"user",id:"2024-05_collectibles_hover_preview",label:"Collectibles Hover Preview Experiment",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Collectibles card with avatar deco hover preview",config:{enabled:!0}}]}),a=e=>r.useExperiment({location:e}).enabled},890249:function(e,t,n){n.d(t,{m:function(){return a}});let r=(0,n(818083).B)({kind:"user",id:"2024-06_collectibles_shop_use_now",label:"Collectibles Shop Use Now",defaultConfig:{realtimeUseNowEnabled:!1},treatments:[{id:1,label:"Use now button immediately applies collectible",config:{realtimeUseNowEnabled:!0}}]}),a=e=>r.useExperiment({location:e}).realtimeUseNowEnabled},318028:function(e,t,n){n.d(t,{l:function(){return l}}),n(47120);var r=n(399606),a=n(597688),o=n(267097);function l(e){(0,o.Z)();let[t,n]=(0,r.Wu)([a.Z],()=>[a.Z.isFetchingCategories,a.Z.getCategoryForProduct(e)]);return{isFetching:t,category:n}}},635552:function(e,t,n){n.d(t,{W:function(){return s}}),n(47120);var r=n(470079),a=n(809206),o=n(350327),l=n(328456),i=n(689938);let s=e=>{let{product:t,onSuccess:s,onError:c}=e,[d,u]=r.useState(!1),{firstAvatarDecoration:f,firstProfileEffect:p}=(0,l.R)(t);return{handleUseNow:r.useCallback(async()=>{u(!0);try{if(null!=f&&await (0,a.Mn)({avatarDecoration:f}),null!=p){let e={profile_effect_id:p.id};await (0,o.Z)(e)}{let{ToastPosition:e,ToastType:t,createToast:r,popToast:a,showToast:o}=await Promise.resolve().then(n.bind(n,481060));a(),o(r(i.Z.Messages.COLLECTIBLES_PROFILE_UPDATE_NOTIFICATION,t.MESSAGE,{duration:6e3,position:e.TOP}))}null==s||s()}catch(e){null==c||c(e)}finally{u(!1)}},[f,p,s,c]),isApplying:d}}},328456:function(e,t,n){n.d(t,{R:function(){return l},b:function(){return o}}),n(724458),n(653041),n(47120);var r=n(470079),a=n(979554);class o{get firstAvatarDecoration(){return this.getFirstItemByType(a.Z.AVATAR_DECORATION)}get firstProfileEffect(){return this.getFirstItemByType(a.Z.PROFILE_EFFECT)}getFirstItemByType(e){var t;let n=(null!==(t=this.itemsByTypes.get(e))&&void 0!==t?t:[])[0];if(null!=n)return n}sortByTypes(e){return e.reduce((e,t)=>{let n=e.get(t.type);return null!=n?n.push(t):e.set(t.type,[t]),e},new Map)}constructor(e){var t,n,r;t=this,r=void 0,(n="itemsByTypes")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.itemsByTypes=this.sortByTypes(e)}}let l=e=>{let{firstProfileEffect:t,firstAvatarDecoration:n}=r.useMemo(()=>new o(e.items),[e]);return{firstProfileEffect:t,firstAvatarDecoration:n}}},624377:function(e,t,n){var r=n(979590),a=n.n(r),o=n(692547),l=n(764707);let i=a()(o.Z.unsafe_rawColors.WHITE_500.resolve({saturation:1}).hex()),s=a()(o.Z.unsafe_rawColors.BLACK_500.resolve({saturation:1}).hex()),c=(0,l.Z)({dark:s,light:i});t.Z=c},141011:function(e,t,n){var r=n(735250),a=n(470079),o=n(120356),l=n.n(o),i=n(399606),s=n(376345),c=n(607070),d=n(302221),u=n(884697),f=n(372654),p=n(916305);t.Z=e=>{let{asset:t,size:n=f.yV,addGradient:o=!1,className:g,style:v,children:C,blur:E=!1}=e,b=(0,i.e7)([c.Z],()=>c.Z.saturation),h=a.useMemo(()=>{if(null==t)return v;let e=(0,u.uV)(t,{size:n,format:"jpg"}),r=E?{filter:"blur(2px)",transform:"scale(1.02)"}:{};if(1===b)return{...v,backgroundImage:o?"url(".concat(e,"), linear-gradient(180deg, rgba(0, 71, 94, 0.6) 5%, rgba(9, 33, 65, 0.6) 95%)"):"url(".concat(e,")"),backgroundBlendMode:"multiply",backgroundSize:"cover",backgroundPosition:"center",...r};let a=(0,d.aD)(s.ZP.unsafe_rawColors.BLACK_500,1-b);return{...v,backgroundImage:"linear-gradient(".concat(a,", ").concat(a,"), url(").concat(e,")"),backgroundBlendMode:"saturation",backgroundSize:"cover",backgroundPosition:"center",...r}},[t,n,b,v,E,o]);return(0,r.jsx)("div",{className:l()(p.banner,g),style:h,children:C})}},331042:function(e,t,n){n.r(t),n.d(t,{CollectiblesCollectedModalInner:function(){return P}}),n(47120),n(627341);var r=n(735250),a=n(470079),o=n(887024),l=n(512722),i=n.n(l),s=n(278074),c=n(979554),d=n(399606),u=n(481060),f=n(37234),p=n(607070),g=n(100527),v=n(906732),C=n(1585),E=n(125988),b=n(300284),h=n(876917),m=n(642619),y=n(594174),A=n(884697),T=n(890249),x=n(318028),L=n(635552),N=n(328456),_=n(624377),I=n(530618),Z=n(141011),S=n(372654),O=n(216541),R=n(302800),k=n(215023),w=n(689938),B=n(533400),M=n(660097);let P=e=>{var t,n;let{product:o,onClose:l,confettiTarget:R,confettiCanvas:P,hideConfetti:j=!1,analyticsLocations:D}=e,{confettiColors:F}=(0,_.Z)(o.styles),U=(0,d.e7)([y.default],()=>{let e=y.default.getCurrentUser();return i()(null!=e,"User cannot be undefined"),e}),H=(0,d.e7)([p.Z],()=>p.Z.useReducedMotion),z=(0,T.m)("CollectiblesCollectedModal"),[V]=o.items,{avatarDecorationSrc:W}=(0,E.Z)({user:U,avatarDecorationOverride:(null==V?void 0:V.type)===c.Z.AVATAR_DECORATION?V:null,size:(0,C.y9)(u.AvatarSizes.SIZE_120)}),G=a.useRef(null),{analyticsLocations:K}=(0,v.ZP)([...D,g.Z.COLLECTIBLES_COLLECTED_MODAL]),Y=(0,b.Z)({analyticsLocations:K}),Q=a.useCallback(()=>{if(l(),(0,f.xf)(),Y(),o.type===c.Z.AVATAR_DECORATION){i()(V.type===c.Z.AVATAR_DECORATION,"product type and item type are the same"),(0,C.ps)({initialSelectedDecoration:V,analyticsLocations:K});return}o.type===c.Z.PROFILE_EFFECT&&(0,m.H)({initialSelectedEffectId:V.id,analyticsLocations:K})},[l,Y,o.type,V,K]),{handleUseNow:q,isApplying:J}=(0,L.W)({product:o,onSuccess:l,onError:l}),{firstAvatarDecoration:X,firstProfileEffect:$}=(0,N.R)(o),ee=(0,A.x6)(o)?null!=X&&null!=$:null!=X||null!=$,et=(0,A.x6)(o)||z,{category:en,isFetching:er}=(0,x.l)(o.skuId),ea=null!==(n=null==en?void 0:en.successModalBg)&&void 0!==n?n:o.banner;return(0,r.jsxs)(v.Gt,{value:K,children:[(0,r.jsxs)("div",{className:B.modalInner,ref:G,children:[(0,r.jsxs)("div",{className:B.bannerContainer,children:[(0,r.jsx)(Z.Z,{asset:er?void 0:ea,addGradient:null===(t=k.Ve[o.categorySkuId])||void 0===t?void 0:t.addGradient,size:(0,S.ML)(880),className:B.decorationBanner,blur:!0}),(0,s.EQ)(o.type).with(c.Z.PROFILE_EFFECT,()=>(0,r.jsx)("div",{className:B.profileEffectShopPreview,children:(0,r.jsx)(h.Z,{forCollectedModal:!0,profileEffectId:V.id})})).with(c.Z.AVATAR_DECORATION,()=>(i()(V.type===c.Z.AVATAR_DECORATION,"ts-match already checked the type"),(0,r.jsx)(u.Avatar,{size:u.AvatarSizes.SIZE_120,src:M,avatarDecoration:W,className:B.avatarDecoration,"aria-label":o.name}))).with(c.Z.BUNDLE,()=>(0,r.jsx)("div",{className:B.bundlePreview,children:(0,r.jsx)(O.d,{product:o,user:U,isPurchased:!1,isHighlighted:!0,profileEffectClassName:B.bundleProfileEffectCard})})).otherwise(()=>null)]}),(0,r.jsxs)("div",{className:B.collectedInfoContainer,children:[(0,r.jsxs)("div",{className:B.collectedTextContainer,children:[(0,r.jsx)(u.Heading,{variant:"heading-lg/bold",children:w.Z.Messages.COLLECTIBLES_YOU_COLLECTED.format({itemName:o.name})}),(0,r.jsx)(u.Text,{variant:"text-sm/normal",children:(0,s.EQ)(null==o?void 0:o.type).with(c.Z.BUNDLE,()=>w.Z.Messages.COLLECTIBLES_PERMANENT_COLLECTION_BUNDLE).with(c.Z.PROFILE_EFFECT,()=>w.Z.Messages.COLLECTIBLES_PROFILE_EFFECT_PERMANENT_COLLECTION).otherwise(()=>w.Z.Messages.COLLECTIBLES_PERMANENT_COLLECTION)})]}),et?(0,r.jsxs)("div",{className:B.buttons,children:[(0,r.jsx)(u.Button,{color:ee?u.ButtonColors.PRIMARY:u.ButtonColors.BRAND,onClick:Q,children:w.Z.Messages.USER_SETTINGS_EDIT_USER_PROFILE}),ee?(0,r.jsx)(u.Button,{onClick:q,submitting:J,children:w.Z.Messages.COLLECTIBLES_USE_NOW}):null]}):(0,r.jsx)(u.Button,{onClick:Q,children:w.Z.Messages.COLLECTIBLES_USE_NOW})]}),(0,r.jsx)(u.ModalCloseButton,{onClick:l,className:B.modalCloseButton,withCircleBackground:!0})]}),!j&&!H&&(0,r.jsx)(I.Z,{confettiTarget:null!=R?R:G.current,confettiCanvas:P,sprites:(0,S.vK)(o.categorySkuId),colors:null==F?void 0:F.map(e=>e.toHexString())})]})};t.default=e=>{let{transitionState:t,product:n,onClose:l,analyticsLocations:i}=e,s=a.useRef(new o.qA),[c,d]=a.useState(null),f=(0,R.UY)(n.skuId);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.O_,{ref:d,className:B.confettiCanvas,environment:s.current}),(0,r.jsxs)(u.ModalRoot,{hideShadow:!0,transitionState:t,size:u.ModalSize.DYNAMIC,className:B.modalRoot,children:[null!=f&&(0,r.jsx)("img",{src:f.confettiAssetSrc,className:B.customConfetti,style:f.style,alt:"","aria-hidden":"true"}),(0,r.jsx)(u.ModalContent,{className:B.modalContent,children:(0,r.jsx)(P,{product:n,onClose:l,confettiCanvas:c,hideConfetti:null!=f,analyticsLocations:i})})]})]})}},372654:function(e,t,n){n.d(t,{ML:function(){return l},nH:function(){return i},vK:function(){return d},yV:function(){return o}});var r=n(180650),a=n(921948);let o=1060,l=e=>e*(0,a.Z)(),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:180,{primary:n,secondary:r}=e;return"linear-gradient(".concat(t,"deg, ").concat(n.toHslString(),", ").concat(r.toHslString(),")")},s=[n(241371),n(448509)],c={["".concat(r.T.FANTASY)]:[n(709393),n(646584)],["".concat(r.T.ANIME)]:[n(647387),n(448509)],["".concat(r.T.BREAKFAST)]:[n(289901),n(402344)],["".concat(r.T.HALLOWEEN)]:[n(292006),n(799718)],["".concat(r.T.FALL)]:[n(432170),n(15888)],["".concat(r.T.WINTER)]:[n(304088),n(774694)],["".concat(r.T.MONSTERS)]:[n(16724),n(441506)]},d=e=>{var t;return null==e?s:null!==(t=c[e])&&void 0!==t?t:s}},616066:function(e,t,n){n.d(t,{R:function(){return v}});var r=n(735250);n(470079);var a=n(120356),o=n.n(a),l=n(979554),i=n(481060),s=n(1585),c=n(125988),d=n(998502),u=n(266386),f=n(689938),p=n(949727);let g=d.ZP.getEnableHardwareAcceleration()?i.AnimatedAvatar:i.Avatar,v=e=>{let{item:t,user:n,isHighlighted:a=!1,isPurchased:d=!1,avatarSize:v=i.AvatarSizes.SIZE_152,avatarPlaceholderSrc:C}=e,E=(0,s.y9)(v),b=(0,u.c)("AvatarDecorationPreview"),{avatarDecorationSrc:h,eventHandlers:m,avatarPlaceholderSrc:y}=(0,c.Z)({user:n,avatarDecorationOverride:(null==t?void 0:t.type)===l.Z.AVATAR_DECORATION?t:void 0,size:E,onlyAnimateOnHover:!a});return(0,r.jsx)(g,{...m,avatarDecoration:h,src:b&&a?null==n?void 0:n.getAvatarURL(void 0,152,!0):null!=C?C:y,imageClassName:b&&a?p.fadeInAvatarImg:void 0,className:o()(p.avatar,{[p.avatarPurchased]:d}),size:v,"aria-label":f.Z.Messages.USER_SETTINGS_AVATAR})}},216541:function(e,t,n){n.d(t,{d:function(){return v}});var r=n(735250);n(470079);var a=n(120356),o=n.n(a),l=n(780384),i=n(481060),s=n(410030),c=n(876917),d=n(328456),u=n(616066),f=n(562643),p=n(63243),g=n(244488);let v=e=>{let{product:t,isPurchased:n,isHighlighted:a,user:v,forCollectedModal:C,profileEffectClassName:E}=e,{firstProfileEffect:b,firstAvatarDecoration:h}=(0,d.R)(t),m=(0,s.ZP)(),y=(0,l.ap)(m);return(0,r.jsxs)("div",{className:f.container,children:[null!=b?(0,r.jsx)("div",{className:o()(f.profileEffectShopPreview,E),children:(0,r.jsx)(c.Z,{isHovering:a,profileEffectId:b.id,isPurchased:n,forCollectedModal:C,removeSetHeight:!0})}):null,null!=h?(0,r.jsx)("div",{className:f.avatarDecorationPreview,children:(0,r.jsx)(u.R,{item:h,user:v,avatarSize:i.AvatarSizes.SIZE_120,isPurchased:n,isHighlighted:a,avatarPlaceholderSrc:y?g:p})}):null]})}},642619:function(e,t,n){n.d(t,{H:function(){return o}});var r=n(735250);n(470079);var a=n(481060);let o=e=>{let{analyticsLocations:t,initialSelectedEffectId:o,guild:l}=e;(0,a.openModalLazy)(async()=>{let{default:e}=await n.e("55183").then(n.bind(n,191564));return n=>(0,r.jsx)(e,{...n,guild:l,initialSelectedEffectId:o,analyticsLocations:t})},{})}}}]);
//# sourceMappingURL=3b43ca7d05bb2c5d2dff.js.map