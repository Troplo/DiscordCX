"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["4096"],{951539:function(t,e,n){n.d(e,{ZP:()=>h,so:()=>p}),n(388685);var l=n(442837),i=n(159300),r=n(427679),a=n(592125),o=n(984933),u=n(430824),c=n(496675),s=n(700785),d=n(924301),g=n(765305),f=n(981631);function p(t){let[e,n,l,p]=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[o.ZP,a.Z,u.Z,r.Z];if((0,d.Z2)(t))return!1;let{guild_id:h,channel_id:v}=t,m=t.entity_type===g.WX.EXTERNAL?e.getDefaultChannel(t.guild_id):n.getChannel(v),y=l.getGuild(h),b=p.getStageInstanceByChannel(v);return!!(0,i.b)(c.Z,y,m,b)&&null!=m&&function(t){let[e]=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[a.Z],{entityType:n,channelId:l}="entity_type"in t?{entityType:t.entity_type,channelId:t.channel_id}:t;if(n===g.WX.EXTERNAL)return!0;let i=e.getChannel(l);return null!=i&&s.Uu(f.Plq.VIEW_CHANNEL,i)}(t,[n])}function h(t){return(0,l.e7)([o.ZP,a.Z,u.Z,r.Z],()=>p(t,[o.ZP,a.Z,u.Z,r.Z]),[t])}},7697:function(t,e,n){n.d(e,{Z:()=>f}),n(388685);var l=n(647438),i=n(392711),r=n.n(i),a=n(442837),o=n(699682),u=n(70956),c=n(709054),s=n(897285),d=n(924301),g=n(954313);function f(t,e,n){let i=(0,a.e7)([d.ZP],()=>d.ZP.getGuildScheduledEvent(t)),f=(0,o.Z)(n),[p,h]=l.useState(null!=n&&null!=i?(0,g.PJ)(4,(0,g.Ho)(n),new Date(i.scheduled_start_time)):[]);l.useEffect(()=>{if(null==f||null==n||null==i||r().isEqual(f,n))return;let t=(0,g.Ho)(n);h((0,g.PJ)(p.length,t,new Date(i.scheduled_start_time)))},[n,p.length,i,f]),l.useEffect(()=>{if(null==e)return;let n=p.map(t=>c.default.fromTimestamp(Math.floor(t.getTime()/u.Z.Millis.SECOND)*u.Z.Millis.SECOND));s.Z.getGuildEventUserCounts(e,t,n)},[t,e,p]);let v=l.useMemo(()=>{if(null==n||0===p.length||(null==i?void 0:i.scheduled_start_time)==null)return!1;let t=new Date;t.setFullYear(t.getFullYear()+g.hn);let e=p[p.length-1],l=(0,g.Ho)(n).after(e);return null!=l&&l<=t},[n,p,null==i?void 0:i.scheduled_start_time]);return{recurrenceStartTimes:p,canViewMoreRecurrences:v,updateRecurrenceStartTimes:()=>{if(null==n||null==i)return;let t=(0,g.Ho)(n),e=p[p.length-1];h([...p,...(0,g.PJ)(4,t,e,!0)])}}}},274311:function(t,e,n){n.d(e,{Q:()=>c,T:()=>s});var l=n(442837),i=n(592125),r=n(700785),a=n(924301),o=n(765305),u=n(981631);function c(t,e){return r.Uu(u.Plq.VIEW_CHANNEL,t)||e===o.WX.EXTERNAL}function s(t,e){return(0,l.e7)([i.Z,a.ZP],()=>{let n=i.Z.getChannel(t),l=a.ZP.getGuildScheduledEvent(e);return c(n,null==l?void 0:l.entity_type)},[t,e])}},118998:function(t,e,n){n.d(e,{H:()=>l});let l=t=>{let{guildId:e,guildEventId:n}=t;return"https://discord.com/events/".concat(e,"/").concat(n)}},285784:function(t,e,n){n.d(e,{Zs:()=>s,b5:()=>d}),n(388685),n(539854);var l=n(951288),i=n(647438),r=n(846519),a=n(481060),o=n(493773),u=n(765305),c=n(388032);function s(t){let{isActive:e,isUserLurking:n,rsvped:l,canInvite:s,isChannelPublic:d=!0,entityType:g,onJoinClick:f,onRsvpClick:p,onStartClick:h,onInviteClick:v,onEndClick:m,onJoinGuildClick:y,isJoined:b=!1}=t,P=void 0!==f,j=function(t){let{onInviteClick:e,canInvite:n,isChannelPublic:l}=t,u=new r.V7,[s,d]=i.useState(!1);return((0,o.ZP)(()=>()=>{u.stop()}),null==e)?null:n&&l?{variant:"secondary",icon:a.aAc,onClick:e,text:c.intl.string(c.t.RDE0SU),"aria-label":c.intl.string(c.t.Ej3B3d)}:{variant:"secondary",icon:s?a.dz2:a.xPt,onClick:t=>{null!=e&&e(t),d(!0),u.start(1e3,()=>d(!1))},disabled:s,text:s?c.intl.string(c.t["t5VZ8/"]):c.intl.string(c.t.RDE0SU),"aria-label":c.intl.string(c.t.Ej3B3d)}}({onInviteClick:v,canInvite:s,isChannelPublic:d}),Z=[];if(null!=j&&Z.push(j),e&&g!==u.WX.EXTERNAL&&Z.push({variant:"active",size:"sm",onClick:f,text:function(t){let{isJoined:e,canJoin:n,isVoiceChannel:l}=t;return n?e?c.intl.string(c.t.aW2YlJ):l?c.intl.string(c.t.nxUtoa):c.intl.string(c.t.ZYO5OD):c.intl.string(c.t.TVBCKS)}({isJoined:b,canJoin:P,isVoiceChannel:g===u.WX.VOICE}),disabled:!P}),n&&null!=y&&Z.push({variant:"active",size:"sm",text:c.intl.string(c.t["2BP08P"]),onClick:y}),!n&&!e&&null!=p){let t=l&&!n;Z.push({variant:t?"active":"secondary",size:"sm",icon:t?a.dz2:a.Dkj,text:c.intl.string(c.t.DlcqlZ),onClick:p,disabled:n})}return e||null==h||Z.push({variant:"primary",size:"sm",onClick:h,text:c.intl.string(c.t.I0v0Qk)}),e&&null!=m&&Z.push({variant:"secondary",size:"sm",onClick:m,text:c.intl.string(c.t.qaYzPD)}),Z}function d(t){let{onClick:e}=t;return(0,l.jsx)(a.hU,{icon:a.xhG,variant:"secondary","aria-label":c.intl.string(c.t.bt75u7),onClick:e})}},421032:function(t,e,n){n.d(e,{Z:()=>b});var l=n(951288);n(647438);var i=n(120356),r=n.n(i),a=n(442837),o=n(481060),u=n(239091),c=n(592125),s=n(430824),d=n(924301),g=n(894017),f=n(954313),p=n(390966),h=n(765305),v=n(388032),m=n(709380);function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},l=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),l.forEach(function(e){var l;l=n[e],e in t?Object.defineProperty(t,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[e]=l})}return t}function b(t){let{recurrenceId:e,originalScheduledStartTime:i,guildEventId:b,onClick:P,isActive:j}=t,Z=(0,a.e7)([d.ZP],()=>d.ZP.getGuildScheduledEvent(b)),E=(0,g.Z)(e,null==Z?void 0:Z.id),O=(0,a.e7)([s.Z],()=>s.Z.getGuild(null==Z?void 0:Z.guild_id)),C=(0,a.e7)([c.Z],()=>c.Z.getChannel(null==Z?void 0:Z.channel_id));if(null==Z)return null;let{is_canceled:x=!1}=null!=E?E:{},_=(null==E?void 0:E.scheduled_start_time)!=null?new Date(null==E?void 0:E.scheduled_start_time):i,D=(0,f.DK)(Z),S=x?h.p1.CANCELED:h.p1.SCHEDULED;D===e&&(S=Z.status);let w=(null==Z?void 0:Z.scheduled_start_time)!=null?(0,f.lh)(E,_,new Date(null==Z?void 0:Z.scheduled_start_time)):null,k=t=>{t.stopPropagation(),null!=O&&(0,u.jW)(t,async()=>{let{default:t}=await Promise.all([n.e("34261"),n.e("27434")]).then(n.bind(n,215269));return n=>(0,l.jsx)(t,y({guildEventId:Z.id,recurrenceId:e,channel:C,guild:O,isRecurrenceItem:!0},n))})};return(0,l.jsxs)(o.kL8,{className:r()(m.container,{[m.canceled]:x,[m.clickable]:null!=P,[m.active]:j}),onClick:t=>{t.stopPropagation(),x||null==P||P(e)},onContextMenu:k,"aria-label":"",children:[(0,l.jsx)(p.z,{startTime:_.toISOString(),status:null!=w?w:S,eventType:Z.entity_type,guildEventId:Z.id,recurrenceId:e,className:m.timeStatus}),x&&(0,l.jsx)(o.Text,{variant:"text-sm/semibold",color:"text-danger",className:m.canceledStatus,children:v.intl.string(v.t.fyBVRk)}),(0,l.jsx)(o.ua7,{text:v.intl.string(v.t.UKOtz8),position:"top","aria-label":v.intl.string(v.t.bt75u7),children:t=>{var e,n;return(0,l.jsx)(o.P3F,(e=y({},t),n=n={onClick:k,className:m.iconButton,children:(0,l.jsx)(o.xhG,{size:"custom",color:"currentColor",width:20,height:20,className:m.icon})},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n.push.apply(n,l)}return n})(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e))}})]})}},810561:function(t,e,n){n.d(e,{Z:()=>g});var l=n(951288);n(647438);var i=n(120356),r=n.n(i),a=n(481060),o=n(709054),u=n(7697),c=n(421032),s=n(388032),d=n(393181);function g(t){let{guildId:e,recurrenceRule:n,guildEventId:i,onRecurrenceClick:g,hideScroller:f=!1,activeRecurrenceId:p}=t,{recurrenceStartTimes:h,canViewMoreRecurrences:v,updateRecurrenceStartTimes:m}=(0,u.Z)(i,e,n),y=f?"div":a.Ttm;return(0,l.jsxs)("div",{className:d.recurrences,children:[(0,l.jsx)(a.X6q,{variant:"heading-sm/medium",className:d.heading,children:s.intl.string(s.t["D/jjoa"])}),(0,l.jsxs)(y,{className:r()(d.scroller,{[d.showScroller]:!f}),children:[h.map(t=>{let e=o.default.fromTimestamp(t.getTime());return(0,l.jsx)(c.Z,{recurrenceId:e,originalScheduledStartTime:t,guildEventId:i,onClick:g,isActive:e===p},e)}),v&&(0,l.jsx)("div",{className:d.buttonContainer,children:(0,l.jsx)(a.Avr,{onClick:t=>{t.stopPropagation(),m()},text:s.intl.string(s.t["8O7Hp6"]),size:"sm"})})]})]})}},462179:function(t,e,n){n.d(e,{Z:()=>w});var l=n(951288);n(647438);var i=n(442837),r=n(481060),a=n(239091),o=n(749210),u=n(305325),c=n(281956),s=n(357156),d=n(703656),g=n(922482),f=n(984933),p=n(430824),h=n(496675),v=n(626135),m=n(572004),y=n(482241),b=n(951539),P=n(894017),j=n(274311),Z=n(954313),E=n(118998),O=n(139712),C=n(765305),x=n(981631),_=n(388032);function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},l=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),l.forEach(function(e){var l;l=n[e],e in t?Object.defineProperty(t,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[e]=l})}return t}function S(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n.push.apply(n,l)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}function w(t){let{guild:e,channel:w,guildScheduledEvent:k,isActive:T,recurrenceId:N,onActionTaken:I}=t,{scheduled_start_time:G,id:H,entity_type:L,guild_id:V}=k,{canManageGuildEvent:X}=(0,s.XJ)(null!=w?w:e),z=X(k),U=(0,b.ZP)(k),W=(0,j.T)(null==w?void 0:w.id,k.id),{withinStartWindow:R}=(0,Z.ub)(G),A=(0,i.e7)([h.Z],()=>null==w||!w.isGuildVocal()||h.Z.can(x.Plq.CONNECT,w),[w]),q=(0,c.J)(V),B=(0,P.Z)(N,H);function J(t){t.stopPropagation(),(0,O.Z)(H,N,V)}async function M(t){t.stopPropagation(),await o.Z.joinGuild(V),p.Z.addConditionalChangeListener(()=>null==p.Z.getGuild(V)||(T||J(t),function(t){t.stopPropagation();let e=f.ZP.getDefaultChannel(V);(0,r.pTH)(),(0,d.XU)(V,null==e?void 0:e.id)}(t),!1))}return{onDeleteClick:z?function(t){t.stopPropagation(),z&&!T&&(0,r.h7j)(t=>(0,l.jsx)(r.ConfirmModal,S(D({},t),{header:_.intl.string(_.t.R5bpio),confirmText:_.intl.string(_.t.oyYWHB),cancelText:_.intl.string(_.t["ETE/oK"]),onConfirm:()=>y.Z.deleteGuildEvent(H,V),children:(0,l.jsx)(r.Text,{variant:"text-md/normal",children:_.intl.string(_.t.v2GWNT)})})))}:void 0,onContextMenu:function(t){t.stopPropagation(),null!=e&&(0,a.jW)(t,async()=>{let{default:t}=await Promise.all([n.e("34261"),n.e("27434")]).then(n.bind(n,215269));return n=>(0,l.jsx)(t,D({guildEventId:H,recurrenceId:N,channel:w,guild:e},n))})},onJoinClick:A||q?function(t){if(t.stopPropagation(),q){null==I||I(),(0,u.hk)(V);return}(null==w?void 0:w.isGuildStageVoice())?((0,g.Cq)(w),null==I||I()):(null==w?void 0:w.isGuildVoice())&&(y.Z.joinVoiceEvent(w.guild_id,w.id),null==I||I())}:void 0,onRsvpClick:J,onStartClick:z&&R&&!(null==B?void 0:B.is_canceled)?function(t){t.stopPropagation(),(0,r.ZDy)(async()=>{let{default:t}=await Promise.all([n.e("84722"),n.e("14531")]).then(n.bind(n,296864));return e=>(0,l.jsx)(t,S(D({},e),{event:k,onSuccess:I}))})}:void 0,onInviteClick:function(t){if(t.stopPropagation(),null!=e){if(!U||!W){let t=(0,E.H)({guildId:V,guildEventId:H});(0,m.JG)(t),v.default.track(x.rMx.GUILD_SCHEDULED_EVENT_LINK_COPIED,{guild_id:V,guild_scheduled_event_id:H});return}(0,r.ZDy)(async()=>{let{default:t}=await Promise.all([n.e("7654"),n.e("49049"),n.e("92252")]).then(n.bind(n,560114));return n=>(0,l.jsx)(t,S(D({},n),{guild:e,channel:w,guildScheduledEvent:k,source:x.t4x.GUILD_EVENTS}))})}},onEndClick:z&&L===C.WX.EXTERNAL&&T?function(t){if(t.stopPropagation(),!z)return;let e=()=>{y.Z.endEvent(H,V),(0,r.pTH)()};(0,r.h7j)(t=>(0,l.jsx)(r.ConfirmModal,S(D({},t),{header:_.intl.string(_.t.qaYzPD),confirmText:_.intl.string(_.t.mjB9pa),cancelText:_.intl.string(_.t["ETE/oK"]),onConfirm:e,children:(0,l.jsx)(r.Text,{variant:"text-md/normal",children:_.intl.string(_.t.bnDQ7O)})})))}:void 0,onJoinGuildClick:M}}},981888:function(t,e,n){n.d(e,{Z:()=>r}),n(388685);var l=n(647438),i=n(881052);function r(t,e){let[n,r]=l.useState(!1),[a,o]=l.useState(null);return[async()=>{r(!0),o(null);try{let e=await t();return r(!1),o(null),e}catch(n){let t=new i.Hx(n);return null==e||e(t),o(t),r(!1),null}},{loading:n,error:a}]}}}]);
//# sourceMappingURL=802b83c87f9e0fc4.js.map