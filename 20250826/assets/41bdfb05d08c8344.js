"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["70205"],{95045:function(t){t.exports="/assets/dbf950ebc5dc2bc5.png"},864060:function(t,e,n){n.d(e,{FI:()=>G,LL:()=>L,N_:()=>M,Xi:()=>H,eF:()=>w}),n(997841),n(953529),n(415506);var i=n(317381),l=n(933557),a=n(710845),r=n(978003),o=n(41776),u=n(355298),s=n(957730),d=n(850908),c=n(572804),f=n(901461),g=n(569471),_=n(723170),E=n(695346),p=n(131704),N=n(433355),T=n(592125),S=n(430824),I=n(19780),h=n(699516),C=n(944486),Z=n(914010),A=n(885110),v=n(9156),m=n(594174),y=n(630388),P=n(5192),O=n(352736),D=n(51144);n(734934);var U=n(842619),R=n(981631),b=n(124368),k=n(388032);function L(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e.hasFlag(R.xW$.SPAMMER)||n.isManaged())return!1;let l=n.getGuildId();return!(null!=l&&o.Z.isLurking(l)||!i.ignoreSameUser&&e.id===t.id||h.Z.isBlockedOrIgnored(e.id)||!i.ignoreStatus&&A.Z.getStatus()===R.Skl.DND||E.QZ.getSetting()||!i.ignoreNoMessagesSetting&&v.ZP.allowNoMessages(n))}function w(t,e){var n,l;let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null!=t.flags&&(0,y.yE)(t.flags,R.iLy.SUPPRESS_NOTIFICATIONS))return!1;let o=T.Z.getChannel(e);t.type===R.uaV.THREAD_STARTER_MESSAGE&&(o=T.Z.getChannel(null==o?void 0:o.parent_id));let s=m.default.getCurrentUser(),d=m.default.getUser(null==(n=t.author)?void 0:n.id);if(null==o||null==s||null==d||o.type===R.d4z.GROUP_DM&&t.type===R.uaV.RECIPIENT_REMOVE||U.Z.areSlayerNotificationsSuppressed()&&((l=o).type===R.d4z.DM||null!=l.linkedLobby)||!L(s,d,o,{ignoreStatus:r,ignoreSameUser:R.V$x.SELF_MENTIONABLE_SYSTEM.has(t.type)})||u.Z.isMessageRequest(e))return!1;if(!a){let t=C.Z.getChannelId(Z.Z.getGuildId());if(t===o.id||N.ZP.getCurrentSidebarChannelId(t)===o.id)return!1}if(h.Z.isBlockedOrIgnoredForMessage(t)||void 0!==t.activity_instance&&null!=t.interaction&&t.interaction.user.id===s.id)return!1;if(null!=t.application_id){let n=i.ZP.getCurrentEmbeddedActivity();if((null==n?void 0:n.applicationId)===t.application_id&&n.location.channel_id===e)return!1}if(t.type===R.uaV.CHAT_WALLPAPER_SET||t.type===R.uaV.CHAT_WALLPAPER_REMOVED)return!1;if(p.Ec.has(o.type)){if(g.Z.isMuted(o.id))return!1;let e=(0,_.J)(o);return e!==b.iN.NO_MESSAGES&&(e===b.iN.ALL_MESSAGES||(0,c.Hl)({rawMessage:t,userId:s.id,suppressEveryone:!1,suppressRoles:!1}))}{let e=!p.tx.has(o.type)||I.Z.getChannelId()===o.id;if(v.ZP.allowAllMessages(o)&&e)return!0;let n=v.ZP.isSuppressEveryoneEnabled(o.getGuildId()),i=v.ZP.isSuppressRolesEnabled(o.getGuildId());return(0,c.Hl)({rawMessage:t,userId:s.id,suppressEveryone:n,suppressRoles:i})}}function M(t,e){var n;if(C.Z.getChannelId(Z.Z.getGuildId())!==e)return!1;let i=T.Z.getChannel(e);t.type===R.uaV.THREAD_STARTER_MESSAGE&&(i=T.Z.getChannel(null==i?void 0:i.parent_id));let l=m.default.getCurrentUser(),a=m.default.getUser(null==(n=t.author)?void 0:n.id);return!(null==i||null==l||null==a||i.isManaged()||a.hasFlag(R.xW$.SPAMMER)||h.Z.isBlockedOrIgnoredForMessage(t)||a.id===l.id||A.Z.getStatus()===R.Skl.DND||E.QZ.getSetting()||v.ZP.allowNoMessages(i))&&t.type!==R.uaV.CHAT_WALLPAPER_SET&&t.type!==R.uaV.CHAT_WALLPAPER_REMOVED}function G(t,e){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=m.default.getCurrentUser(),a=m.default.getUser(t.ownerId);return!(null==e||null==l||null==a||!L(l,a,e,{ignoreStatus:i,ignoreNoMessagesSetting:!0})||v.ZP.isGuildOrCategoryOrChannelMuted(e.guild_id,e.id))&&(!!n||C.Z.getChannelId(Z.Z.getGuildId())!==e.id)&&v.ZP.getNewForumThreadsCreated(e)}let V=(t,e,n)=>"".concat(t," (").concat((0,l.F6)(e,m.default,h.Z,!0)).concat(null!=n?", ".concat((0,l.F6)(n,m.default,h.Z)):"",")");function F(t,e,n,i){switch(t.type){case R.d4z.GUILD_ANNOUNCEMENT:case R.d4z.GUILD_TEXT:return e;case R.d4z.GROUP_DM:return n;case R.d4z.DM:default:return i}}function H(t,e,n){let i,o=P.ZP.getName(t.getGuildId(),t.id,n),u=o;switch(t.type){case R.d4z.GUILD_ANNOUNCEMENT:case R.d4z.GUILD_TEXT:case R.d4z.GUILD_VOICE:case R.d4z.ANNOUNCEMENT_THREAD:case R.d4z.PUBLIC_THREAD:case R.d4z.PRIVATE_THREAD:let c=T.Z.getChannel(t.parent_id);e.type===R.uaV.THREAD_STARTER_MESSAGE&&null!=c?u=V(u,c,T.Z.getChannel(c.parent_id)):(0,f.Z)(e)?null!=S.Z.getGuild(t.getGuildId())&&(u=V(u,t,c)):u=V(u,t,c);break;case R.d4z.GROUP_DM:t.isManaged()&&n.bot&&u===(0,l.F6)(t,m.default,h.Z)||(u="".concat(u," (").concat((0,l.F6)(t,m.default,h.Z,!0),")"))}let g=e.content;if((0,f.Z)(e)&&null==(g=O.Z.stringify(e,t)))throw new a.Z("NotificationTextUtils").warn("SystemMessageUtils.stringify(...) could not convert",{message:e}),Error("failed to stringify system message");let _="sticker_items"in e?e.sticker_items:"stickerItems"in e?e.stickerItems:e.stickers;if("message_reference"in e?(0,r.s)(e):(0,r.Z)(e))i=k.intl.string(k.t["9ddYKi"]);else if(null!=e.activity&&null!=e.application)i=e.activity.type===R.mFx.JOIN?k.intl.formatToPlainString(F(t,k.t.E8CgCg,k.t.c6KHWF,k.t.Fy7rJC),{user:o,game:e.application.name}):e.activity.type===R.mFx.JOIN_REQUEST?k.intl.formatToPlainString(F(t,k.t["/TD0lZ"],k.t["/TD0lZ"],k.t["/TD0lZ"]),{user:o,game:e.application.name}):"";else if(null!=e.activity&&e.activity.type===R.mFx.LISTEN){let e=F(t,k.t.SaDdmJ,k.t.qsODho,k.t.WeiMTU);i=k.intl.formatToPlainString(e,{user:o})}else if(null!=_&&_.length>0)i=k.intl.formatToPlainString(k.t.zY4v1N,{stickerName:_[0].name});else if(e.type===R.uaV.PREMIUM_REFERRAL)i=k.intl.formatToPlainString(k.t.lieTqa,{username:D.ZP.getName(n)});else if(null!=e.poll)i=k.intl.formatToPlainString(k.t.ImizdH,{question:e.poll.question.text});else if(e.type===R.uaV.POLL_RESULT){var E,p,N;let t=null==(N=e.embeds)||null==(p=N[0])||null==(E=p.fields)?void 0:E.find(t=>("name"in t?t.name:t.rawName)==="poll_question_text"),n=null!=t?"value"in t?t.value:t.rawValue:"";i=k.intl.formatToPlainString(k.t["9WrecH"],{question:n})}else i=0!==g.length&&t.type===R.d4z.DM&&!n.bot&&g.startsWith("> -# *")?(i=s.ZP.unparse(g,t.id,!0)).substring(0,1)+i.substring(4):s.ZP.unparse(g,t.id,!0);return 0===i.length&&(i=function(t){var e;if(void 0!==t.embeds&&t.embeds.length>0){let e=t.embeds[0],n="description"in e?e.description:e.rawDescription,i="title"in e?e.title:e.rawTitle;if(null!=n)return null!=i?"".concat(i," ").concat(n):n;if(null!=i)return i;if(null!=e.fields&&e.fields.length>0){let t=e.fields[0],n="name"in t?t.name:t.rawName,i="value"in t?t.value:t.rawValue;return"".concat(n," ").concat(i)}}if((0,y.yE)(null!=(e=t.flags)?e:0,R.iLy.IS_VOICE_MESSAGE))return k.intl.string(k.t.slFYgo);if(void 0!==t.attachments&&t.attachments.length>0){let e=(0,d.Z)(t.attachments[0]);return k.intl.formatToPlainString(k.t["51OkwM"],{filename:e})}return""}(e)),{icon:n.getAvatarURL(t.guild_id,128),title:u,body:i}}},842619:function(t,e,n){n.d(e,{Z:()=>f});var i,l,a=n(442837),r=n(570140),o=n(818083),u=n(314897);let s={},d=(0,o.B)({kind:"user",id:"2025-03_slayer_notif_supression_killswitch",label:"Disable suppressing notifications with slayer game active",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Disable suppressing",config:{enabled:!0}}]});class c extends(l=a.ZP.Store){areSlayerNotificationsSuppressed(){if(d.getCurrentConfig({location:"Store"},{autoTrackExposure:!1}).enabled)return!1;for(let t in s)if(s[t]===u.default.getId())return!0;return!1}}(i="displayName")in c?Object.defineProperty(c,i,{value:"RpcNotificationSettingsStore",enumerable:!0,configurable:!0,writable:!0}):c[i]="RpcNotificationSettingsStore";let f=new c(r.Z,{RPC_APP_DISCONNECTED:function(t){delete s[t.socketId]},SET_RPC_NOTIFICATION_SETTINGS:function(t){delete s[t.socketId],t.suppressNotifications&&(s[t.socketId]=t.targetUserId)}})},687272:function(t,e,n){n.d(e,{QU:()=>r,_x:()=>o});var i=n(818083),l=n(432919);let a=(0,i.B)({kind:"user",id:"2025-06_desktop_notifications_view_tracking",label:"Track when a desktop notification is viewed",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Track Notification View",config:{enabled:!0}}]}),r=t=>{let{enabled:e}=a.getCurrentConfig({location:t},{autoTrackExposure:!0});return e},o=(t,e)=>{if(null==e)return!1;let n=(0,l.h)(e),i=r(t);return n&&i}},432919:function(t,e,n){n.d(e,{h:()=>a});var i=n(108131),l=n.n(i);function a(t){let e=l().v3(String(t));return e<0&&(e+=0x100000000),e%0x7fffffff<21474836.47}},11352:function(t,e,n){n.d(e,{Y:()=>i});let i=(0,n(818083).B)({kind:"user",id:"2024-04_custom_notification_sound_web",label:"Custom Notification Sound for Desktop",defaultConfig:{enabled:!1,nestedEntry:!1},treatments:[{id:1,label:"Enable custom notification sounds",config:{enabled:!0,nestedEntry:!1}},{id:2,label:"Enable custom notification sounds + nested entry point",config:{enabled:!0,nestedEntry:!0}}]})},671105:function(t,e,n){n.d(e,{OR:()=>r,_c:()=>u,bb:()=>s,iD:()=>o});var i=n(442837),l=n(581883),a=n(871465);function r(t){return d(t,void 0,(0,i.e7)([l.Z],()=>{var t;return null==(t=l.Z.settings.guilds)?void 0:t.guilds}))}function o(t){var e,n;return d(t,void 0,null!=(n=null==(e=l.Z.settings.guilds)?void 0:e.guilds)?n:{})}function u(t,e){let n=(0,i.e7)([l.Z],()=>{var t;return null==(t=l.Z.settings.guilds)?void 0:t.guilds});return null!=e?d(t,e,n):void 0}function s(t,e){var n,i;let a=null!=(i=null==(n=l.Z.settings.guilds)?void 0:n.guilds)?i:{};return null!=e?d(t,e,a):void 0}function d(t,e,n){var i,l,r;if(null==n)return;let o=null!=e?null==(i=n[t])?void 0:i.channels[e]:n[t],u=null==o?void 0:o.customNotificationSoundConfig;return null!=u&&null!=(r=null==u||null==(l=u.notificationSoundPackId)?void 0:l.value)?Object.values(a.YC).find(t=>t===r):void 0}},974180:function(t,e,n){n.d(e,{Ay:()=>tg,yk:()=>t_}),n(388685),n(539854);var i,l=n(392711),a=n(149765),r=n(442837),o=n(524437),u=n(433517),s=n(570140),d=n(493683),c=n(475179),f=n(749210),g=n(292556),_=n(287734),E=n(232567),p=n(579806),N=n(761781),T=n(728345),S=n(812206),I=n(802098),h=n(933557),C=n(456269),Z=n(890022),A=n(688907),v=n(15274),m=n(336197),y=n(355298),P=n(786761),O=n(601992),D=n(864060),U=n(687272),R=n(691294),b=n(11352),k=n(671105),L=n(106371),w=n(703656),M=n(359110),G=n(922482),V=n(427679),F=n(488131),H=n(695346),W=n(601964),x=n(592125),Y=n(430824),q=n(375954),z=n(292959),B=n(496675),X=n(306680),j=n(699516),J=n(944486),K=n(885110),Q=n(246946),$=n(594174),tt=n(979651),te=n(626135),tn=n(70956),ti=n(5192),tl=n(358085),ta=n(74538),tr=n(51144),to=n(654769),tu=n(981631),ts=n(765305),td=n(388032);function tc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tf(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){tc(t,e,n[e])})}return t}let tg="message1",t_=.4,tE=(null===p.Z||void 0===p.Z?void 0:p.Z.features.supports("notifications"))?20:1,tp="discord_dismissed_notification_shown",tN=document.hasFocus(),tT=null,tS=new Set,tI={},th={},tC=["FR","GF","PF","TF","RE","GP","MQ","YT","NC","PM","WF"],tZ=new class{track(t,e,n){let i=this._channels[t];for(null==i&&(i=[],this._channels[t]=i),i.push({notification:e,trackingProps:n});i.length>tE;){var l;let t=i.shift();(null==t||null==(l=t.notification)?void 0:l.close)!=null&&(t.notification.close(),te.default.track(tu.rMx.NOTIFICATION_ACTION,tf({action:"REMOVE"},t.trackingProps)))}}clearChannel(t){let e=this._channels[t];null!=e&&(delete this._channels[t],e.forEach(t=>{let{notification:e,trackingProps:n}=t;e.close(),te.default.track(tu.rMx.NOTIFICATION_ACTION,tf({action:"ACK"},n))}))}constructor(){tc(this,"_channels",{})}};function tA(t,e){let{gameActivityNotificationType:n,excludeSteamGames:i}=e,l=t;i&&(l=t.filter(t=>{var e;return null==(e=t.metadata)||!e.distributor||t.metadata.distributor!==tu.GQo.STEAM}));let a=l.filter(t=>t.type===tu.IIU.PLAYING&&null!=t.application_id).map(t=>t.application_id);return n===o.Tv.ONLY_GAMES_PLAYED&&(a=a.filter(t=>N.Z.currentUserApplicationIds.has(t))),a}async function tv(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=(0,A.MH)(),i=(0,A.j4)(),a=(0,Z.dm)(t);if(e){let t=new Set;a.forEach(e=>{let{activities:l,user:a}=e;if(0===l.length||j.Z.isIgnored(a.id))return;let r=tA(l,{gameActivityNotificationType:n,excludeSteamGames:i});0!==r.length&&(t=new Set([...t,...r]))}),await T.ZP.fetchApplications([...t],!1)}a.forEach(t=>{let{activities:a,user:r,guildId:o}=t;!function(t,e,n,i){let a=tm(e);if(0===t.length&&0===a.length)return;let r=(0,l.difference)(t,a).filter(t=>{var n;return null!=t&&(null==(n=tI[e])?void 0:n[t])==null});(0,l.difference)(a,t).filter(t=>{var n;return null!=t&&(null==(n=tI[e])?void 0:n[t])===i}).forEach(t=>{delete tI[e][t]}),r.forEach(t=>{var l,a;if(null==tI[e]?tI[e]={[t]:i}:null==tI[e][t]&&(tI[e][t]=i),!n||tP())return;let r=null!=(a=null==(l=th[e])?void 0:l[t])?a:0;if(Date.now()-r<tn.Z.Millis.HOUR)return;let o=S.Z.getApplication(t);null!=o&&(null==th[e]&&(th[e]={}),th[e][t]=Date.now(),ty(o,e))}),0===tm(e).length&&delete tI[e]}(tA(a,{gameActivityNotificationType:n,excludeSteamGames:i}),r.id,e,null!=o?o:0)})}function tm(t){var e;return Object.keys(null!=(e=tI[t])?e:{})}async function ty(t,e){var n;let i=await (0,E.PR)(e),l=await (0,R.m)(i.getAvatarURL(null,64),null!=(n=t.getIconURL(64))?n:null);to.Z.showNotification(l,td.intl.formatToPlainString(td.t.kO0pfX,{name:ti.ZP.getName(null,null,i),activity:t.name}),"",{notif_type:"game_notif",application_id:t.id,affine_user_id:e},{onClick:t=>{d.Z.openPrivateChannel({recipientIds:e})},isUserAvatar:!1,actions:[{content:td.intl.string(td.t["E+yYpq"]),args:"open_message_action"}]})}function tP(){return!!(z.Z.getDesktopType()===tu.qrD.NEVER||K.Z.getStatus()===tu.Skl.DND||H.QZ.getSetting())}function tO(t){return null!=tt.Z.getVoiceStateForChannel(t)}class tD extends(i=r.ZP.Store){initialize(){this.waitFor($.default,x.Z,z.Z,Y.Z,V.Z,j.Z,B.Z,tt.Z,y.Z)}}tc(tD,"displayName","NotificationStore"),new tD(s.Z,__OVERLAY__?{}:{NOTIFICATIONS_SET_PERMISSION_STATE:function(t){let{enabled:e}=t;if(e===tu.$Ab.ENABLED&&!tl.isPlatformEmbedded){let t=!(0,U.QU)("NotificationStore.handleSetHavePermission");to.Z.showNotification(n(910653),td.intl.string(td.t.VSgOVl),td.intl.string(td.t["1UJvqa"]),{notif_type:"NOTIFICATIONS_SET_PERMISSION_STATE"},{omitViewTracking:t,sound:tg,volume:t_,tag:"hello",onClick:()=>{window.focus()},isUserAvatar:!1})}},NOTIFICATION_CREATE:function(t){let{icon:e,title:n,body:i,trackingProps:l,options:a}=t;return!tP()&&(to.Z.showNotification(e,n,i,l,a),!1)},WINDOW_FOCUS:function(t){if(tN=t.focused){let t=J.Z.getChannelId();null!=t&&tZ.clearChannel(t)}},MESSAGE_CREATE:function(t){var e,i,l,a,r;let{channelId:o,message:u,optimistic:d}=t;if(d)return!1;let f=x.Z.getChannel(o),_=$.default.getUser(null==(e=u.author)?void 0:e.id),E=$.default.getCurrentUser();if(null==f||null==_||null==E)return!1;let p=(0,D.eF)(u,o,!tN),N=z.Z.getNotifyMessagesInSelectedChannel()&&(0,D.N_)(u,o);if(!p&&!N||u.type===tu.uaV.CHANGELOG&&(null==u.changelog_id||I.Z.latestChangelogId()!==u.changelog_id))return!1;let T=!z.Z.isSoundDisabled(tg),S=ta.ZP.canUseCustomNotificationSounds(E),h=b.Y.getCurrentConfig({location:"NotificationStore"}).enabled,C=S&&h&&T?null!=(a=(0,k.bb)(null!=(l=f.guild_id)?l:tu.aIL,o))?a:(0,k.iD)(f.guild_id):void 0;if(N&&(T&&to.Z.playNotificationSound("message3",.4,C),!tN)||!p)return!1;let Z=n(808506).default,A=n(624864).Z,{OverlayNotificationDisabledSetting:v}=n(486016);if(null!=Z.getFocusedPID()&&!A.isNotificationDisabled(v.TEXT_CHAT)&&!Q.Z.disableNotifications)return!1;let{icon:m,title:y,body:R}=(0,D.Xi)(f,u,_),L=!(0,U._x)("NotificationStore.handleMessage",null==E?void 0:E.id);if(s.Z.dispatch({type:"RPC_NOTIFICATION_CREATE",channelId:f.id,message:u,icon:m,title:y,body:R}),(0,O.R)(u,f.guild_id),z.Z.getDesktopType()===tu.qrD.NEVER)return T&&to.Z.playNotificationSound(tg,t_,C),!1;let w=null!=(r=q.Z.getMessage(o,u.id))?r:(0,P.e5)(u);to.Z.showNotification(m,y,R,{notif_type:"MESSAGE_CREATE",notif_user_id:null==(i=u.author)?void 0:i.id,message_id:u.id,message_type:u.type,channel_id:f.id,channel_type:f.type,guild_id:f.guild_id,badge:(0,X.Ex)(w,E)},{omitViewTracking:L,tag:u.id,sound:T?tg:void 0,soundpack:C,volume:t_,onClick(){(0,M.Kh)(f.id),(f.type===tu.d4z.GUILD_VOICE||f.type===tu.d4z.GUILD_STAGE_VOICE)&&c.Z.updateChatOpen(f.id,!0),g.default.clickedNotification()},isUserAvatar:!0,messageRecord:w,fallbackDeepLink:(0,to.W)(tu.Z5c.CHANNEL(f.guild_id,f.id,u.id))}).then(t=>{null!=t&&tZ.track(f.id,t.notification,t.trackingProps)})},CHANNEL_SELECT:function(t){let{channelId:e}=t;return null!=e&&tZ.clearChannel(e),!1},MESSAGE_ACK:function(t){let{channelId:e}=t;return tZ.clearChannel(e),!1},ACTIVITY_START:function(t){let{userId:e,activity:n}=t;if(tP()||n.type!==tu.IIU.PLAYING)return!1;{let t=$.default.getUser(e);if(null==t)return!1;let i=tr.ZP.getName(t),l=n.name,a=t.getAvatarURL(void 0,128),r=td.intl.string(td.t.XoTWsL),o=td.intl.formatToPlainString(td.t.o4Aipq,{username:i,gameName:l});return to.Z.showNotification(a,r,o,{notif_type:"ACTIVITY_START",activity_type:tu.IIU.PLAYING,notif_user_id:e,activity_name:l},{sound:"message2",playSoundIfDisabled:!1,volume:.4,onClick(){d.Z.openPrivateChannel({recipientIds:e})},isUserAvatar:!0}),!1}},VOICE_STATE_UPDATES:function(t){let{voiceStates:e}=t;if(tP())return;let n=$.default.getCurrentUser();if(null==n)return;let i=e.find(t=>t.userId===n.id);if(null==i)return;let{channelId:l,guildId:a,suppress:r,requestToSpeakTimestamp:o}=i;if(null==l||null==a||!(!r&&null!=o))return;let u=Y.Z.getGuild(a),s=x.Z.getChannel(l),d=V.Z.getStageInstanceByChannel(l);null!=u&&null!=s&&null!=d&&to.Z.showNotification((0,W.EB)(u,128),s.name,td.intl.formatToPlainString(td.t.sqnsSE,{channelName:(0,h.F6)(s,$.default,j.Z),channelTopic:null==d?void 0:d.topic}),{notif_type:"Stage Speak Invite"},{isUserAvatar:!1})},STAGE_INSTANCE_UPDATE:function(t){let{instance:e}=t;if(tP()||!e.send_start_notification||tO(e.channel_id))return!1;let n=$.default.getCurrentUser(),i=Y.Z.getGuild(e.guild_id),l=x.Z.getChannel(e.channel_id),r=$.default.getUser(e.host_id);if(null==n||null==l||null==i||null==r||!(0,D.LL)(n,r,l)||!B.Z.can(a.$e(tu.Plq.CONNECT,tu.Plq.VIEW_CHANNEL),l)||tS.has(e.id))return!1;tS.add(e.id),to.Z.showNotification((0,W.EB)(i,128),td.intl.formatToPlainString(td.t.bZ4OkZ,{guildName:i.name}),td.intl.formatToPlainString(td.t.qTelnJ,{username:ti.ZP.getName(i.id,l.id,r),topic:e.topic}),{notif_type:"STAGE_INSTANCE_CREATE",guild_id:i.id,channel_id:l.id},{onClick(){(0,G.Cq)(l)},isUserAvatar:!1})},STAGE_INSTANCE_DELETE:function(t){let{instance:e}=t;tS.delete(e.id)},GUILD_SCHEDULED_EVENT_UPDATE:function(t){let{guildScheduledEvent:e}=t;if(tP()||null==e.notification_type)return!1;e.notification_type===ts.sy.EVENT_START&&(e.entity_type===ts.WX.STAGE_INSTANCE||e.entity_type===ts.WX.VOICE?function(t){if(tP())return;let e=t.channel_id;if(null==e||tO(e))return;let n=$.default.getCurrentUser(),i=Y.Z.getGuild(t.guild_id),l=x.Z.getChannel(t.channel_id),r=$.default.getUser(t.host_id);if(null!=n&&null!=l&&null!=i&&null!=r&&B.Z.can(a.$e(tu.Plq.CONNECT,tu.Plq.VIEW_CHANNEL),l))to.Z.showNotification((0,W.EB)(i,128),td.intl.formatToPlainString(td.t.bOu6Wl,{guildName:i.name}),td.intl.formatToPlainString(td.t.GV9L8v,{topic:t.name,username:ti.ZP.getName(i.id,l.id,r)}),{notif_type:"GUILD_SCHEDULED_EVENT_UPDATE",guild_id:i.id,channel_id:l.id},{onClick(){t.entity_type===ts.WX.STAGE_INSTANCE&&(0,G.Cq)(l),t.entity_type===ts.WX.VOICE&&_.default.selectVoiceChannel(l.id)},isUserAvatar:!1})}(e):e.entity_type===ts.WX.EXTERNAL&&function(t){if(tP())return;let e=$.default.getCurrentUser(),n=Y.Z.getGuild(t.guild_id);if(null!=e&&null!=n)to.Z.showNotification((0,W.EB)(n,128),td.intl.formatToPlainString(td.t.bOu6Wl,{guildName:n.name}),td.intl.formatToPlainString(td.t.mYyaRE,{topic:t.name}),{notif_type:"GUILD_SCHEDULED_EVENT_UPDATE",guild_id:n.id},{onClick(){f.Z.transitionToGuildSync(t.guild_id),(0,v.bO)({eventId:t.id})},isUserAvatar:!1})}(e))},THREAD_CREATE:function(t){var e;let{channel:n,isNewlyCreated:i}=t;if(tP())return!1;let l=x.Z.getChannel(n.parent_id);if(null==l||!tu.TPd.GUILD_THREADS_ONLY.has(l.type)||!i||!(0,D.FI)(n,l,!tN))return!1;let{author:a,user:r}=(0,C.MC)(n);if(null==r)return!1;let o=Y.Z.getGuild(l.guild_id);if(null==o)return!1;let u=td.intl.formatToPlainString(td.t["2IGVl5"],{channelName:l.name,guildName:o.name}),s=td.intl.formatToPlainString(td.t.jPhTvb,{channelName:n.name,userUsername:null!=(e=null==a?void 0:a.nick)?e:null==r?void 0:r.username}),d=r.getAvatarURL(void 0,128);to.Z.showNotification(d,u,s,{notif_type:"THREAD_CREATE",notif_user_id:r.id},{onClick(){(0,F.ok)(n)},isUserAvatar:!0})},GENERIC_PUSH_NOTIFICATION_SENT:function(t){let e,{icon:n,title:i,body:l,route:a,trackingType:r,tag:o}=t;if(tP()||null==i||null==l||null==r||"reactions_push_notification"===r)return!1;to.Z.showNotification(n,i,l,{notif_type:r},{onClick(){null!=a&&((0,m.Z)(a),g.default.clickedNotification())},tag:o,isUserAvatar:!1}).then(t=>{null!=t&&null!=e&&tZ.track(e,t.notification,t.trackingProps)})},REACTION_NOTIFICATION_SENT:function(t){let{icon:e,title:n,body:i,route:l,trackingType:a,message:r}=t;if(tP()||null==n||null==i||null==a)return!1;let{enableInAppNotifications:o}=L.Z.getCurrentConfig({location:"desktopNotification"},{autoTrackExposure:!0});if(!o)return!1;let u=r.channel_id;if(null==u||J.Z.getCurrentlySelectedChannelId()===u&&tN)return!1;to.Z.showNotification(e,n,i,{notif_type:a},{onClick(){null!=l&&((0,m.Z)(l),g.default.clickedNotification())},isUserAvatar:!0}).then(t=>{null!=t&&null!=u&&tZ.track(u,t.notification,t.trackingProps)})},WINDOW_HIDDEN:function(){let t=(0,tl.isWindows)(),e=(0,tl.isLinux)();if(!(!u.K.get(tp,!1)&&tl.isPlatformEmbedded&&(t||e)))return!1;let i=!1;return null!=tT&&(i=tC.includes(tT)),!!i&&(to.Z.showNotification(n(95045),td.intl.string(td.t.VSgOVl),td.intl.string(td.t["+J/F6+"]),{notif_type:"WINDOW_HIDDEN"},{overrideStreamerMode:!0,onClick:()=>{(0,w.uL)(tu.Z5c.SETTINGS(t?"windows":"linux"))},onShown:()=>{u.K.set(tp,!0)},isUserAvatar:!1}),!1)},LOGOUT:function(){return u.K.remove(tp),!1},CONNECTION_OPEN:function(t){let{countryCode:e,guilds:n,presences:i}=t;tT=e,tS.clear(),n.forEach(t=>t.stage_instances.forEach(t=>tS.add(t.id))),(0,Z.uw)("NotificationStore")&&(0,A.MH)()!==o.Tv.ACTIVITY_NOTIFICATIONS_DISABLED&&tv(i,!1)},MESSAGE_REMINDER_DUE:function(t){let{savedMessage:e}=t;if(tP())return!1;let n=e.message;if(null==n||null==n.author)return!1;let i=x.Z.getChannel(e.saveData.channelId);if(null==i)return!1;let{icon:l,body:a}=(0,D.Xi)(i,n,n.author);to.Z.showNotification(l,td.intl.string(td.t.IjZJBw),a,{notif_type:"MESSAGE_REMINDER_DUE"},{onClick(){(0,m.Z)(tu.Z5c.CHANNEL(null==i?void 0:i.getGuildId(),i.id,n.id))},isUserAvatar:!0})},PRESENCE_UPDATES:function(t){let{updates:e}=t;(0,Z.uw)("handlePresenceUpdates")&&(0,A.MH)()!==o.Tv.ACTIVITY_NOTIFICATIONS_DISABLED&&tv(e)}})}}]);
//# sourceMappingURL=41bdfb05d08c8344.js.map