"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["46653"],{980568:function(e,t,i){i.d(t,{Z:()=>o});var n=i(570140),r=i(626135),s=i(981631);let o={dismissForApplicationId(e){n.Z.dispatch({type:"ACTIVITY_INVITE_EDUCATION_DISMISS",key:e,value:!0}),r.default.track(s.rMx.CLOSE_TUTORIAL,{tutorial:"activity-invite-nux-inline",application_id:e,acknowledged:!0})}}},738619:function(e,t,i){i.d(t,{ZP:()=>R,d7:()=>U,iD:()=>D}),i(539854),i(388685);var n=i(951288),r=i(647438),s=i(120356),o=i.n(s),l=i(392711),a=i.n(l),d=i(442837),c=i(692547),u=i(481060),h=i(980568),p=i(560768),g=i(812206),m=i(405701),f=i(843693),v=i(246642),O=i(624030),b=i(314897),y=i(699516),S=i(885110),E=i(111583),T=i(594174),w=i(451478),C=i(626135),I=i(823379),Z=i(5192),P=i(981631),j=i(388032),x=i(458182);function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function A(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){_(e,t,i[t])})}return e}let N=[];class M extends r.PureComponent{componentDidMount(){this.timeout=setTimeout(()=>{this.setState({fadeIn:!0}),this.timeout=null,this.logShownEventIfNeeded()},100)}componentDidUpdate(){this.logShownEventIfNeeded()}logShownEventIfNeeded(){let e=this.props.activity.application_id;null!=e&&-1===N.indexOf(e)&&(C.default.track(P.rMx.SHOW_TUTORIAL,{tutorial:"activity-invite-nux-inline",application_id:e}),N.push(e))}componentWillUnmount(){null!==this.timeout&&clearTimeout(this.timeout)}render(){let{activity:e}=this.props;return(0,n.jsxs)("div",{className:o()(x.activityInviteEducation,{[x.activityInviteEducationFadeIn]:this.state.fadeIn}),children:[(0,n.jsx)("div",{className:x.activityInviteEducationArrow}),(0,n.jsx)("span",{children:j.intl.format(j.t["i/MoCg"],{game:e.name,dismissOnClick:this.handleDismissInviteEducation})})]})}constructor(...e){super(...e),_(this,"state",{fadeIn:!1}),_(this,"timeout",null),_(this,"handleDismissInviteEducation",()=>{let{activity:e}=this.props;null!=e&&null!=e.application_id&&h.Z.dismissForApplicationId(e.application_id)})}}function F(e){let{activityInviteEducationActivity:t,isFocused:i,typingUsers:s,className:l,channel:a,isThreadCreation:d,renderDots:c,poggermodeEnabled:h,isComboing:p,isInTextChannel:g}=e,{rateLimitPerUser:f}=a,O=r.useRef(null),b=r.useRef(null),[y,S]=r.useState(!1);if(r.useLayoutEffect(()=>{if(null!=O.current&&null!=b.current&&g){let e=()=>{if(null!=O.current&&null!=b.current){let e=O.current.getBoundingClientRect();b.current.scrollWidth+48>e.width?S(!0):S(!1)}};e();let t=new ResizeObserver(()=>{e()});return t.observe(O.current),t.observe(b.current),()=>{t.disconnect()}}},[g]),0===s.length&&!(f>0)&&!p)return null!=t?(0,n.jsx)(M,{activity:t,isFocused:i}):null;let[E,T,w]=s,C="";1===s.length?C=j.intl.format(j.t.lJ9sZW,{a:E}):2===s.length?C=j.intl.format(j.t.rB0CUV,{a:E,b:T}):3===s.length?C=j.intl.format(j.t.StKTho,{a:E,b:T,c:w}):s.length>3&&(C=j.intl.format(j.t.Q8lUnJ,{}));let I=y&&s.length>0&&s.length<=3?j.intl.format(j.t["qD/0qa"],{}):C;return(0,n.jsxs)("div",{className:o()(x.typing,{"stop-animation":!i,[x.isComboing]:h&&p,[x.inTextChannel]:g},l),children:[(0,n.jsxs)("div",{className:x.typingDots,ref:O,children:[s.length>0&&!1!==c&&(0,n.jsx)(u.bbz,{className:x.ellipsis,dotRadius:3.5,themed:!0}),(0,n.jsx)("span",{className:x.text,"aria-live":"polite","aria-atomic":!0,children:I}),(0,n.jsx)("span",{className:x.text,style:{position:"absolute",visibility:"hidden"},"aria-hidden":!0,ref:b,children:C})]}),(0,n.jsx)(m.Z,{channel:a,isThreadCreation:d}),h&&p&&(0,n.jsx)(v.Z,{channelId:a.id})]})}function D(e){let t=(0,d.e7)([E.Z],()=>E.Z.getTypingUsers(e.id)),i=(0,d.e7)([T.default],()=>T.default.getCurrentUser());return a()(t).keys().filter(e=>e!==(null==i?void 0:i.id)).reject(e=>y.Z.isBlockedOrIgnored(e)).map(e=>T.default.getUser(e)).filter(I.lm).map(t=>Z.ZP.getName(e.guild_id,e.id,t)).value()}function U(e){let t=(0,d.e7)([S.Z],()=>S.Z.findActivity(e=>null!=e.application_id));return(0,d.e7)([O.Z,g.Z,y.Z],()=>(0,p.Z)(e,t,O.Z,g.Z,y.Z))?t:null}function R(e){var t,i,{channel:r,isThreadCreation:s=!1}=e,o=function(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}(e,["channel","isThreadCreation"]);let l=(0,d.e7)([f.ZP,b.default],()=>f.ZP.getUserCombo(b.default.getId(),r.id)),a=D(r),h=(t=A({},o),i=i={baseTextColor:(0,u.dQu)(c.Z.colors.INTERACTIVE_NORMAL).hex(),activeTextColor:(0,u.dQu)(c.Z.colors.INTERACTIVE_NORMAL).hex(),activityInviteEducationActivity:U(r),typingUsers:s?[]:a,isFocused:(0,d.e7)([w.Z],()=>w.Z.isFocused()),guildId:r.guild_id,isComboing:null!=l,channel:r,isThreadCreation:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):(function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i.push.apply(i,n)}return i})(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}),t);return(0,n.jsx)(F,A({},h))}},560768:function(e,t,i){i.d(t,{Z:()=>o}),i(997841);var n=i(630388),r=i(620662),s=i(981631);function o(e,t,i,o,l){let a=null==t?void 0:t.application_id;if(null==e||null==t||!(0,r.Z)(t,s.xjy.JOIN)||null==a)return!1;let d=o.getApplication(a);return!(null==d||(0,n.yE)(d.flags,s.udG.EMBEDDED)||e.isPrivate()&&l.isBlockedOrIgnored(e.getRecipientId()))&&i.shouldShowEducation(a)}},11769:function(e,t,i){i.d(t,{k:()=>s});var n=i(70956),r=i(388032);function s(e){if(e>=n.Z.Seconds.HOUR){let t=Math.floor(e/n.Z.Seconds.HOUR),i=Math.floor((e-t*n.Z.Seconds.HOUR)/n.Z.Seconds.MINUTE),s=e-t*n.Z.Seconds.HOUR-i*n.Z.Seconds.MINUTE;return r.intl.formatToPlainString(r.t["3hz51N"],{hours:t,minutes:i,seconds:s})}if(!(e>=60))return r.intl.formatToPlainString(r.t.IWntYm,{seconds:e});{let t=Math.floor(e/60);return r.intl.formatToPlainString(r.t.sY3wlJ,{minutes:t,seconds:e-60*t})}}},405701:function(e,t,i){i.d(t,{Z:()=>b}),i(388685);var n=i(951288),r=i(647438),s=i(913527),o=i.n(s),l=i(442837),a=i(481060),d=i(11769),c=i(338390),u=i(496675),h=i(300429),p=i(585483),g=i(70956),m=i(981631),f=i(388032),v=i(799567);function O(e){let t,{isEnabled:i,rateLimitPerUser:s,isBypassSlowmode:l,slowmodeCooldownGuess:u}=e,[h,O]=r.useState(!1);r.useEffect(()=>{function e(){O(!0),setTimeout(()=>{O(!1)},1e3)}return p.S.subscribe(m.CkL.EMPHASIZE_SLOWMODE_COOLDOWN,e),()=>{p.S.unsubscribe(m.CkL.EMPHASIZE_SLOWMODE_COOLDOWN,e)}},[]);let b=(0,c.Z)("SlowmodeIndicator");if(!i)return null;let y=(0,d.k)(s);if(!l&&u>0){let e=o().duration(u);if(u>g.Z.Millis.HOUR){let i="".concat(e.minutes()).padStart(2,"0"),n="".concat(e.seconds()).padStart(2,"0");t="".concat(e.hours(),":").concat(i,":").concat(n)}else{let i="".concat(e.seconds()).padStart(2,"0");t="".concat(e.minutes(),":").concat(i)}}else t=l?b?f.intl.string(f.t["8+NidX"]):f.intl.string(f.t.SSzXvb):f.intl.string(f.t.Icu3bW);let S=b?(0,n.jsxs)(a.Text,{className:v.cooldownText,variant:"text-xs/medium",color:h?"text-danger":"text-muted",tabularNumbers:!0,children:[(0,n.jsx)(a.ANZ,{size:"xxs",color:"currentColor",className:v.slowModeIcon}),t]}):(0,n.jsxs)(a.Text,{className:v.cooldownText,variant:"text-sm/medium",color:h?"text-danger":"text-muted",tabularNumbers:!0,children:[t,(0,n.jsx)(a.ANZ,{size:"xs",color:"currentColor",className:v.slowModeIcon})]});return(0,n.jsx)(a.ua7,{text:y,children:e=>{var t,i;return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){var n;n=i[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:v.cooldownWrapper},e),i=i={children:S},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):(function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i.push.apply(i,n)}return i})(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}),t))}})}function b(e){let{channel:t,isThreadCreation:i=!1}=e,r=(0,l.e7)([h.Z],()=>h.Z.getSlowmodeCooldownGuess(t.id,i?h.S.CreateThread:h.S.SendMessage)),s=(0,l.e7)([u.Z],()=>i?u.Z.can(m.Plq.MANAGE_THREADS,t):u.Z.can(m.Plq.MANAGE_CHANNELS,t)||u.Z.can(m.Plq.MANAGE_MESSAGES,t)),{rateLimitPerUser:o}=t;return(0,n.jsx)(O,{isEnabled:o>0,rateLimitPerUser:o,isBypassSlowmode:s,slowmodeCooldownGuess:r})}},109434:function(e,t,i){i.d(t,{H:()=>b,v:()=>y}),i(388685);var n=i(512722),r=i.n(n),s=i(879690),o=i(313361),l=i(697988),a=i(683860),d=i(731965),c=i(442837),u=i(592125),h=i(559241);function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){p(e,t,i[t])})}return e}let m=new Set,f={layoutType:o.X.LIST,sortOrder:a.z.CREATION_DATE,tagFilter:m,scrollPosition:0,tagSetting:l.z.MATCH_SOME};class v{constructor(e,t){p(this,"set",void 0),p(this,"get",void 0),p(this,"channelStates",void 0),p(this,"setChannelState",void 0),p(this,"getChannelState",void 0),p(this,"toggleTagFilter",void 0),p(this,"setTagFilter",void 0),p(this,"setSortOrder",void 0),p(this,"setLayoutType",void 0),p(this,"setTagSetting",void 0),p(this,"setScrollPosition",void 0),this.set=e,this.get=t,this.channelStates={},this.setChannelState=(e,t)=>{let i=this.get(),n=this.getChannelState(e),r=g({},i.channelStates);r[e]=g({},n,t),(0,d.j)(()=>this.set({channelStates:r}))},this.getChannelState=e=>{if(null==e)return f;let{channelStates:t}=this.get(),i=t[e];if(null==i){let t=u.Z.getChannel(e);r()(null!=t,"[Forum Channel Store] The channel should not be missing."),i={layoutType:t.getDefaultLayout(),sortOrder:t.getDefaultSortOrder(),tagFilter:m,scrollPosition:0,tagSetting:t.getDefaultTagSetting()}}return i},this.toggleTagFilter=(e,t)=>{let i=new Set(this.getChannelState(e).tagFilter);i.has(t)?i.delete(t):i.add(t),this.setTagFilter(e,i)},this.setTagFilter=(e,t)=>{this.setChannelState(e,{tagFilter:t}),h.Z.setFilterTagIds(t)},this.setSortOrder=(e,t)=>{this.setChannelState(e,{sortOrder:t}),h.Z.setSortOrder(t)},this.setLayoutType=(e,t)=>{this.setChannelState(e,{layoutType:t}),h.Z.setLayout(t)},this.setTagSetting=(e,t)=>{this.setChannelState(e,{tagSetting:t}),h.Z.setTagSetting(t)},this.setScrollPosition=(e,t)=>{this.setChannelState(e,{scrollPosition:t})}}}let O=(0,s.U)((e,t)=>new v(e,t)),b=e=>{let t=O();return null==(0,c.e7)([u.Z],()=>u.Z.getChannel(e))?f:t.getChannelState(e)},y=()=>O},470623:function(e,t,i){i.d(t,{AF:()=>y,oL:()=>O,xH:()=>b}),i(388685),i(781311);var n=i(951288),r=i(647438),s=i(512722),o=i.n(s),l=i(131193),a=i(731965),d=i(430742),c=i(752305),u=i(592125),h=i(703558),p=i(883429),g=i(228392);function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class f{constructor(e,t,i){var n,r,s;m(this,"channelId",void 0),m(this,"_set",void 0),m(this,"get",void 0),m(this,"editorHeight",void 0),m(this,"editorAdditionRowHeight",void 0),m(this,"listViewCardHeights",void 0),m(this,"cardHeightVersion",void 0),m(this,"nameError",void 0),m(this,"messageError",void 0),m(this,"appliedTags",void 0),m(this,"popoutOpen",void 0),m(this,"guidelinesOpen",void 0),m(this,"previewing",void 0),m(this,"onboardingExpanded",void 0),m(this,"submitting",void 0),m(this,"formOpen",void 0),m(this,"name",void 0),m(this,"textAreaState",void 0),m(this,"hasClickedForm",void 0),m(this,"titleFocused",void 0),m(this,"bodyFocused",void 0),m(this,"set",void 0),m(this,"setEditorHeight",void 0),m(this,"setEditorAdditionRowHeight",void 0),m(this,"setCardHeight",void 0),m(this,"setNameError",void 0),m(this,"setMessageError",void 0),m(this,"toggleAppliedTag",void 0),m(this,"setPopoutOpen",void 0),m(this,"setGuidelinesOpen",void 0),m(this,"setPreviewing",void 0),m(this,"setSubmitting",void 0),m(this,"setFormOpen",void 0),m(this,"setOnboardingExpanded",void 0),m(this,"setTitleFocused",void 0),m(this,"setBodyFocused",void 0),m(this,"setName",void 0),m(this,"setTextAreaState",void 0),m(this,"setHasClickedForm",void 0),m(this,"resetFormState",void 0),m(this,"setFormOpenFromUserAction",void 0),this.channelId=e,this._set=t,this.get=i,this.editorHeight=64,this.editorAdditionRowHeight=0,this.listViewCardHeights={},this.cardHeightVersion=0,this.nameError=null,this.messageError=null,this.appliedTags=new Set,this.popoutOpen=!1,this.guidelinesOpen=!1,this.previewing=!1,this.onboardingExpanded=!1,this.submitting=!1,this.formOpen=!1,this.name="",this.textAreaState=(0,c.eK)(""),this.hasClickedForm=!1,this.titleFocused=!1,this.bodyFocused=!1,this.set=e=>{(0,a.j)(()=>this._set(e))},this.setEditorHeight=e=>{this.set({editorHeight:e})},this.setEditorAdditionRowHeight=e=>{this.set({editorAdditionRowHeight:e})},this.setCardHeight=(e,t)=>{let{listViewCardHeights:i,cardHeightVersion:n}=this.get();i[e]!==t&&(i[e]=t,this.set({cardHeightVersion:n+1}))},this.setNameError=e=>{this.set({nameError:e})},this.setMessageError=e=>{this.set({messageError:e})},this.toggleAppliedTag=e=>{let{appliedTags:t}=this.get();(t=new Set(t)).has(e)?t.delete(e):t.add(e),this.set({appliedTags:t}),d.Z.changeThreadSettings(this.channelId,{appliedTags:t})},this.setPopoutOpen=e=>{this.set({popoutOpen:e})},this.setGuidelinesOpen=e=>{this.set({guidelinesOpen:e})},this.setPreviewing=e=>{this.set({previewing:e})},this.setSubmitting=e=>{this.set({submitting:e})},this.setFormOpen=e=>{this.set({formOpen:e}),p.Z.clearForumSearch(this.channelId)},this.setOnboardingExpanded=e=>{this.set({onboardingExpanded:e})},this.setTitleFocused=e=>{this.set({titleFocused:e})},this.setBodyFocused=e=>{this.set({bodyFocused:e})},this.setName=e=>{this.set({name:e}),d.Z.changeThreadSettings(this.channelId,{name:e})},this.setTextAreaState=e=>{this.set({textAreaState:e}),d.Z.saveDraft(this.channelId,e.textValue,h.d.FirstThreadMessage)},this.setHasClickedForm=e=>{this.set({hasClickedForm:e})},this.resetFormState=()=>{let e=u.Z.getChannel(this.channelId),t=null==e||null==e.template?"":e.template.trim();this.set({name:"",textAreaState:(0,c.eK)(t),appliedTags:new Set,hasClickedForm:!1}),p.Z.clearForumSearch(this.channelId)},this.setFormOpenFromUserAction=()=>{if(this.hasClickedForm)return;let e=u.Z.getChannel(this.channelId);null!=e&&(0,g.HR)({guildId:e.guild_id,channelId:this.channelId}),this.set({hasClickedForm:!0,formOpen:!0}),p.Z.clearForumSearch(this.channelId)};let o=u.Z.getChannel(e);if(null==o)return;let l=null!=(n=h.Z.getThreadSettings(o.id))?n:{},f=null==o.template?"":o.template.trim(),v=h.Z.getDraft(o.id,h.d.FirstThreadMessage),O=(0,c.eK)(null!=v&&""!==v.trim()?v:f);this.name=null!=(r=l.name)?r:"",s=new Set(l.appliedTags),this.appliedTags=void 0!==s?s:new Set,this.formOpen=this.name.length>0&&O.textValue.length>0,this.textAreaState=O}}let v=r.createContext(null);function O(e){let{children:t,channel:i}=e,s=r.useMemo(()=>(0,l.F)((e,t)=>new f(i.id,e,t)),[i]);return(0,n.jsx)(v.Provider,{value:s,children:t})}function b(e,t){let i=r.useContext(v);return o()(null!=i,"[useForumPostComposerStore] Context should not be null"),i(e,t)}function y(){let e=r.useContext(v);return o()(null!=e,"[useForumPostComposerStore] Context should not be null"),e}},443877:function(e,t,i){i.d(t,{Z:()=>p}),i(388685);var n=i(442837),r=i(715903),s=i(71619),o=i(41776),l=i(665906),a=i(271383),d=i(607744),c=i(496675),u=i(432376),h=i(981631);function p(e){var t,i;let p=null==e?void 0:e.guild_id,g=(0,n.e7)([d.Z],()=>null==p||d.Z.canChatInGuild(p),[p]),m=(0,n.e7)([o.Z],()=>null!=p&&o.Z.isLurking(p),[p]),f=(0,n.e7)([a.ZP],()=>null!=p&&a.ZP.isCurrentUserGuest(p),[p]),v=(0,n.e7)([c.Z],()=>g&&c.Z.can(h.Plq.ADD_REACTIONS,e),[g,e]),O=(0,r.ux)(p),[,b]=(0,s.AB)(p),y=(0,l.$R)(e);return null==e?{disableReactionReads:!0,disableReactionCreates:!0,disableReactionUpdates:!0,isLurking:!1,isGuest:!1,isPendingMember:!1}:(t=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){var n;n=i[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,u.Z)({channel:e,canChat:g,renderReactions:!0,canAddNewReactions:v,isLurking:m,isGuest:f,communicationDisabled:b,isActiveChannelOrUnarchivableThread:y,isAutomodQuarantined:O})),i=i={isLurking:m,isGuest:f,isPendingMember:!1},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):(function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i.push.apply(i,n)}return i})(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}),t)}},989830:function(e,t,i){i.d(t,{Z:()=>a});var n=i(442837),r=i(314897),s=i(351780),o=i(843693);function l(e,t){return e===t||(null==e?void 0:e.channelId)===(null==t?void 0:t.channelId)&&(null==e?void 0:e.value)===(null==t?void 0:t.value)&&(null==e?void 0:e.multiplier)===(null==t?void 0:t.multiplier)}function a(e){let t=(0,n.e7)([s.Z],()=>!!s.Z.isEnabled()&&s.Z.combosEnabled);return(0,n.e7)([o.ZP,r.default],()=>t?o.ZP.getUserCombo(r.default.getId(),e):void 0,[e,t],l)}},246642:function(e,t,i){i.d(t,{Z:()=>c});var n=i(951288);i(647438);var r=i(481060),s=i(44315),o=i(641033),l=i(989830),a=i(388032),d=i(617296);function c(e){let{channelId:t}=e,i=(0,l.Z)(t);if(!(null!=i&&(i.value>0||(null==i?void 0:i.multiplier)>1)))return null;let{multiplier:c}=i,{color:u}=(0,o.yz)(c);return(0,n.jsxs)("div",{className:d.container,children:[(0,n.jsx)(r.Text,{variant:"text-xs/normal",children:a.intl.string(a.t.Jr2519)}),(0,n.jsx)(r.Exd,{foregroundColor:(0,s.Lq)(u),className:d.progress,size:r.Exd.Sizes.LARGE,percent:100*(0,o.nc)(i),animate:!0})]})}},624030:function(e,t,i){i.d(t,{Z:()=>d});var n,r=i(442837),s=i(570140);function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let l={};class a extends(n=r.ZP.PersistedStore){initialize(e){Object.assign(l,e)}getState(){return l}shouldShowEducation(e){return!0!==l[e]}}o(a,"displayName","ActivityInviteEducationStore"),o(a,"persistKey","ActivityInviteEducationExperimentStore");let d=new a(s.Z,{ACTIVITY_INVITE_EDUCATION_DISMISS:function(e){return l[e.key]=e.value,!0}})},127654:function(e,t,i){i.d(t,{G:()=>I,d5:()=>P}),i(388685),i(415506);var n=i(481060),r=i(475179),s=i(904245),o=i(166459),l=i(531643),a=i(141795),d=i(476326),c=i(125186),u=i(367907),h=i(358221),p=i(893601),g=i(58873),m=i(117530),f=i(594174),v=i(626135),O=i(403182),b=i(74538),y=i(979956),S=i(981631),E=i(959517),T=i(474936),w=i(388032);function C(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){var n;n=i[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function I(e,t,i){let n=f.default.getCurrentUser(),r=e.getGuildId(),s=O.dg(r),o=Array.from(t).map(e=>e.size),a=Array.from(t).map(e=>null!=e.type?e.type:"unknown"),d=o.reduce((e,t)=>e+t,0),c=o.length>0?Math.max(...o):0,h=o.length;if(c>s){let t=null==i?void 0:i.reduce((e,t)=>e+t,0);(0,u.yw)(S.rMx.FILE_SIZE_LIMIT_EXCEEDED,{channel_id:e.id,guild_id:r,user_individual_file_size_limit:s,pre_compression_file_sizes:o,pre_compression_aggregate_file_size:d,num_attachments:h,error_type:E.xi.UPLOAD_ATTACHMENT_MAX_SIZE_ERROR,attachment_mimetypes:a,post_compression_file_sizes:i,post_compression_aggregate_file_size:t}),(0,l.openUploadError)({title:w.intl.string(w.t["/tGlcn"]),help:(0,y.BK)(n,r),showPremiumUpsell:!(0,b.M5)(n,T.p9.TIER_2),fileSize:c});return}(0,l.openUploadError)({title:w.intl.string(w.t["/tGlcn"]),help:w.intl.formatToPlainString(w.t.tUOJdH,{maxSize:O.Ng(O.OC())})})}async function Z(e,t,i){let{currentGuildId:r}=i,s=(0,p.U)({location:"UploadPrompt.maybeCompressOversizedFiles"}),o=e=>({file:e,compressionMetadata:{originalContentType:e.type,compressTimeMs:0,preCompressionSize:e.size,earlyClipboardCompressionAttempted:!1}});if("clipboard"!==t||!s.compressOversizedClipboard||!(0,y.Bf)(e,r))return e.map(o);let l=O.dg(r),a=e=>.5*e.size<=l;return e.some(e=>e.size>l&&!a(e))||0===e.filter(e=>e.size>l&&a(e)).length?e.map(o):((0,n.showToast)((0,n.createToast)(w.intl.string(w.t.jfKTen),n.ToastType.MESSAGE)),await Promise.all(e.map(async e=>{let t=await (0,c.lG)(e);return{file:t.success?(0,c.ub)(t):e,compressionMetadata:{originalContentType:e.type,compressTimeMs:t.compressTimeMs,preCompressionSize:e.size,earlyClipboardCompressionAttempted:!0,convertedMimeType:t.success?"image/webp":void 0,conversionFailureReason:t.success?void 0:t.reason,hashTimeMs:t.hashTimeMs}}})))}async function P(e,t,i){let{filesMetadata:n,requireConfirm:c=!0,showLargeMessageDialog:u=!1,isThumbnail:p=!1,origin:f}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e.length<1)return;if(null!=n&&n.length!==e.length)throw Error("Unexpected mismatch between files and file metadata");let O=t.getGuildId(),b=Array.from(e),T=await Z(b,f,{channel:t,currentGuildId:O}),P=T.map(e=>e.file),j=T.map(e=>e.compressionMetadata);if((0,y.Bf)(P,O))return void I(t,b,P.map(e=>e.size));if(m.Z.getUploadCount(t.id,i)+P.length>S.dN1){(0,l.openUploadError)({title:w.intl.string(w.t.wOr6hI),help:w.intl.formatToPlainString(w.t["qqyp/f"],{limit:S.dN1})}),v.default.track(S.rMx.UPLOAD_FILE_LIMIT_ERROR,{existing_count:m.Z.getUploadCount(t.id,i),new_count:P.length});return}if(t.type!==S.d4z.GUILD_VOICE&&t.type!==S.d4z.GUILD_STAGE_VOICE||h.Z.getChatOpen(t.id)||r.Z.updateChatOpen(t.id,!0),c){let e=P.map((e,t)=>{let i=j[t];return C({file:e,platform:d.ow.WEB,isThumbnail:p,origin:f,compressionMetadata:i},null==n?void 0:n[t])});o.Z.addFiles({files:e,channelId:t.id,showLargeMessageDialog:u,draftType:i})}else{let e=P.map((e,i)=>{let r=null!=n?n[i]:{},s=j[i];return new a.nH(C({file:e,platform:d.ow.WEB,isThumbnail:p,origin:f,compressionMetadata:s},r),t.id)});s.Z.sendMessage(t.id,{content:"",tts:!1,invalidEmojis:[],validNonShortcutEmojis:[]},void 0,{eagerDispatch:!1,attachmentsToUpload:e,location:E.dy.INSTANT_UPLOAD,onAttachmentUploadError:(e,i,n)=>{(0,g.A)({file:e,guildId:t.getGuildId(),analyticsLocations:[],code:i,reason:n})}})}}},979956:function(e,t,i){i.d(t,{BK:()=>a,Bf:()=>d,KZ:()=>c}),i(539854);var n=i(476326),r=i(403182),s=i(74538),o=i(474936),l=i(388032);function a(e,t){let i=r.Ng(r.dg(t));return s.ZP.isPremium(e,o.p9.TIER_2)?l.intl.formatToPlainString(l.t.fxEKdX,{maxSize:i}):s.ZP.isPremium(e,o.p9.TIER_1)?l.intl.formatToPlainString(l.t["Nr+Lsb"],{maxSize:i}):l.intl.formatToPlainString(l.t.fxEKdX,{maxSize:i})}function d(e,t){return r.nA(e,t)||r.vY(e)}function c(e){return e.reduce((e,t)=>(t.item.platform===n.ow.WEB&&e.push(t.item.file),e),[])}}}]);
//# sourceMappingURL=88ab7ead8d77a51b.js.map