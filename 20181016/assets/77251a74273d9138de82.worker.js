!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/assets/",n(n.s=3)}([function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(7),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e,n){var r=n(1).Symbol;t.exports=r},function(t,e,n){"use strict";var r=c(n(4)),o=c(n(5)),i=n(15),u=c(n(16));function c(t){return t&&t.__esModule?t:{default:t}}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var f={UPDATE_USERS:"UPDATE_USERS",USER_RESULTS:"USER_RESULTS",QUERY_SET:"QUERY_SET",QUERY_CLEAR:"QUERY_CLEAR"},s=new Map,l=new Map,d=new Set,p=10,v=5,y=1,b="isFriend",h="isBot",E="username";function g(t){var e=!1,n=new Set;t.forEach(function(t){var r=t.id,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,["id"]),i=a({},s.get(r)||{},o);s.set(r,i),l.size>0&&(i.isFriend&&(e=!0),Object.keys(i).forEach(function(t){t!==h&&t!==b&&t!==E&&n.add(t)}))}),l.forEach(function(t,r){var o=t.filters;(null==o||o.friends===e||n.has(o.guild))&&d.add(r)}),d.size>0&&S()}var S=(0,o.default)(function(){d.forEach(function(t){var e=l.get(t);e&&x(t,e)}),d.clear()},100,{leading:!0,trailing:!0});function m(t,e){return t*(e||1)}function x(t,e){var n=e.query,o=e.limit,c=e.filters,a=e.blacklist,f=e.whitelist,l=e.boosters,d=new RegExp("^"+u.default.escape(n),"i"),E=new RegExp(u.default.escape(n),"i"),g=[];if(""===n)return j(n,g,t);var S=n.toLocaleLowerCase();s.forEach(function(t,e){if(function(t,e,n,r,o){if(null!=r&&r.indexOf(t)>=0)return!1;if(null!=o&&o.indexOf(t)>=0)return!0;if(null!=n){var i=n.friends,u=n.guild;return!0===i&&!0===e.isFriend||null!=e[u]||null===e[u]}return!0}(e,t,c,a,f)){var n,o=t.username;Object.keys(t).forEach(function(i){var u,c=t[i];i!==h&&i!==b&&c&&(d.test(c)?u={comparator:c,score:m(p,l[e])}:E.test(c)?u={comparator:c,score:m(v,l[e])}:(0,r.default)(S,c.toLocaleLowerCase())&&(u={comparator:c,score:m(y,l[e])}),u&&((null==n||n.score<u.score)&&(n=u),n.id=e,n.username=o))}),null!=n&&g.push(n)}}),g.sort(i.sortByMatchScore),g.length>o&&(g.length=o),j(n,g,t)}function j(t,e,n){postMessage({uuid:n,type:f.USER_RESULTS,payload:{query:t,results:e}})}addEventListener("message",function(t){var e=t.data;if(!e)throw new Error("Invalid data");var n=e.uuid,r=e.type,o=e.payload;switch(r){case f.UPDATE_USERS:return g(o);case f.QUERY_SET:return function(t,e){l.set(t,e),x(t,e)}(n,o);case f.QUERY_CLEAR:return function(t){l.delete(t),d.delete(t),0===d.size&&S.cancel()}(n)}})},function(t,e,n){"use strict";t.exports=function(t,e){var n=e.length,r=t.length;if(r>n)return!1;if(r===n)return t===e;t:for(var o=0,i=0;o<r;o++){for(var u=t.charCodeAt(o);i<n;)if(e.charCodeAt(i++)===u)continue t;return!1}return!0}},function(t,e,n){var r=n(0),o=n(6),i=n(9),u="Expected a function",c=Math.max,a=Math.min;t.exports=function(t,e,n){var f,s,l,d,p,v,y=0,b=!1,h=!1,E=!0;if("function"!=typeof t)throw new TypeError(u);function g(e){var n=f,r=s;return f=s=void 0,y=e,d=t.apply(r,n)}function S(t){var n=t-v;return void 0===v||n>=e||n<0||h&&t-y>=l}function m(){var t=o();if(S(t))return x(t);p=setTimeout(m,function(t){var n=e-(t-v);return h?a(n,l-(t-y)):n}(t))}function x(t){return p=void 0,E&&f?g(t):(f=s=void 0,d)}function j(){var t=o(),n=S(t);if(f=arguments,s=this,v=t,n){if(void 0===p)return function(t){return y=t,p=setTimeout(m,e),b?g(t):d}(v);if(h)return p=setTimeout(m,e),g(v)}return void 0===p&&(p=setTimeout(m,e)),d}return e=i(e)||0,r(n)&&(b=!!n.leading,l=(h="maxWait"in n)?c(i(n.maxWait)||0,e):l,E="trailing"in n?!!n.trailing:E),j.cancel=function(){void 0!==p&&clearTimeout(p),y=0,f=v=s=p=void 0},j.flush=function(){return void 0===p?d:x(o())},j}},function(t,e,n){var r=n(1);t.exports=function(){return r.Date.now()}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(8))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(0),o=n(10),i=NaN,u=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,f=/^0o[0-7]+$/i,s=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return i;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(u,"");var n=a.test(t);return n||f.test(t)?s(t.slice(2),n?2:8):c.test(t)?i:+t}},function(t,e,n){var r=n(11),o=n(14),i="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||o(t)&&r(t)==i}},function(t,e,n){var r=n(2),o=n(12),i=n(13),u="[object Null]",c="[object Undefined]",a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?c:u:a&&a in Object(t)?o(t):i(t)}},function(t,e,n){var r=n(2),o=Object.prototype,i=o.hasOwnProperty,u=o.toString,c=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=u.call(t);return r&&(e?t[c]=n:delete t[c]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";e.__esModule=!0,e.sortByMatchScore=function(t,e){if(t.score===e.score){var n=t.comparator.toLocaleLowerCase(),r=e.comparator.toLocaleLowerCase();if(n<r)return-1;if(n>r)return 1}return e.score-t.score}},function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;e.default={escape:function(t){return t.replace(/[-[\]\/{}()*+?.\\^$|]/g,"\\$&")}}}]);
//# sourceMappingURL=77251a74273d9138de82.worker.js.map