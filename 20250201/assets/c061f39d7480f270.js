"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["29452"],{177475:function(t){t.exports="/assets/f66ae7bb8510ab4f.svg"},740353:function(t){t.exports="/assets/4ed48b8404cc8dd4.svg"},362721:function(t,e,n){n.d(e,{ZP:()=>u});var i=n(442837),l=n(496675),r=n(700785),a=n(231338);let d=[a.Pl.SET_VOICE_CHANNEL_STATUS,a.Pl.CONNECT,a.Pl.VIEW_CHANNEL],s=[a.Pl.SET_VOICE_CHANNEL_STATUS];function u(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return(0,i.e7)([l.Z],()=>{var i;return i=l.Z,(e?s:d).every(e=>null==n?i.can(e,t):r.BT({permission:e,user:n,context:t}))},[t,e,n])}},339340:function(t,e,n){n.d(e,{a:()=>f,default:()=>G}),n(47120),n(757143);var i=n(200651),l=n(192379),r=n(120356),a=n.n(r),d=n(399606),s=n(343817),u=n(481060),_=n(787014),o=n(904245),E=n(12498),c=n(541716),g=n(752305),I=n(893718),T=n(600164),p=n(540059),m=n(957730),C=n(19780),L=n(594174),S=n(626135),U=n(981631),N=n(388032),D=n(752670);let f="VoiceChannelStatusModal";function G(t){let{channel:e,transitionState:n,onClose:r}=t,G=(0,d.e7)([E.Z],()=>E.Z.getChannelStatus(e)),A=(0,d.e7)([C.Z],()=>C.Z.getMediaSessionId()),[y,O]=l.useState(null!=G?G:""),[v,Z]=l.useState(!1),[h,P]=l.useState(null),z=(0,d.e7)([L.default],()=>L.default.getCurrentUser()),H=y.length>500,M=(0,p.Q3)("VoiceChannelStatusModal");l.useEffect(()=>{S.default.track(U.rMx.OPEN_MODAL,{type:"Voice Channel Topic Modal",guild_id:e.guild_id})},[e.guild_id]);let B=t=>{P(new s.Hx(t,t.status).getAnyErrorMessage())},V=t=>{let{invalidEmojis:n}=t;if(null!=n&&n.length>0){let{errorMessage:t}=o.Z.validateMessage(n,z,e.id);return P(t),Z(!1),{hasErrors:!0}}return{hasErrors:!1}},R=async t=>{y===G&&r(),null==t||t.preventDefault(),P(null),Z(!0);let n=y.length,i=y.replace(/<(a)?:[^:]+:[0-9]+>/g,"--").length,l=m.ZP.parse(void 0,y),{hasErrors:a}=V(l);if(!a){try{let t=await _.ZP.updateVoiceChannelStatus(e.id,l.content);204===t.status?(S.default.track(U.rMx.VOICE_CHANNEL_TOPIC_SET,{guild_id:e.guild_id,channel_id:e.id,media_session_id:A,raw_length:n,text_length:i}),r()):B(t)}catch(t){B(t)}Z(!1)}},[b,x]=l.useState((0,g.JM)(y)),X=async()=>(H||v||await R(),Promise.resolve({shouldClear:!1,shouldRefocus:!0}));return(0,i.jsx)("form",{onSubmit:R,className:D.form,children:(0,i.jsxs)(u.Y0X,{transitionState:n,size:u.CgR.SMALL,className:a()(D.modal,D.gradientBorder),children:[(0,i.jsxs)(u.hzk,{className:D.container,children:[(0,i.jsxs)(u.xBx,{direction:T.Z.Direction.VERTICAL,className:D.modalHeader,separator:!1,children:[(0,i.jsx)(u.olH,{className:D.closeButton,onClick:r}),(0,i.jsx)("div",{className:D.headerImage}),(0,i.jsx)(u.vwX,{tag:"h1",className:D.title,children:N.intl.string(N.t["5CyJBQ"])}),(0,i.jsx)(u.Text,{color:"header-secondary",variant:"text-sm/normal",children:N.intl.string(N.t.NRBYjo)})]}),(0,i.jsxs)(u.hjN,{className:D.inputSection,title:N.intl.string(N.t.Fq5lwM),children:[(0,i.jsx)(I.Z,{innerClassName:D.textArea,textValue:y,richValue:b,placeholder:N.intl.formatToPlainString(N.t.DUXxBg,{channelName:e.name}),focused:!0,channel:e,onChange:(t,e,n)=>{O(e),x(n)},onSubmit:X,type:c.Ie.VOICE_CHANNEL_STATUS,canMentionRoles:!1,canMentionChannels:!1,allowNewLines:!1,parentModalKey:f,maxCharacterCount:500,showRemainingCharsAfterCount:250,emojiPickerCloseOnModalOuterClick:!0}),null!=h?(0,i.jsx)(u.kzN,{className:D.error,children:h}):null]})]}),(0,i.jsxs)(u.mzw,{justify:M?T.Z.Justify.END:T.Z.Justify.BETWEEN,direction:T.Z.Direction.HORIZONTAL,className:D.modalFooter,children:[(0,i.jsx)(u.zxk,{look:u.zxk.Looks.FILLED,color:u.zxk.Colors.PRIMARY,className:D.cancelButton,onClick:r,children:N.intl.string(N.t["ETE/oK"])}),(0,i.jsx)(u.zxk,{onClick:R,submitting:v,className:D.button,disabled:H,children:N.intl.string(N.t.XqK2Iy)})]})]})})}},241155:function(t,e,n){n.d(e,{Z:()=>C}),n(47120);var i,l,r,a=n(392711),d=n.n(a),s=n(442837),u=n(570140),_=n(924301),o=n(601964),E=n(486527);let c=!1,g={},I={},T={},p=t=>(T[t.guild_scheduled_event.id]=new o.ZP(t.guild_scheduled_event.guild),I[t.guild_scheduled_event.id]=t.guild_scheduled_event,{channelId:t.directory_channel_id,scheduledEventId:t.entity_id,type:E.C2.GUILD_SCHEDULED_EVENT,authorId:t.author_id,createdAt:t.created_at});class m extends(i=s.ZP.Store){isFetching(){return c}getEventDirectoryEntries(t){if(null!=t)return g[t]}getCachedGuildByEventId(t){var e;return null!==(e=T[t])&&void 0!==e?e:void 0}getCachedGuildScheduledEventById(t){var e;return null!==(e=I[t])&&void 0!==e?e:void 0}}r="EventDirectoryStore",(l="displayName")in m?Object.defineProperty(m,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):m[l]=r;let C=new m(u.Z,{EVENT_DIRECTORY_FETCH_START:function(){c=!0},EVENT_DIRECTORY_FETCH_SUCCESS:function(t){let{channelId:e,entries:n}=t;c=!1;let i=d().sortBy([...n],[function(t){return(0,_.CQ)(t.guild_scheduled_event)}]),l=d().map(i,p);g[e]=l},EVENT_DIRECTORY_FETCH_FAILURE:function(){c=!1}})},486527:function(t,e,n){n.d(e,{AR:()=>g,C2:()=>o,Pp:()=>T,VX:()=>E,b7:()=>I,sE:()=>c});var i,l,r,a,d=n(149765),s=n(700785),u=n(981631),_=n(388032),o=((i={})[i.GUILD=0]="GUILD",i[i.GUILD_SCHEDULED_EVENT=1]="GUILD_SCHEDULED_EVENT",i),E=((l={}).GUILD_TEMPLATES="guild-templates",l.CUSTOMIZE_NEW_GUILD="customize-new-guild",l.CHOOSE_GUILD="choose-guild",l.CUSTOMIZE_EXISTING_GUILD="customize-existing-guild",l.CONFIRMATION="confirmation",l),c=((r={}).CREATE="CREATE",r.HUB_SCHOOL_CLUB="HUB_SCHOOL_CLUB",r.HUB_STUDY="HUB_STUDY",r.HUB_CLASS="HUB_CLASS",r.HUB_SOCIAL="HUB_SOCIAL",r.HUB_MAJOR="HUB_MAJOR",r.HUB_DORM="HUB_DORM",r),g=((a={})[a.ALL=-1]="ALL",a[a.UNCATEGORIZED=0]="UNCATEGORIZED",a[a.SCHOOL_CLUB=1]="SCHOOL_CLUB",a[a.CLASS=2]="CLASS",a[a.STUDY_SOCIAL=3]="STUDY_SOCIAL",a[a.MISC=5]="MISC",a);function I(t){return"883060064561299456"===t?[{value:1,label:_.intl.string(_.t["Z+MPNz"])},{value:2,label:_.intl.string(_.t.dV9uBg)},{value:3,label:_.intl.string(_.t.xoHQcn)},{value:5,label:_.intl.string(_.t.Ao41rq)}]:[{value:1,label:_.intl.string(_.t.oNHFUF),idealSize:100},{value:2,label:_.intl.string(_.t.V1i8nZ)},{value:3,label:_.intl.string(_.t.Z2ygQk),idealSize:50},{value:5,label:_.intl.string(_.t["0Bg9LS"])}]}function T(){return{CREATE:{id:"CREATE",code:"2TffvPucqHkN",label:_.intl.string(_.t["H3+6BA"]),channels:[],system_channel_id:null},HUB_SCHOOL_CLUB:{id:"HUB_SCHOOL_CLUB",code:"UMUbvRpRZhS6",label:_.intl.string(_.t["mmFA5+"]),channels:[{id:"00",parent_id:null,name:_.intl.string(_.t["VCAA/f"]),type:u.d4z.GUILD_CATEGORY},{id:"01",parent_id:"00",name:_.intl.string(_.t.GHQoER),type:u.d4z.GUILD_TEXT},{id:"02",parent_id:"00",name:_.intl.string(_.t.nSsoSE),type:u.d4z.GUILD_TEXT},{id:"03",parent_id:"00",name:_.intl.string(_.t.yZCzMT),type:u.d4z.GUILD_TEXT},{id:"10",parent_id:null,name:_.intl.string(_.t.mobYpK),type:u.d4z.GUILD_CATEGORY},{id:"11",parent_id:"10",name:_.intl.string(_.t.pIOigI),type:u.d4z.GUILD_TEXT},{id:"12",parent_id:"10",name:_.intl.string(_.t.ao2wxs),type:u.d4z.GUILD_TEXT},{id:"13",parent_id:"10",name:_.intl.string(_.t.AIszv7),type:u.d4z.GUILD_TEXT},{id:"20",parent_id:null,name:_.intl.string(_.t.vcKDMj),type:u.d4z.GUILD_CATEGORY},{id:"21",parent_id:"20",name:_.intl.string(_.t.XS6gcH),type:u.d4z.GUILD_VOICE},{id:"22",parent_id:"20",name:_.intl.string(_.t.hi1Ykp),type:u.d4z.GUILD_VOICE},{id:"22",parent_id:"20",name:_.intl.string(_.t.vw8oaW),type:u.d4z.GUILD_VOICE}],roles:[{id:"00",name:"@everyone",permissions:s.TP},{id:"01",name:"officers (example)",mentionable:!0,hoist:!0,permissions:d.$e(s.TP,u.Plq.MANAGE_ROLES,u.Plq.MANAGE_CHANNELS,u.Plq.KICK_MEMBERS,u.Plq.BAN_MEMBERS,u.Plq.MANAGE_NICKNAMES,u.Plq.MANAGE_GUILD_EXPRESSIONS,u.Plq.MANAGE_MESSAGES,u.Plq.SEND_TTS_MESSAGES),color:3066993}],system_channel_id:"12"},HUB_STUDY:{id:"HUB_STUDY",code:"2JBhzzca2vfT",label:_.intl.string(_.t.fYwSi4),channels:[{id:"00",parent_id:null,name:_.intl.string(_.t["HY+vdH"]),type:u.d4z.GUILD_CATEGORY},{id:"01",parent_id:"00",name:_.intl.string(_.t["3eM+Li"]),type:u.d4z.GUILD_TEXT},{id:"02",parent_id:"00",name:_.intl.string(_.t.Qi0D7e),type:u.d4z.GUILD_TEXT},{id:"10",parent_id:null,name:_.intl.string(_.t.yZIUV1),type:u.d4z.GUILD_CATEGORY},{id:"11",parent_id:"10",name:_.intl.string(_.t.pIOigI),type:u.d4z.GUILD_TEXT},{id:"12",parent_id:"10",name:_.intl.string(_.t.ao2wxs),type:u.d4z.GUILD_TEXT},{id:"12",parent_id:"10",name:_.intl.string(_.t.AIszv7),type:u.d4z.GUILD_TEXT},{id:"20",parent_id:null,name:_.intl.string(_.t.vcKDMj),type:u.d4z.GUILD_CATEGORY},{id:"21",parent_id:"20",name:_.intl.string(_.t.XS6gcH),type:u.d4z.GUILD_VOICE},{id:"22",parent_id:"20",name:_.intl.formatToPlainString(_.t.LuNsNT,{number:1}),type:u.d4z.GUILD_VOICE},{id:"23",parent_id:"20",name:_.intl.formatToPlainString(_.t.LuNsNT,{number:2}),type:u.d4z.GUILD_VOICE}],system_channel_id:"12"},HUB_CLASS:{id:"HUB_CLASS",code:"r86WWBwTGspb",label:_.intl.string(_.t.e5gFS0),channels:[{id:"00",parent_id:null,name:_.intl.string(_.t["HY+vdH"]),type:u.d4z.GUILD_CATEGORY},{id:"01",parent_id:"00",name:_.intl.string(_.t["710tNj"]),type:u.d4z.GUILD_TEXT},{id:"02",parent_id:"00",name:_.intl.string(_.t.Qi0D7e),type:u.d4z.GUILD_TEXT},{id:"10",parent_id:null,name:_.intl.string(_.t.yZIUV1),type:u.d4z.GUILD_CATEGORY},{id:"11",parent_id:"10",name:_.intl.string(_.t.pIOigI),type:u.d4z.GUILD_TEXT},{id:"12",parent_id:"10",name:_.intl.string(_.t.ao2wxs),type:u.d4z.GUILD_TEXT},{id:"13",parent_id:"10",name:_.intl.string(_.t.AIszv7),type:u.d4z.GUILD_TEXT},{id:"20",parent_id:null,name:_.intl.string(_.t.vcKDMj),type:u.d4z.GUILD_CATEGORY},{id:"21",parent_id:"20",name:_.intl.string(_.t.XS6gcH),type:u.d4z.GUILD_VOICE},{id:"22",parent_id:"20",name:_.intl.formatToPlainString(_.t.LuNsNT,{number:1}),type:u.d4z.GUILD_VOICE},{id:"23",parent_id:"20",name:_.intl.formatToPlainString(_.t.LuNsNT,{number:2}),type:u.d4z.GUILD_VOICE}],system_channel_id:"12"},HUB_SOCIAL:{id:"HUB_SOCIAL",code:"AvvtXE3mfbCR",label:_.intl.string(_.t.oOj7Ii),channels:[{id:"00",parent_id:null,name:_.intl.string(_.t.yZIUV1),type:u.d4z.GUILD_CATEGORY},{id:"01",parent_id:"00",name:_.intl.string(_.t.pIOigI),type:u.d4z.GUILD_TEXT},{id:"02",parent_id:"00",name:_.intl.string(_.t.ao2wxs),type:u.d4z.GUILD_TEXT},{id:"03",parent_id:"00",name:_.intl.string(_.t.AIszv7),type:u.d4z.GUILD_TEXT},{id:"04",parent_id:"00",name:_.intl.string(_.t.d4F8gI),type:u.d4z.GUILD_TEXT},{id:"10",parent_id:null,name:_.intl.string(_.t.vcKDMj),type:u.d4z.GUILD_CATEGORY},{id:"11",parent_id:"10",name:_.intl.string(_.t.CLWKNj),type:u.d4z.GUILD_VOICE},{id:"12",parent_id:"10",name:_.intl.string(_.t.g3qPRk),type:u.d4z.GUILD_VOICE},{id:"13",parent_id:"10",name:_.intl.string(_.t.yQZpe3),type:u.d4z.GUILD_VOICE}],system_channel_id:"02"},HUB_MAJOR:{id:"HUB_MAJOR",code:"FhmfDR6Arvsc",label:_.intl.string(_.t["9kly4e"]),channels:[{id:"00",parent_id:null,name:_.intl.string(_.t["HY+vdH"]),type:u.d4z.GUILD_CATEGORY},{id:"01",parent_id:"00",name:_.intl.string(_.t.yZCzMT),type:u.d4z.GUILD_TEXT},{id:"02",parent_id:"00",name:_.intl.string(_.t.Qi0D7e),type:u.d4z.GUILD_TEXT},{id:"10",parent_id:null,name:_.intl.string(_.t.yZIUV1),type:u.d4z.GUILD_CATEGORY},{id:"11",parent_id:"10",name:_.intl.string(_.t.pIOigI),type:u.d4z.GUILD_TEXT},{id:"12",parent_id:"10",name:_.intl.string(_.t.ao2wxs),type:u.d4z.GUILD_TEXT},{id:"13",parent_id:"10",name:_.intl.string(_.t.AIszv7),type:u.d4z.GUILD_TEXT},{id:"20",parent_id:null,name:_.intl.string(_.t.vcKDMj),type:u.d4z.GUILD_CATEGORY},{id:"21",parent_id:"20",name:_.intl.string(_.t.XS6gcH),type:u.d4z.GUILD_VOICE},{id:"22",parent_id:"20",name:_.intl.formatToPlainString(_.t.LuNsNT,{number:1}),type:u.d4z.GUILD_VOICE},{id:"23",parent_id:"20",name:_.intl.formatToPlainString(_.t.LuNsNT,{number:2}),type:u.d4z.GUILD_VOICE}],system_channel_id:"12"},HUB_DORM:{id:"HUB_DORM",code:"fkq8xHfrGE58",label:_.intl.string(_.t["ppGw/P"]),channels:[{id:"00",parent_id:null,name:_.intl.string(_.t["HY+vdH"]),type:u.d4z.GUILD_CATEGORY},{id:"01",parent_id:"00",name:_.intl.string(_.t["b2+FCQ"]),type:u.d4z.GUILD_TEXT},{id:"10",parent_id:null,name:_.intl.string(_.t.yZIUV1),type:u.d4z.GUILD_CATEGORY},{id:"11",parent_id:"10",name:_.intl.string(_.t.pIOigI),type:u.d4z.GUILD_TEXT},{id:"12",parent_id:"10",name:_.intl.string(_.t.ao2wxs),type:u.d4z.GUILD_TEXT},{id:"13",parent_id:"10",name:_.intl.string(_.t.AIszv7),type:u.d4z.GUILD_TEXT},{id:"20",parent_id:null,name:_.intl.string(_.t.vcKDMj),type:u.d4z.GUILD_CATEGORY},{id:"21",parent_id:"20",name:_.intl.string(_.t.XS6gcH),type:u.d4z.GUILD_VOICE},{id:"22",parent_id:"20",name:_.intl.string(_.t.g3qPRk),type:u.d4z.GUILD_VOICE},{id:"23",parent_id:"20",name:_.intl.string(_.t.CLWKNj),type:u.d4z.GUILD_VOICE}],system_channel_id:"12"}}}},916069:function(t,e,n){n.d(e,{Z:()=>a});var i=n(442837),l=n(914010),r=n(981631);function a(){return(0,i.e7)([l.Z],()=>l.Z.getGuildId())===r.I_8}},951206:function(t,e,n){n.d(e,{F:()=>_});var i=n(512722),l=n.n(i),r=n(846027),a=n(287734),d=n(131951),s=n(254238),u=n(893387);function _(t,e){var n;let i=null!==(n=t.sessionId)&&void 0!==n?n:"";(0,s._)(i),(0,s.s6)();let _=null!=e?e:t.channelId;l()(null!=_,"attempted to transfer to unknown channel"),t.selfMute!==d.Z.isSelfMute()&&r.Z.toggleSelfMute(),t.selfDeaf!==d.Z.isSelfDeaf()&&r.Z.toggleSelfDeaf(),(0,u.Z)(_,"discord_client",i),a.default.selectVoiceChannel(_,!1)}},446226:function(t,e,n){n.d(e,{Z:()=>d});var i=n(442837),l=n(314897),r=n(979651),a=n(258609);function d(){return(0,i.e7)([l.default,r.Z,a.Z],()=>{var t;let e=l.default.getId(),n=a.Z.getRemoteSessionId();return null!==(t=r.Z.getVoiceStateForSession(e,n))&&void 0!==t?t:void 0},[])}},937393:function(t,e,n){n.d(e,{Z:()=>d});var i=n(442837),l=n(553795),r=n(823379),a=n(981631);function d(){return(0,i.Wu)([l.Z],()=>[l.Z.getAccount(null,a.ABu.XBOX),l.Z.getAccount(null,a.ABu.PLAYSTATION),l.Z.getAccount(null,a.ABu.PLAYSTATION_STAGING)].filter(r.lm))}},721351:function(t,e,n){n.d(e,{Z:()=>d});var i=n(481060),l=n(374129),r=n(639351),a=n(927923);function d(t){return null!=t?(0,i.GSL)(t===a.YE.XBOX?r.Z:l.Z):i.U5H}},420529:function(t,e,n){n.d(e,{Z:()=>T});var i=n(200651);n(192379);var l=n(399606),r=n(481060),a=n(231757),d=n(397639),s=n(19780),u=n(979651),_=n(951206),o=n(446226),E=n(937393),c=n(721351),g=n(981631),I=n(388032);function T(t){let e=(0,l.e7)([s.Z],()=>s.Z.getChannelId()===t.id),T=(0,o.Z)(),p=(null==T?void 0:T.channelId)===t.id,m=(0,d.V)(t)&&!t.isPrivate(),C=(0,d.Z)(t),L=!(0,l.e7)([u.Z],()=>u.Z.isInChannel(t.id))&&C||m,S=(0,E.Z)();if(!p&&0===S.length)return null;let U=e=>{if(!e.twoWayLink||e.revoked){(0,a.Z)({platformType:e.type,location:"Console Transfer Item"});return}e.type===g.ABu.XBOX?(0,r.ZDy)(async()=>{let{default:e}=await Promise.all([n.e("62729"),n.e("522")]).then(n.bind(n,200623));return n=>(0,i.jsx)(e,{...n,channel:t})}):(e.type===g.ABu.PLAYSTATION||e.type===g.ABu.PLAYSTATION_STAGING)&&(0,r.ZDy)(async()=>{let{default:l}=await n.e("638").then(n.bind(n,543974));return n=>(0,i.jsx)(l,{...n,platform:e.type,channel:t})})};return(0,i.jsx)(i.Fragment,{children:p?(0,i.jsx)(r.sNh,{label:I.intl.string(I.t.PlwgdX),id:"handoff",action:()=>{(0,_.F)(T)},icon:(0,c.Z)(void 0),disabled:L}):S.map(t=>{var n,l;return(0,i.jsx)(r.sNh,{id:"transfer-".concat(t.type,"-").concat(t.id),label:(n=t.type,l=e,n===g.ABu.XBOX?l?I.intl.string(I.t["f+Aijo"]):I.intl.string(I.t.E8euSk):n===g.ABu.PLAYSTATION?l?I.intl.string(I.t.vzfxmZ):I.intl.string(I.t.QxEYDg):n===g.ABu.PLAYSTATION_STAGING?l?I.intl.string(I.t.BDiXtb):I.intl.string(I.t["bhdB9/"]):void 0),action:()=>U(t),icon:(0,c.Z)(t.type),disabled:L},t.id)})})}},658041:function(t,e,n){n.d(e,{M:()=>d});var i=n(913527),l=n.n(i),r=n(709054),a=n(765305);function d(t,e,n,i){let d=l()(),s=new Date(t.scheduled_start_time).getTime(),u={start:s-a.VF,end:s};if(d.isBetween(u.start,u.end)){if(null!=e){let t=l()(e),n=t.isBetween(u.start,u.end),r=t.isBetween(l()(s).subtract(a.zV,"days"),s);return n||r&&!i?void 0:a.X_.EVENT_STARTING_SOON}return a.X_.EVENT_STARTING_SOON}let _=r.default.extractTimestamp(t.id),o=Math.min((null!=n?n:_)+a.Fc,s);if(d.isBetween(_,o)&&null==e&&!i)return a.X_.NEW_EVENT}},835184:function(t,e,n){n.d(e,{Z:()=>I});var i,l=n(442837),r=n(570140),a=n(314897),d=n(924301),s=n(658041),u=n(765305);function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let o={},E={};function c(t){let e={...o};delete e[t],o=e;let n={...E};delete n[t],E=n}class g extends(i=l.ZP.PersistedStore){initialize(t){if(null!=t){var e,n;o=null!==(e=t.upcomingEventDismissals)&&void 0!==e?e:{},E=null!==(n=t.upcomingEventSeenTimestamps)&&void 0!==n?n:{}}}getGuildEventNoticeDismissalTime(t){return o[t]}getAllEventDismissals(){return o}getUpcomingNoticeSeenTime(t){return E[t]}getAllUpcomingNoticeSeenTimes(){return E}getState(){return{upcomingEventDismissals:o,upcomingEventSeenTimestamps:E}}}_(g,"displayName","UpcomingEventNoticesStore"),_(g,"persistKey","UpcomingEventNotices");let I=new g(r.Z,{UPCOMING_GUILD_EVENT_NOTICE_HIDE:function(t){let{eventId:e}=t,n={...o};n[e]=Date.now(),o=n},GUILD_SCHEDULED_EVENT_UPDATE:function(t){let{guildScheduledEvent:e}=t;(e.status===u.p1.CANCELED||e.status===u.p1.COMPLETED)&&c(e.id)},GUILD_SCHEDULED_EVENT_DELETE:function(t){let{guildScheduledEvent:e}=t;c(e.id)},GUILD_SCHEDULED_EVENT_USER_ADD:function(t){let{userId:e,guildEventId:n}=t;if(e!==a.default.getId())return;let i=d.ZP.getGuildScheduledEvent(n);if(null==i||i.status!==u.p1.SCHEDULED||null!=o[n])return;let l=E[n];if((0,s.M)(i,void 0,l,!1)===u.X_.NEW_EVENT){let t={...o};t[n]=Date.now(),o=t}},UPCOMING_GUILD_EVENT_NOTICE_SEEN:function(t){let{guildEventId:e}=t,n={...E};n[e]=Date.now(),E=n}})},554747:function(t,e,n){n.d(e,{Vm:()=>D,ZP:()=>S,eF:()=>A,gM:()=>N,k5:()=>f,qY:()=>U,sz:()=>y,u1:()=>G}),n(47120),n(724458);var i=n(192379),l=n(442837),r=n(241155),a=n(592125),d=n(984933),s=n(430824),u=n(496675),_=n(70956),o=n(823379),E=n(924301),c=n(658041),g=n(835184),I=n(79874),T=n(854698),p=n(765305),m=n(981631);let C=[],L=15*_.Z.Millis.MINUTE;function S(t,e){return(0,l.Wu)([s.Z,r.Z,E.ZP,u.Z,a.Z,d.ZP],()=>{let n=s.Z.getGuild(t);if(null==n)return C;if(n.hasFeature(m.oNc.HUB)){var i,l;let t=null===(i=d.ZP.getDefaultChannel(n.id))||void 0===i?void 0:i.id;return(null!==(l=r.Z.getEventDirectoryEntries(t))&&void 0!==l?l:[]).map(t=>{let e=t.scheduledEventId,n=E.ZP.getGuildScheduledEvent(e);return null!=n?n:r.Z.getCachedGuildScheduledEventById(e)}).filter(o.lm)}return E.ZP.getGuildScheduledEventsByIndex(null!=e?e:E.bN.GUILD_EVENT_UPCOMING(n.id)).filter(t=>{let e=t.channel_id;if(null==e)return!0;let n=a.Z.getChannel(e);return u.Z.can(m.Plq.VIEW_CHANNEL,n)})},[e,t])}function U(t){return(0,l.e7)([E.ZP,a.Z,u.Z],()=>{let e=a.Z.getChannel(t);if(!u.Z.can(m.Plq.VIEW_CHANNEL,e)||null==(null==e?void 0:e.guild_id))return null;let n=E.ZP.getGuildScheduledEventsByIndex(E.bN.CHANNEL_EVENT_ACTIVE(t));return n.length>0?n[0]:null},[t])}function N(t){let e=(0,l.Wu)([E.ZP],()=>E.ZP.getGuildScheduledEventsForGuild(t),[t]);return i.useMemo(()=>{let t=new Map;return e.forEach(e=>{let n=e.channel_id;null!=n&&t.set(n,e)}),t},[e])}function D(t){var e;let n=(0,l.Wu)([E.ZP,a.Z,u.Z],()=>E.ZP.getGuildScheduledEventsByIndex(E.bN.GUILD_EVENT_UPCOMING(t)).filter(t=>{if(t.entity_type===p.WX.NONE||t.status!==p.p1.SCHEDULED)return!1;if(null==t.channel_id)return!0;let e=a.Z.getChannel(t.channel_id);return u.Z.can(m.Plq.VIEW_CHANNEL,e)}),[t]),i=(0,l.cj)([g.Z],()=>g.Z.getAllEventDismissals()),r=(0,l.cj)([g.Z],()=>g.Z.getAllUpcomingNoticeSeenTimes()),d=(0,l.cj)([E.ZP],()=>null==n?{}:n.reduce((t,e)=>{let n=(0,T.DK)(e);return{...t,[e.id]:E.ZP.isInterestedInEventRecurrence(e.id,n)}},{}),[n]),_=(0,l.e7)([s.Z],()=>s.Z.getGuild(t)),o=null!=_&&!_.hasFeature(m.oNc.COMMUNITY)&&_.hasFeature(m.oNc.INTERNAL_EMPLOYEE_ONLY);if(null!=n&&null!=d&&o)for(let t=0;t<n.length;t++){let l=n[t],a=i[l.id],s=r[l.id],u=null!==(e=d[l.id])&&void 0!==e&&e,_=(0,c.M)(l,a,s,u);if(null!=_)return{upcomingEvent:l,noticeType:_}}}function f(t){return(0,l.e7)([E.ZP,a.Z,u.Z],()=>E.ZP.getGuildScheduledEventsByIndex(E.bN.GUILD_EVENT_ACTIVE(t)).find(t=>{if(t.entity_type===p.WX.NONE||!(0,E.xt)(t))return!1;if(null==t.channel_id)return!0;let e=a.Z.getChannel(t.channel_id);return u.Z.can(m.Plq.VIEW_CHANNEL,e)}),[t])}function G(t){return(0,l.e7)([E.ZP],()=>E.ZP.getGuildScheduledEventsByIndex(E.bN.CHANNEL_EVENT_UPCOMING(t)),[t])}function A(t){return(0,l.e7)([a.Z,E.ZP],()=>{let e=E.ZP.getGuildScheduledEventsByIndex(E.bN.GUILD_EVENT_ACTIVE(t)).find(t=>null!=a.Z.getChannel(t.channel_id));return a.Z.getChannel(null==e?void 0:e.channel_id)},[t])}function y(t){let[e,n]=i.useState(()=>Date.now());i.useEffect(()=>{let t=setInterval(()=>{n(Date.now())},L);return()=>clearInterval(t)},[]);let r=(0,l.e7)([E.ZP],()=>null==t?[]:E.ZP.getGuildScheduledEventsByIndex(E.bN.CHANNEL_EVENT_UPCOMING(t)),[t,e]);return i.useMemo(()=>r.filter(t=>{let{startTime:e,endTime:n}=(0,I.Kq)(t),{withinStartWindow:i,diffMinutes:l}=(0,T.ub)(e.toISOString(),null==n?void 0:n.toISOString());return t.status!==p.p1.ACTIVE&&i&&l<15}),[r])}},423589:function(t,e,n){n.d(e,{Mn:()=>T,OD:()=>I,W9:()=>c}),n(47120),n(789020);var i=n(442837),l=n(798140),r=n(9156),a=n(630388),d=n(709054),s=n(312400),u=n(981631),_=n(969943),o=n(526761),E=n(388032);function c(){return[{label:E.intl.string(E.t["8ot6go"]),value:_.Oe.MINUTES_15},{label:E.intl.string(E.t.UMWBZm),value:_.Oe.HOURS_1},{label:E.intl.string(E.t.QmYWtr),value:_.Oe.HOURS_3},{label:E.intl.string(E.t.EpAXPD),value:_.Oe.HOURS_8},{label:E.intl.string(E.t["755t4u"]),value:_.Oe.HOURS_24},{label:E.intl.string(E.t.r3LawM),value:_.Oe.ALWAYS}]}let g={ignoreMute:!1,ignoreUnreadSetting:!0,ignoreNotificationSetting:!1};function I(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return d.default.keys(t).filter(n=>{var i,r;let d=t[n].message_notifications!==u.bL.NULL,s=a.yE(null!==(i=t[n].flags)&&void 0!==i?i:0,o.ic.UNREADS_ALL_MESSAGES)||a.yE(null!==(r=t[n].flags)&&void 0!==r?r:0,o.ic.UNREADS_ONLY_MENTIONS);return!e.ignoreUnreadSetting&&s||!e.ignoreNotificationSetting&&d||!e.ignoreMute&&(0,l.m$)(t[n])})}function T(t){let e=(0,i.e7)([r.ZP],()=>r.ZP.useNewNotifications);return s.xT.useExperiment({location:t},{autoTrackExposure:!1}).enabled&&e}},397639:function(t,e,n){n.d(e,{V:()=>u,Z:()=>_});var i=n(442837),l=n(430824),r=n(496675),a=n(979651),d=n(934415),s=n(231338);function u(t){return(0,i.e7)([r.Z],()=>null==t||!r.Z.can(s.Pl.CONNECT,t),[t])}function _(t){return(0,i.e7)([a.Z,l.Z],()=>(0,d.rY)(t,a.Z,l.Z))}}}]);
//# sourceMappingURL=c061f39d7480f270.js.map