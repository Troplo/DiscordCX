"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["27278"],{781780:function(e,n,t){t.d(n,{Z:()=>d});var i=t(200651),a=t(963614),r=t(208156),l=t(701488),o=t(864096);function d(e){var n,t,d;let{channelId:c,guildId:u,embeddedActivity:s,application:p}=e,m={instance_id:null!==(d=null!==(t=s.compositeInstanceId)&&void 0!==t?t:s.launchId)&&void 0!==d?d:"",location_id:null===(n=s.location)||void 0===n?void 0:n.id,launch_id:s.launchId,referrer_id:s.referrerId,custom_id:s.customId};return null!=u&&""!==u&&(m.guild_id=u),null!=c&&""!==c&&(m.channel_id=c),(0,i.jsx)(r.J,{allowPopups:(0,a.h)(p),referrerPolicy:l.um.has(s.applicationId)?"no-referrer":"origin",url:s.url,queryParams:m,className:o.iframe,shouldRefocus:!1})}},325749:function(e,n,t){t.d(n,{Z:()=>E}),t(47120);var i=t(200651),a=t(192379),r=t(120356),l=t.n(r),o=t(442837),d=t(481060),c=t(13245),u=t(753972),s=t(812206),p=t(726721),m=t(610394),v=t(695346),f=t(390322),h=t(961048),x=t(871499),_=t(786915),Z=t(592125),j=t(271383),I=t(594174),C=t(51144),g=t(145597),b=t(214629),A=t(317381),P=t(884338),S=t(473179),N=t(981631),y=t(388032),k=t(124062);let w=P.u.SIZE_24;function E(e){let{applicationId:n,channelId:t}=e,r=(0,o.e7)([s.Z],()=>s.Z.getApplication(n)),E=(0,o.e7)([A.ZP],()=>A.ZP.getSelfEmbeddedActivities().get(n)),R=(0,o.e7)([Z.Z],()=>Z.Z.getChannel(t)),T=v.Sb.useSetting(),L=(0,o.Wu)([j.ZP],()=>{var e;return null==R||null==E?[]:Array.from(null!==(e=E.userIds)&&void 0!==e?e:[]).map(e=>j.ZP.getMember(R.guild_id,e))},[E,R]),B=a.useMemo(()=>{let e=new Map;return L.forEach(n=>{null!=n&&void 0!==n&&e.set(n.userId,n)}),e},[L]),U=a.useCallback((e,n)=>{var t;if(null==e)return null;let a=B.get(e.id),r=null!==(t=null==a?void 0:a.nick)&&void 0!==t?t:C.ZP.getName(e);return(0,i.jsx)(d.DY3,{text:r,position:"bottom",children:(0,i.jsx)("img",{src:e.getAvatarURL(null==n?void 0:n.guild_id,w),alt:r,className:k.avatar},e.id)},e.id)},[B]),O=null==E?void 0:E.userIds,Y=(0,o.Wu)([I.default],()=>Array.from(null!=O?O:[]).map(e=>I.default.getUser(e)).filter(e=>null!=e),[O]),z=p.Z.useExperiment({location:"activity_popout_overflow_menu"},{autoTrackExposure:!0}).enabled,D=a.useCallback(()=>{let e=(0,g.QF)();c.Z.setInputLocked(!m.ZP.isInputLocked(e),e)},[]),G=(0,b.PR)();if(null==r||null==E)return null;let H=(0,i.jsx)(u.Z,{application:r,size:24,className:k.appIcon});return T&&(H=(0,i.jsx)(d.DY3,{text:E.compositeInstanceId,position:"bottom",children:H})),(0,i.jsx)(d.f6W,{theme:N.BRd.DARK,children:e=>(0,i.jsxs)("div",{className:l()(k.container,e),children:[(0,i.jsxs)("div",{className:l()(k.headerSection,k.headerSectionLeft),children:[H,(0,i.jsx)(d.Text,{variant:"text-md/normal",color:"header-primary",children:r.name}),(0,i.jsx)("div",{className:k.dotSpacer,children:(0,i.jsx)(d.Text,{variant:"text-md/normal",color:"text-muted",children:"."})}),(0,i.jsx)(P.Z,{renderIcon:!1,users:Y,size:w,max:6,className:k.userAvatars,renderUser:e=>U(e,R)})]}),(0,i.jsx)("div",{className:l()(k.headerSection,k.headerSectionRight),children:(0,i.jsxs)("div",{className:k.actionButtonsContainer,children:[(0,i.jsx)(_.Z,{appContext:N.IlC.POPOUT,applicationId:n,channel:R,shouldPrioritizeGroupPlusIcon:!0,embeddedActivity:E}),G?(0,i.jsx)(x.Z,{onClick:D,iconComponent:d.epB,label:y.intl.string(y.t.mseZsL)}):null,z&&(0,i.jsx)(d.yRy,{position:"bottom",renderPopout:e=>{let{closePopout:n}=e;return(0,i.jsx)(f.Z,{children:(0,i.jsx)(S.Z,{application:r,channelId:t,onClose:n})})},children:(e,n)=>{let{isShown:t}=n;return(0,a.createElement)(h.Z,{...e,key:"more-options",isActive:t})}},"more-options-popout")]})})]})})}},473179:function(e,n,t){t.d(n,{Z:()=>o});var i=t(200651),a=t(481060),r=t(870745),l=t(388032);function o(e){let{onClose:n,onSelect:t,application:o,channelId:d}=e,c=(0,r.Z)(o,d);return(0,i.jsx)(a.v2r,{navId:"activity-popout-overflow-popout",onClose:n,onSelect:t,"aria-label":l.intl.string(l.t.SS9Y6O),children:c})}},701011:function(e,n,t){t.d(n,{Z:()=>_});var i=t(200651),a=t(192379),r=t(442837),l=t(481060),o=t(110924),d=t(812206),c=t(554370),u=t(788983),s=t(214629),p=t(317381),m=t(16609),v=t(781780),f=t(325749),h=t(981631),x=t(175911);function _(){let{embeddedActivity:e,channelId:n,guildId:t}=(0,r.cj)([p.ZP],()=>{let e=p.ZP.getCurrentEmbeddedActivity(),n=(0,m.p)(null==e?void 0:e.location),t=(0,m.j)(null==e?void 0:e.location);return{embeddedActivity:e,channelId:n,guildId:t}}),_=a.useRef(null),Z=(0,o.Z)(e);a.useEffect(()=>{null!=e?clearTimeout(_.current):null!=Z&&null==e&&(_.current=window.setTimeout(()=>{(0,u.xv)(h.KJ3.ACTIVITY_POPOUT)},5e3))},[e,Z]);let j=(0,r.e7)([d.Z],()=>{let n=null==e?void 0:e.applicationId;return null==n?void 0:d.Z.getApplication(n)}),I=(0,s.PR)();return(0,i.jsx)("div",{className:x.container,children:null==e||null==j?(0,i.jsx)(l.$jN,{className:x.iframe}):(0,i.jsx)("div",{className:x.loadedContentContainer,children:(0,i.jsxs)("div",{className:x.iframeAndHeaderContainer,children:[(0,i.jsx)("div",{className:x.headerContainer,children:(0,i.jsx)(f.Z,{applicationId:j.id,channelId:n})}),(0,i.jsx)("div",{className:x.iframeContainer,children:(0,i.jsx)(v.Z,{channelId:n,guildId:t,embeddedActivity:e,application:j})}),I?(0,i.jsx)(c.Z,{isEmbeddedActivity:!0}):null]})})})}},748623:function(e,n,t){t.r(n),t.d(n,{default:()=>d});var i=t(200651),a=t(238246),r=t(952561),l=t(701011),o=t(388032);function d(e){var n;let{windowKey:t}=e,d=(0,r.Z)();return(0,i.jsx)(a.Z,{withTitleBar:!0,windowKey:t,title:null!==(n=null==d?void 0:d.name)&&void 0!==n?n:o.intl.string(o.t.IC5Anp),children:(0,i.jsx)(l.Z,{})})}},870745:function(e,n,t){t.d(n,{Z:()=>u});var i=t(200651),a=t(442837),r=t(481060),l=t(726721),o=t(726521),d=t(592125),c=t(388032);function u(e,n){let t=l.Z.useExperiment({location:"activity_popout_overflow_menu"},{autoTrackExposure:!0}).enabled,u=(0,a.e7)([d.Z],()=>d.Z.getChannel(n)),s=null==u?void 0:u.getGuildId();return!1===t?null:(0,i.jsx)(r.sNh,{id:"report-app",color:"danger",label:c.intl.string(c.t.NgA5vr),action:()=>(0,o.uu)({application:e,entrypoint:"activity_ui_popout",contextualGuildId:null!=s?s:void 0,contextualChannelId:null==u?void 0:u.id}),icon:r.U65})}},864096:function(e,n,t){e.exports={iframe:"iframe__8c55d"}},124062:function(e,n,t){e.exports={container:"container_c8f358",headerSection:"headerSection_c8f358",headerSectionLeft:"headerSectionLeft_c8f358",headerSectionRight:"headerSectionRight_c8f358",appIcon:"appIcon_c8f358",avatar:"avatar_c8f358",userAvatars:"userAvatars_c8f358",dotSpacer:"dotSpacer_c8f358",actionButtonsContainer:"actionButtonsContainer_c8f358"}},175911:function(e,n,t){e.exports={container:"container__0b406",loadedContentContainer:"loadedContentContainer__0b406",iframeAndHeaderContainer:"iframeAndHeaderContainer__0b406",headerContainer:"headerContainer__0b406",iframeContainer:"iframeContainer__0b406",iframe:"iframe__0b406"}}}]);
//# sourceMappingURL=b904712cfa74b089.js.map