"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["23919"],{983008:function(e){e.exports="/assets/3809fd18e93ab899.svg"},478408:function(e){e.exports="/assets/1ff6f8391190866c.svg"},706302:function(e,t,n){n.d(t,{Z:()=>a});var i=n(812236),l=n(989573);function a(e){let{context:t,applicationId:n,botUserId:a}=e,o=(0,i.ms)({context:t,applicationId:n,botUserId:a}),s=(0,l.Z)({context:t});return o&&null!=a&&!s}},445392:function(e,t,n){var i,l=n(442837),a=n(570140);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let s=10*n(70956).Z.Millis.MINUTE,r={lastUsedCommandId:null,lastUsedTimeMs:null};class c extends(i=l.ZP.PersistedStore){initialize(e){null!=e&&(r.lastUsedCommandId=e.lastUsedCommandId,r.lastUsedTimeMs=e.lastUsedTimeMs)}getState(){return r}getLastUsedCommandId(){let e=Date.now();return null==r.lastUsedTimeMs||null==r.lastUsedCommandId?null:(e>r.lastUsedTimeMs+s&&(r.lastUsedCommandId=null,r.lastUsedTimeMs=null),r.lastUsedCommandId)}}o(c,"displayName","AppLauncherLastUsedCommandStore"),o(c,"persistKey","AppLauncherLastUsedCommandStore"),new c(a.Z,{APPLICATION_COMMAND_USED:function(e){let{command:t}=e;r.lastUsedCommandId=t.id,r.lastUsedTimeMs=Date.now()}})},87005:function(e,t,n){n.d(t,{f:()=>x}),n(47120);var i=n(192379),l=n(243814),a=n(442837),o=n(384275),s=n(911969),r=n(10718),c=n(812236),d=n(148958),u=n(881998);n(445392);var m=n(783097),p=n(689079);let h={commandTypes:[s.yU.CHAT,s.yU.PRIMARY_ENTRY_POINT]},v={placeholderCount:0,limit:p.tn,includeFrecency:!0};function x(e){let{context:t,onlyActivityApps:n,allowCommandFetch:s,includeAuthorizedAppsAndFetch:x}=e,{sectionDescriptors:f,loading:N}=r.wi({context:t,filters:h,options:v,allowFetch:s});return{loading:N,frecentApps:function(e){let{sectionDescriptors:t,context:n,onlyActivityApps:s,includeAuthorizedAppsAndFetch:r}=e,h=(0,a.e7)([u.Z],()=>u.Z.getFetchState());i.useEffect(()=>{r&&h===u.M.NOT_FETCHED&&o.Z.fetch()},[r,h]);let v=(0,a.Wu)([u.Z],()=>{var e,t;return r&&null!==(t=null===(e=u.Z.getApps())||void 0===e?void 0:e.filter(e=>e.scopes.includes(l.x.APPLICATIONS_COMMANDS)))&&void 0!==t?t:[]}),x=t.filter(e=>e.id!==p.bi.FRECENCY&&e.id!==p.bi.BUILT_IN),f=(0,d.h)(x,v);return i.useMemo(()=>s?f.filter(e=>null!=e.application&&(0,m.ye)(e.application)&&null!=(0,c.Xu)(n,e.id)):f,[f,n,s])}({sectionDescriptors:f,context:t,onlyActivityApps:n,includeAuthorizedAppsAndFetch:x})}}},219066:function(e,t,n){n.d(t,{Z:()=>m}),n(724458),n(47120);var i=n(192379),l=n(392711),a=n.n(l),o=n(911969),s=n(254711),r=n(213459),c=n(10718),d=n(148958),u=n(689079);function m(e){var t;let{context:n}=e,l="channel"===n.type?n.channel:void 0,m=(0,r.LD)(null==l?void 0:l.guild_id,!0),{commandsByActiveSection:p,loading:h}=c.wi({context:n,filters:{commandTypes:[o.yU.CHAT,o.yU.PRIMARY_ENTRY_POINT]},options:{placeholderCount:0,limit:u.tn,includeFrecency:!0},allowFetch:!0}),v=i.useMemo(()=>p.reduce((e,t)=>{let{section:n,data:i}=t;return i.length>0&&e.add(n.id),e},new Set),[p]),x=i.useMemo(()=>{var e,t;return Object.values(null!==(t=null===(e=m.result)||void 0===e?void 0:e.sections)&&void 0!==t?t:{}).map(e=>{let{descriptor:t}=e;return t}).filter(e=>!(e.id in s.Tm)&&v.has(e.id))},[null===(t=m.result)||void 0===t?void 0:t.sections,v]),f=(0,d.h)(x);return{appsInThisServer:i.useMemo(()=>a().compact(f.map(e=>{let{application:t}=e;return t})).map(e=>({application:e})),[f]),isLoading:m.fetchState.fetching||h}}},106066:function(e,t,n){n.d(t,{s:()=>a});var i=n(695346),l=n(424602);function a(e){let t=i.Sb.useSetting();return l.aq.useExperiment({location:e},{autoTrackExposure:!1}).clickOnHomeActivityOpensAppDetail||t}},496158:function(e,t,n){n.d(t,{D:()=>a});var i=n(192379),l=n(430824);function a(e){return i.useMemo(()=>"contextless"===e.type?{channel:void 0,guild:void 0}:{channel:e.channel,guild:l.Z.getGuild(e.channel.guild_id)},[e])}},346683:function(e,t,n){n.d(t,{Q:()=>a}),n(47120);var i=n(192379),l=n(542094);function a(e){let[t,n]=i.useState(e);return i.useLayoutEffect(()=>{if(e===l.JS.LEAVE){let t=setTimeout(()=>n(e),100);return()=>clearTimeout(t)}n(e)},[e]),t}},676161:function(e,t,n){n.d(t,{Z:()=>s}),n(724458);var i=n(192379),l=n(700089),a=n(654455),o=n(496158);function s(e){let{context:t,commands:n,limit:s=n.length}=e,r=(0,o.D)(t),c=(0,l.R)(r),d=i.useMemo(()=>n.reduce((e,t)=>(e[t.id]=t,e),{}),[n]);return i.useMemo(()=>c.map(e=>d[e]).filter(e=>null!=e).sort((e,t)=>{let n=a.ZP.getScoreWithoutLoadingLatest(r,e);return a.ZP.getScoreWithoutLoadingLatest(r,t)-n}).slice(0,s),[c,d,r,s])}},160973:function(e,t,n){n.d(t,{Z:()=>p});var i=n(442837),l=n(595519),a=n(374065),o=n(761122),s=n(542094),r=n(973616),c=n(496675),d=n(358085),u=n(231338),m=n(388032);function p(e){let t,{context:n,application:p,activityAction:h}=e,v="channel"===n.type?n.channel:void 0,x=(0,i.e7)([c.Z],()=>c.Z.can(u.Pl.USE_EMBEDDED_ACTIVITIES,v)),f=(0,a.KF)(null==v?void 0:v.id),N=!1;switch(h){case s.JS.LEAVE:N=!1;break;case s.JS.START:null==v?N=!1:(null==v?void 0:v.isGuildVoice())?f!==a.jy.CAN_LAUNCH&&(N=!0):(0,l.WS)(v)||(N=!0);break;case s.JS.JOIN:(null==v?void 0:v.isGuildVoice())?N=!x:(0,l.WS)(v)||(N=!0)}if(h!==s.JS.LEAVE){let e=p instanceof r.ZP?p.embeddedActivityConfig:p.embedded_activity_config,n=(0,o.Z)((0,d.getOS)());null==e||e.supported_platforms.includes(n)?(null==v?void 0:v.isThread())&&(N=!0,t=m.intl.string(m.t.ddSR3t)):(N=!1,t=m.intl.string(m.t.z2YTgI))}return N&&null==t&&(t=m.intl.string(m.t.f41E1t)),{disabled:N,reason:t}}},660090:function(e,t,n){n.d(t,{Z:()=>s}),n(47120);var i=n(192379),l=n(674588),a=n(70956),o=n(314734);function s(e){let{sectionId:t,commandsByActiveSection:n}=e,[s,r]=i.useState(o.bS.ALPHABETICAL),c=i.useMemo(()=>{var e,i;return null!==(i=null===(e=n.find(e=>e.section.id===t))||void 0===e?void 0:e.data)&&void 0!==i?i:[]},[n,t]),{popularSortedCommands:d,canSort:u}=function(e){let{alphabeticalSortedCommands:t}=e;return i.useMemo(()=>{if(t.length<=1)return{popularSortedCommands:t,canSort:!1};let e=!1,n=t.map((t,n)=>(e=e||null!=t.global_popularity_rank,{command:t,alphabeticalSortIndex:n}));return e?(n.sort((e,t)=>{let n=e.command.global_popularity_rank,i=t.command.global_popularity_rank;if(null!=n&&null!=i){if(n!==i)return n-i}else if(null!=n)return -1;else if(null!=i)return 1;return e.alphabeticalSortIndex-t.alphabeticalSortIndex}),{popularSortedCommands:n.map(e=>{let{command:t}=e;return t}),canSort:!0}):{popularSortedCommands:t,canSort:!1}},[t])}({alphabeticalSortedCommands:c});i.useEffect(()=>{l.i6(t,{dontRefetchMs:a.Z.Millis.DAY})},[t]),i.useLayoutEffect(()=>{u&&r(o.bS.POPULAR)},[u]);let m=c;switch(s){case o.bS.POPULAR:m=d;break;case o.bS.ALPHABETICAL:m=c}return{sortOrder:s,setSortOrder:r,commands:m,canSort:u}}},392370:function(e,t,n){n.d(t,{Q2:()=>y,pe:()=>j}),n(47120),n(653041),n(536091);var i=n(192379),l=n(392711),a=n.n(l),o=n(373793),s=n(288385),r=n(442837),c=n(911969),d=n(127255),u=n(654455),m=n(213459),p=n(807169),h=n(104793),v=n(674588),x=n(809547),f=n(822245),N=n(631827),C=n(827498),E=n(783097),A=n(689079),I=n(665692);function g(e,t){let n=f.Z.getScoreWithoutLoadingLatest(e.id);return f.Z.getScoreWithoutLoadingLatest(t.id)-n}function _(e,t){let n=(0,E.$d)(e),i=(0,E.$d)(t);return(0,m.un)(n,i)}function P(e,t){return(0,m.un)(e.displayName,t.displayName)}function j(e){let{context:t,query:n,commandLimit:l,applicationLimit:o,searchesCommands:s=!0,searchesBots:r=!0,searchesActivities:v=!0}=e;n.startsWith("".concat(I.GI))&&(n=n.substring(1));let{commands:x,commandSectionMap:f,loading:C}=function(e){var t,n;let{context:l,includeBuiltIn:a=!0,allowFetch:o=!0}=e,s=(0,m.em)(l,!0,o),r=(0,m.PL)(!0,o);return i.useMemo(()=>{var e,t,n,i,o;let c=null!==(n=null===(e=s.result)||void 0===e?void 0:e.sections)&&void 0!==n?n:{},d=null!==(i=null===(t=r.result)||void 0===t?void 0:t.sections)&&void 0!==i?i:{},u=[...Object.keys(c),...Object.keys(d).filter(e=>!(e in c))];a&&u.push(A.bi.BUILT_IN);let p=[],h={};for(let e of u){let t=(0,m.If)(l,e),n=null!==(o=t.sectionCommands)&&void 0!==o?o:[];p.push(...n),n.forEach(e=>{null!=t.descriptor&&(h[e.id]=t.descriptor)})}return{commands:p,commandSectionMap:h,loading:!0===s.fetchState.fetching||!0===r.fetchState.fetching}},[l,a,s.fetchState.fetching,null===(t=s.result)||void 0===t?void 0:t.sections,r.fetchState.fetching,null===(n=r.result)||void 0===n?void 0:n.sections])}({context:t,includeBuiltIn:!0}),{apps:j}=function(e){let{context:t,onlyWithCommands:n,includeBuiltIn:l,allowFetch:a=!0,includeEmbeddedApps:o,includeNonEmbeddedApps:s}=e,r="channel"===t.type?t.channel:void 0,d=(0,p.Hs)(r,[c.yU.CHAT]).hasBaseAccessPermissions,u=(0,m.em)(t,d,a),h=(0,m.PL)(d,a),v=i.useCallback(e=>{let t=e.descriptor.application;return null!=t&&(!!(o&&(0,E.ye)(t))||null!=t&&s&&!(0,E.ye)(t)&&(!n||Object.keys(e.commands).length>0))},[o,s,n]),x=[],f=new Set;if(null!=u.result)for(let e of Object.values(u.result.sections)){let t=e.descriptor.application;null!=t&&v(e)&&(x.push(t),f.add(t.id))}if(null!=h.result)for(let e of Object.values(h.result.sections)){let t=e.descriptor.application;null!=t&&!f.has(t.id)&&v(e)&&x.push(t)}return s&&l&&x.push(E.Wx),{apps:x,loading:(null==u?void 0:u.fetchState.fetching)===!0||(null==h?void 0:h.fetchState.fetching)===!0}}({context:t,onlyWithCommands:!0,includeBuiltIn:!0,includeEmbeddedApps:v,includeNonEmbeddedApps:r}),y=(0,d.Z)({guildId:"channel"===t.type?t.channel.guild_id:null}),T=i.useMemo(()=>{var e,i,a,o,r,d;if(!s)return[];return(0,N.N)(x,{limit:l,filterPredicates:[function(e){let t=(0,p.k)("channel"===e.type?e.channel:void 0,[c.yU.CHAT]),n={};return i=>{let{context:l,userId:a,roleIds:o,isImpersonating:s}=t;if(!(i.applicationId in n)){let{descriptor:t,isGuildInstalled:r,isUserInstalled:c}=(0,m.If)(e,i.applicationId),d=(null==l?void 0:l.guild_id)!=null?h.ML(null==t?void 0:t.permissions,l.guild_id,a,o,s):null,u=(null==l?void 0:l.guild_id)!=null?h.ZJ(null==t?void 0:t.permissions,l,l.guild_id):null;n[i.applicationId]={descriptor:t,applicationAllowedForUser:d,applicationAllowedForChannel:u,isGuildInstalled:r,isUserInstalled:c}}let{descriptor:r,applicationAllowedForChannel:c,applicationAllowedForUser:d,isGuildInstalled:u,isUserInstalled:p}=n[i.applicationId];return h.Ft(i,t,{applicationAllowedForUser:d,applicationAllowedForChannel:c,commandBotId:null==r?void 0:r.botId,isGuildInstalled:u,isUserInstalled:p})===h.mF.ALLOWED}}(t)],bucketPredicates:[(i=e=n,e=>{let t=e.untranslatedName,n=e.displayName;return t.startsWith(i)||n.startsWith(i)}),function(e){let t=null==e?void 0:e.split(" "),n=t[0],i=t.slice(1).join(" ");return e=>{let t=e.untranslatedName,l=e.displayName;return!!(t.startsWith(n)&&t.split(" ").slice(1).join(" ").startsWith(i)||l.startsWith(n)&&l.split(" ").slice(1).join(" ").startsWith(i))}}(e),(a=e,e=>{let t=e.untranslatedName,n=e.displayName;return t.includes(a)||n.includes(a)}),(o=e,e=>{var t;for(let{name:n,serverLocalizedName:i}of null!==(t=e.options)&&void 0!==t?t:[])if(n.startsWith(o)||"".concat(e.untranslatedName," ").concat(n).startsWith(o)||null!=e.displayName&&"".concat(e.displayName," ").concat(n).startsWith(o)||null!=i&&(i.startsWith(o)||"".concat(e.untranslatedName," ").concat(i).startsWith(o)||null!=e.displayName&&"".concat(e.displayName," ").concat(i).startsWith(o)))return!0;return!1}),(r=e,e=>{var t;for(let{name:n,serverLocalizedName:i}of null!==(t=e.options)&&void 0!==t?t:[])if(n.includes(r)||(null==i?void 0:i.includes(r)))return!0;return!1})],sortComparers:[(d={channel:"channel"===t.type?t.channel:void 0},(e,t)=>{let n=u.ZP.getScoreWithoutLoadingLatest(d,e);return u.ZP.getScoreWithoutLoadingLatest(d,t)-n}),P]})},[s,x,l,t,n]),S=i.useMemo(()=>{if(0===T.length)return[];let e=new Map(j.map(e=>[e.id,e]));return a().compact(T.map(t=>{var n;let i=e.get(t.applicationId);if(null==i)return null;let l=null!==(n=f[t.id])&&void 0!==n?n:null;return{command:t,application:i,section:l}}))},[j,T,f]),b=i.useMemo(()=>{var e,i,l,a,s;let d=[];if(v){let e=new Set(j.map(e=>{let{id:t}=e;return t}));d.push(...j),d.push(...y.filter(t=>{let{application:{id:n}}=t;return!e.has(n)}).map(e=>{let{application:t}=e;return t}))}else r&&(d=j);return(0,N.N)(d,{limit:o,filterPredicates:[function(e){let t=(0,p.k)("channel"===e.type?e.channel:void 0,[c.yU.CHAT,c.yU.PRIMARY_ENTRY_POINT]);return n=>{let{context:i,userId:l,roleIds:a,isImpersonating:o}=t,{descriptor:s,sectionCommands:r,isGuildInstalled:c,isUserInstalled:d}=(0,m.If)(e,n.id),u=(null==i?void 0:i.guild_id)!=null?h.ML(null==s?void 0:s.permissions,i.guild_id,l,a,o):null,p=(null==i?void 0:i.guild_id)!=null?h.ZJ(null==s?void 0:s.permissions,i,i.guild_id):null;return null==r||!(r.length>0)||r.some(e=>h.Ft(e,t,{applicationAllowedForUser:u,applicationAllowedForChannel:p,commandBotId:null==s?void 0:s.botId,isGuildInstalled:c,isUserInstalled:d})===h.mF.ALLOWED)}}(t)],bucketPredicates:[(i=e=n,e=>(0,E.$d)(e).toLocaleLowerCase().startsWith(i.toLocaleLowerCase())),(l=e,e=>(0,E.$d)(e).toLocaleLowerCase().includes(l.toLocaleLowerCase())),(a=e,e=>{var t,n;let i=null===(t=(0,E.jD)(e))||void 0===t?void 0:t.toLocaleLowerCase();return null!==(n=null==i?void 0:i.startsWith(a.toLocaleLowerCase()))&&void 0!==n&&n}),(s=e,e=>{var t,n;let i=null===(t=(0,E.jD)(e))||void 0===t?void 0:t.toLocaleLowerCase();return null!==(n=null==i?void 0:i.includes(s.toLocaleLowerCase()))&&void 0!==n&&n})],sortComparers:[g,_]})},[r,v,o,t,n,j,y]),L=S.length>0,R=b.length>0;return{commandResults:S,hasCommandResults:L,applicationResults:b,hasApplicationResults:R,isEmptyState:!L&&!R,loading:C&&s}}function y(e){let{context:t,query:n,fetches:l=!0,pageLimit:a=1/0,entrypoint:c}=e;n.startsWith("".concat(I.GI))&&(n=n.substring(1));let d=c===C._b.VOICE,u="channel"===t.type?t.channel.guild_id:void 0,[m,p]=i.useState(1),h=i.useRef(m);h.current=m;let{fetchState:f,totalPages:N}=(0,r.cj)([x.Z],()=>{var e,t;return{fetchState:x.Z.getFetchState({query:n,guildId:u,page:m,integrationType:o.Y.USER_INSTALL,minUserInstallCommandCount:1,excludeAppsWithCustomInstallUrl:!0,excludeNonEmbeddedApps:d,excludeEmbeddedAppsWithoutPrimaryEntryPointAppCommand:!0,source:s.F.APP_LAUNCHER}),totalPages:null!==(t=null===(e=x.Z.getSearchResults({query:n,guildId:u,page:m,integrationType:o.Y.USER_INSTALL,minUserInstallCommandCount:1,excludeAppsWithCustomInstallUrl:!0,excludeNonEmbeddedApps:d,excludeEmbeddedAppsWithoutPrimaryEntryPointAppCommand:!0,source:s.F.APP_LAUNCHER}))||void 0===e?void 0:e.totalPages)&&void 0!==t?t:0}},[n,u,m,d]),E=i.useMemo(()=>Array.from({length:f===x.M.FETCHED||f===x.M.ERROR?m:m-1},(e,t)=>{var i,l;return null!==(l=null===(i=x.Z.getSearchResults({query:n,guildId:u,page:t+1,integrationType:o.Y.USER_INSTALL,minUserInstallCommandCount:1,excludeAppsWithCustomInstallUrl:!0,excludeNonEmbeddedApps:d,excludeEmbeddedAppsWithoutPrimaryEntryPointAppCommand:!0,source:s.F.APP_LAUNCHER}))||void 0===i?void 0:i.results)&&void 0!==l?l:[]}),[f,u,n,m,d]),A=i.useCallback(()=>{let e=E.length;f===x.M.FETCHED&&e===h.current&&e>0&&e<N&&e<a&&E[e-1].length>0&&(h.current++,p(e=>e+1))},[f,a,E,N]),g=i.useCallback(e=>{let{query:t,page:n,guildId:i}=e;v.yC({query:t,guildId:i,options:{page:n,integrationType:o.Y.USER_INSTALL,minUserInstallCommandCount:1,excludeAppsWithCustomInstallUrl:!0,excludeNonEmbeddedApps:d,excludeEmbeddedAppsWithoutPrimaryEntryPointAppCommand:!0,source:s.F.APP_LAUNCHER}})},[d]);return i.useEffect(()=>{l&&g({query:n,page:m,guildId:u})},[n,u,g,m,l]),i.useEffect(()=>{p(1)},[u,n]),{fetchState:f,applicationResults:E.flat(),fetchNextPage:A}}},695676:function(e,t,n){n.d(t,{gc:()=>a,hH:()=>s,uX:()=>o});var i,l=n(192379),a=((i={}).HOME="home",i.LIST="list",i.APPLICATION="application",i);let o=l.createContext({history:[],discard:{},currentView:void 0,pushHistory:()=>{},goBack:()=>{},getMostRecentHistoryItemByType:()=>void 0,isSlideReady:!1,setSlideReady:()=>{}});function s(){return l.useContext(o)}},421591:function(e,t,n){n.d(t,{Z:()=>C}),n(47120),n(852437);var i=n(200651),l=n(192379),a=n(481060),o=n(100527),s=n(367907),r=n(906732),c=n(541099),d=n(695676),u=n(173790),m=n(361917),p=n(684256),h=n(314734),v=n(981631),x=n(814894);let f={width:h.Gy,height:h.lv},N={height:h.lv},C=l.memo(l.forwardRef(function(e,t){let{context:n,entrypoint:a,initHistory:d}=e,{analyticsLocations:u}=(0,r.ZP)(o.Z.APP_LAUNCHER);return l.useEffect(()=>{(0,s.yw)(v.rMx.APPLICATION_COMMAND_TOP_OF_FUNNEL,{source:a,location:"app_launcher"})},[a]),l.useEffect(()=>{let e=Date.now();return()=>{(0,s.yw)(v.rMx.APP_LAUNCHER_CLOSED,{reason:c.Z.closeReason(),time_spent:Date.now()-e,source:a})}},[a]),(0,i.jsx)("div",{className:x.drawerSizingWrapper,ref:t,style:f,children:(0,i.jsx)("div",{className:x.contentWrapper,children:(0,i.jsx)(r.Gt,{value:u,children:(0,i.jsx)(E,{initHistory:d,children:(0,i.jsx)(A,{context:n,entrypoint:a})})})})})}));function E(e){let{initHistory:t,children:n}=e,[a,o]=l.useState(null!=t?t:[{type:d.gc.HOME}]),[s,r]=l.useState({}),c=a[a.length-1],[u,m]=l.useState(!1),p=l.useCallback(e=>{o(t=>[...t,e])},[]),h=l.useCallback(()=>{let e=null;o(t=>t.length<=1?t:(e=t[t.length-1],t.slice(0,-1))),r(t=>null==e?t:{...t,[e.type]:e})},[]),v=l.useCallback(e=>{var t;return null!==(t=a.findLast(t=>t.type===e))&&void 0!==t?t:s[e]},[a,s]);return(0,i.jsx)(d.uX.Provider,{value:{history:a,discard:s,currentView:c,pushHistory:p,goBack:h,getMostRecentHistoryItemByType:v,isSlideReady:u,setSlideReady:m},children:n})}function A(e){let{context:t,entrypoint:n}=e,[o,s]=l.useState(""),{setScroller:r,isCloseToBottom:c}=function(e){let[t,n]=l.useState(null),[i,a]=l.useState(!1),o=l.useRef(0);return l.useEffect(()=>{null==t||t.scrollTo(0,0)},[t,e]),l.useEffect(()=>{if(null!=t)return t.scrollTo(0,o.current),t.addEventListener("scroll",e),()=>{t.removeEventListener("scroll",e,!1)};function e(){null!=t&&(o.current=t.scrollTop,a(t.scrollHeight-(t.scrollTop+t.clientHeight)<.5*h.K7))}},[t]),{setScroller:n,isCloseToBottom:i}}(o),{currentView:v,getMostRecentHistoryItemByType:f,setSlideReady:C}=(0,d.hH)();l.useEffect(()=>{C(!1)},[null==v?void 0:v.type,C]);let E=l.useCallback(()=>{C(!0)},[C]);if(null==v)return null;let A=f(d.gc.LIST),I=f(d.gc.APPLICATION);return(0,i.jsxs)(a.MyZ,{activeSlide:v.type,width:h.Gy,onSlideReady:E,children:[(0,i.jsx)(a.Mi4,{id:d.gc.HOME,children:(0,i.jsx)("div",{className:x.slideContent,style:N,children:(0,i.jsx)(m.Z,{isScrollCloseToBottom:c,setScroller:r,context:t,entrypoint:n,searchQuery:o,setSearchQuery:s})})}),(0,i.jsx)(a.Mi4,{id:d.gc.LIST,children:(0,i.jsx)("div",{className:x.slideContent,style:N,children:null!=A&&(0,i.jsx)(p.Z,{context:t,entrypoint:n,title:A.title,look:A.look,items:A.items,sectionName:A.sectionName,sectionOverallPosition:A.sectionOverallPosition})})}),(0,i.jsx)(a.Mi4,{id:d.gc.APPLICATION,children:(0,i.jsx)("div",{className:x.slideContent,style:N,children:null!=I&&(0,i.jsx)(u.Z,{context:t,application:I.application,sectionName:I.sectionName})})})]})}},176412:function(e,t,n){n.d(t,{Bm:()=>T,P7:()=>y,ae:()=>j});var i=n(192379),l=n(392711),a=n.n(l),o=n(442837),s=n(25209),r=n(481060),c=n(2052),d=n(542094),u=n(513202),m=n(367907),p=n(213459),h=n(895924),v=n(691424),x=n(428595),f=n(364458),N=n(499254),C=n(541099),E=n(827498),A=n(346683),I=n(981631),g=n(388032);let _={...x.Z.RULES.commandMention,parse:(e,t,n)=>({content:x.Z.RULES.commandMention.parse(e,t,n).content})},P=a().pick((0,f.Z)([x.Z.RULES,{commandMention:_},(0,v.Z)({enableBuildOverrides:!1,enableEmojiClick:!1})]),["commandMention","customEmoji","em","emoji","emoticon","highlight","inlineCode","looseEm","s","strong","text","timestamp","u","spoiler"]),j=s.w4(P);function y(e){let{context:t,application:n,location:l,sectionName:a,commandName:s,autoDismissOnClick:v=!0,launchingComponentId:x,submitting:f=!1,fetchesApplication:_=!0}=e,P=(0,c.O)(),j=(0,d.Qv)({context:t,applicationId:n.id,fetchesApplication:_}),y=(0,A.Q)(j),T=(0,o.e7)([C.Z],()=>C.Z.entrypoint()),S=i.useMemo(()=>{var e,i,l;if("channel"!==t.type)return null!==(l=null===(e=n.bot)||void 0===e?void 0:e.id)&&void 0!==l?l:null===(i=(0,p.If)(t,n.id).descriptor)||void 0===i?void 0:i.botId},[t,n.id,n.bot]),b=(0,d.w1)({applicationId:n.id,botUserIdForAppDM:S,embeddedActivitiesManager:u.Z,context:t,locationObject:P.location,onActivityItemSelectedProp:e=>{let{applicationId:t}=e;v&&N.yT(E.ti.ACTIVITY),(0,m.yw)(I.rMx.APP_LAUNCHER_ACTIVITY_ITEM_SELECTED,{location:l,application_id:t,section_name:a,action:y,source:T})},launchingComponentId:x,commandOrigin:h.bB.APPLICATION_LAUNCHER,sectionName:a,source:T,fetchesApplication:_}),L=r.Ttl.BRAND,R=null!=s?s:g.intl.string(g.t.zKX8Nj);return y===d.JS.JOIN?(L=r.Ttl.GREEN,R=g.intl.string(g.t.d9PsMj)):y!==d.JS.LEAVE||f||(L=r.Ttl.RED,R=g.intl.string(g.t["Hi1/aW"])),{onActivityItemSelected:b,activityAction:y,buttonColor:L,buttonText:R}}function T(e,t){let n=C.Z.entrypoint(),a=i.useMemo(()=>(0,l.debounce)((e,t)=>{(0,m.yw)(I.rMx.APP_LAUNCHER_EMPTY_STATE_ENCOUNTERED,{type:e,source:t})},400,{leading:!1,trailing:!0}),[]);i.useEffect(()=>{null!=e&&a(e,n)},[e,t,n,a])}},570949:function(e,t,n){n.d(t,{P:()=>h,Z:()=>v}),n(47120);var i=n(200651),l=n(481060),a=n(239091),o=n(299206),s=n(276022),r=n(695346),c=n(914010),d=n(499254),u=n(827498),m=n(314734),p=n(388032);function h(e){var t;let{application:n}=e,i=null!==(t=c.Z.getGuildId())&&void 0!==t?t:void 0;return(0,s.Z)({application:n,guildId:i,onItemClick:()=>{(0,l.Mr3)(m.e9),(0,d.yT)(u.ti.DISMISSED)}})}function v(e){let{application:t,onSelect:n}=e,s=r.Sb.useSetting(),c=(0,o.Z)({id:t.id,label:p.intl.string(p.t["+NP/b2"])}),d=h({application:t});return(0,i.jsxs)(l.v2r,{navId:"activity-shelf-item-context",onClose:a.Zy,"aria-label":p.intl.string(p.t.WkcHT0),onSelect:n,children:[null!=d&&(0,i.jsxs)(l.kSQ,{children:[...d]},"manage-app-actions"),s&&(0,i.jsx)(l.kSQ,{children:c},"developer-actions")]})}},98880:function(e,t,n){n.d(t,{U4:()=>H,cG:()=>Q,kA:()=>J,qR:()=>K}),n(47120),n(411104);var i,l=n(200651),a=n(192379),o=n(120356),s=n.n(o),r=n(442837),c=n(481060),d=n(239091),u=n(110924),m=n(607070),p=n(115130),h=n(317381),v=n(361213),x=n(542094),f=n(778569),N=n(182906),C=n(367907),E=n(220082),A=n(70097),I=n(973616),g=n(695103),_=n(880448),P=n(768581),j=n(541099),y=n(783097),T=n(695676),S=n(176412),b=n(226026),L=n(570949),R=n(753972),M=n(981631),Z=n(217702),O=n(388032),k=n(330962),U=n(413097),D=n(969728),H=((i={}).ICON="icon",i.ROW="row",i.NO_BANNER="no_banner",i.MEDIUM_BANNER="medium_banner",i.LARGE_BANNER="large_banner",i);function w(e){var t;let{application:n,look:i="large_banner",onClick:a,imageStyle:o,enableVideoBanner:s=!0,children:r,sectionName:c,resultsPosition:d,sectionOverallPosition:m,tracksImpression:p=!0,disabled:h=!1,overrideImageUrl:v,showsPromoted:x}=e,f=null!==(t=(0,u.Z)(h))&&void 0!==t?t:h;return(0,l.jsx)(V,{application:n,onClick:a,sectionName:c,resultsPosition:d,disabled:h,tracksImpression:p,look:i,sectionOverallPosition:m,children:"icon"===i?(0,l.jsx)(B,{application:n,imageStyle:o,children:r}):(0,l.jsx)(W,{application:n,look:i,imageStyle:o,enableVideoBanner:s,disableBannerFadeIn:f!==h,overrideImageUrl:v,showsPromoted:x,children:r})})}function V(e){let{application:t,onClick:n,children:i,sectionName:o,resultsPosition:r,sectionOverallPosition:u,tracksImpression:m,disabled:p,containerStyle:h,look:v}=e,x=a.useCallback(e=>{if((0,y.BQ)(t)){let n=t instanceof I.ZP?t:I.ZP.createFromServer(t);(0,d.vq)(e,e=>(0,l.jsx)(L.Z,{application:n,...e}))}},[t]),{name:f,description:N}=a.useMemo(()=>(0,y.sl)(t,{fakeAppIconURL:U}),[t]),{trackItemImpressionRef:C}=(0,b.Z)({applicationId:t.id,sectionName:o,sectionPosition:r,sectionOverallPosition:u}),E=a.useMemo(()=>{let e=p?k.containerDisabled:k.container;return s()(e,{[k.containerBorderRadius]:"row"!==v,[k.rowContainer]:"row"===v,[k.iconCard]:"icon"===v},h)},[h,p,v]);return p?(0,l.jsx)("div",{ref:m?C:void 0,className:E,children:i}):(0,l.jsx)(c.P3F,{innerRef:m?C:void 0,className:E,onClick:n,onContextMenu:x,"aria-label":O.intl.formatToPlainString(O.t["zLhr9/"],{applicationName:f,applicationDescription:N}),children:(0,l.jsx)(c.Rny,{children:i})})}function B(e){let{application:t,imageStyle:n,children:i}=e,{name:o,iconURL:r}=a.useMemo(()=>(0,y.sl)(t,{fakeAppIconURL:U}),[t]);return(0,l.jsx)(c.ua7,{tooltipContentClassName:k.tooltipContent,text:o,children:e=>{let{...t}=e;return(0,l.jsxs)("div",{className:s()(k.iconContainer,n),...t,children:[(0,l.jsx)(R.Z,{src:r,className:k.iconCard,"aria-hidden":!0,rendersPlaceholder:!0}),i]})}})}function W(e){let{application:t,look:n,imageStyle:i,enableVideoBanner:o,disableBannerFadeIn:d,children:u,overrideImageUrl:m,showsPromoted:h}=e,{iconURL:v,name:x,description:f}=a.useMemo(()=>(0,y.sl)(t,{fakeAppIconURL:U}),[t]),N=a.useMemo(()=>null==f?null:(0,S.ae)(f),[f]),C=(0,E.ZP)(v,""),[A,I]=a.useState(!1),_=a.useCallback(()=>{!0===o&&I(!0)},[o]),P=h||(0,y.lf)(t),j="large_banner"===n||"medium_banner"===n,T=a.useCallback(()=>I(!1),[]),b=(0,r.e7)([p.Z,g.Z],()=>p.Z.inDevModeForApplication(t.id)||g.Z.inTestModeForApplication(t.id),[t.id]);return(0,l.jsxs)(l.Fragment,{children:[j?(0,l.jsxs)("div",{onMouseEnter:_,onFocus:_,onMouseLeave:T,onBlur:T,className:s()(k.bannerImageContainer,{[k.mediumBanner]:"medium_banner"===n,[k.largeBanner]:"large_banner"===n}),children:[(0,l.jsx)("span",{className:i,children:(0,l.jsx)(z,{application:t,fallbackColor:C,showVideo:A,disableFadeIn:d,overrideImageUrl:m})}),b||P?(0,l.jsxs)("div",{className:k.bannerUpperRightContainer,children:[P&&(0,l.jsx)("div",{className:k.promotedLabelWrapperBanner,children:(0,l.jsx)(c.X6q,{variant:"text-xxs/medium",color:"header-primary",children:O.intl.string(O.t["/eVltr"])})}),b&&(0,l.jsx)(F,{})]}):null,(0,l.jsx)("div",{className:k.bannerImageChildContainer,children:u})]}):null,(0,l.jsxs)("div",{className:s()(k.appDetailsContainer,{[k.appDetailsRowContainer]:"row"===n}),children:[(0,l.jsx)(R.Z,{src:v,className:s()(k.icon,{[k.rowIcon]:"row"===n}),"aria-hidden":!0,rendersPlaceholder:!0}),(0,l.jsxs)("div",{className:k.appDetails,children:[(0,l.jsxs)("div",{className:k.appDetailsHeaderContainer,children:[(0,l.jsx)(c.X6q,{variant:"heading-md/semibold",color:"header-primary",lineClamp:1,children:x}),!j&&P?(0,l.jsx)("div",{className:k.promotedLabelWrapperNonBanner,children:(0,l.jsx)(c.Text,{variant:"text-xxs/semibold",color:"text-muted",children:O.intl.string(O.t["/eVltr"])})}):null,(0,l.jsx)(G,{application:t})]}),(0,l.jsx)(c.Text,{variant:"text-sm/normal",color:"text-secondary",lineClamp:1,children:N})]}),"row"===n?(0,l.jsx)("div",{className:k.rowDivider}):null]})]})}function F(){return(0,l.jsx)(c.ua7,{text:O.intl.string(O.t.CfTySU),children:e=>(0,l.jsx)("div",{className:k.devShelfBadge,...e,children:(0,l.jsx)(_.Z,{className:k.devShelfIcon})})})}function G(e){let{application:t}=e,n=(0,y.yJ)(t);if(null==n||!(0,y.BQ)(t))return null;let i=(0,x.fD)(t,n);return null==i?null:(0,l.jsx)(c.ua7,{text:i,children:e=>(0,l.jsx)("img",{className:k.staffBadge,alt:i,src:D,...e})})}function z(e){let{application:t,fallbackColor:n,showVideo:i,disableFadeIn:a,overrideImageUrl:o}=e;if(null!=o)return(0,l.jsx)("img",{src:o,alt:(0,y.BQ)(t)?t.name:"",className:s()(k.bannerImage,{[k.disableFadeIn]:a})});if((0,y.BQ)(t)){if((0,y.ye)(t))return(0,l.jsx)(Y,{application:t,showVideo:i,disableFadeIn:a});if(null!=t.bot)return(0,l.jsx)(X,{bot:t.bot,fallbackColor:n,disableFadeIn:a})}return(0,l.jsx)(q,{fallbackColor:n,disableFadeIn:a})}function Y(e){let{application:t,showVideo:n,disableFadeIn:i}=e,o=(0,f.Z)({applicationId:t.id,size:600,names:["embedded_cover"]}),r=a.useMemo(()=>{let e=(0,y.yJ)(t);return null!=e&&null!=e.activity_preview_video_asset_id?(0,v.Z)(t.id,e.activity_preview_video_asset_id):null},[t]),[c,d]=a.useState(n);a.useEffect(()=>{n&&d(!0)},[n]);let u=s()(k.bannerImage,{[k.disableFadeIn]:i});return(0,l.jsxs)(l.Fragment,{children:[null!=r&&c?(0,l.jsx)("div",{className:k.activityVideoContainer,children:(0,l.jsx)("div",{className:s()(k.activityVideo,{[k.videoFadeOut]:!n}),onAnimationEnd:()=>n?null:d(!1),children:(0,l.jsx)(A.Z,{src:r,mediaLayoutType:Z.hV.MOSAIC,loop:!0,autoPlay:!0,muted:!0})})}):null,(0,l.jsx)(N.Z,{imageBackground:o,applicationName:t.name,imageClassName:u,imageNotFoundClassName:u})]})}function X(e){let{bot:t,fallbackColor:n,disableFadeIn:i}=e,a=(0,r.e7)([m.Z],()=>m.Z.useReducedMotion),o=(0,P.aN)({id:t.id,banner:t.banner,canAnimate:!a,size:600});return null==o?(0,l.jsx)(q,{fallbackColor:n,disableFadeIn:i}):(0,l.jsx)("img",{src:o,alt:"",className:s()(k.bannerImage,{[k.disableFadeIn]:i})})}function q(e){let{fallbackColor:t,disableFadeIn:n}=e;return(0,l.jsx)("div",{className:s()(k.bannerImage,{[k.disableFadeIn]:n}),style:{backgroundColor:t}})}function Q(e){let{application:t,sectionName:n,resultsPosition:i,query:l,installOnDemand:o,location:s}=e,{pushHistory:r}=(0,T.hH)();return a.useCallback(e=>{e.stopPropagation(),(0,C.yw)(M.rMx.APPLICATION_COMMAND_SECTION_SELECTED,{application_id:t.id,section_name:n,search_results_position:i,source:j.Z.entrypoint(),location:s,query:l}),r({type:T.gc.APPLICATION,application:t,installOnDemand:o,sectionName:n})},[t,o,s,r,l,i,n])}function J(e){let t=Q(e);return(0,l.jsx)(w,{...e,onClick:t})}function K(e){let{context:t,application:n,location:i,sectionName:o,isOneClickCTA:s,fetchesApplication:d=!0,...u}=e;if(!(0,y.BQ)(n))throw Error("PerformActivityActionAppCard was passed the Built-in App, which is not supported.");let m=a.useId(),[p,v]=(0,r.Wu)([h.ZP],()=>[h.ZP.isLaunchingActivity(),h.ZP.getLaunchState(n.id,"channel"===t.type?t.channel.id:void 0)]),f=null!=v&&v.isLaunching&&v.componentId===m,{onActivityItemSelected:N,activityAction:C,buttonColor:E,buttonText:A}=(0,S.P7)({context:t,application:n,location:i,sectionName:o,launchingComponentId:m,fetchesApplication:d});return C===x.JS.START||C===x.JS.JOIN?s?(0,l.jsx)(w,{...u,sectionName:o,application:n,onClick:N,disabled:p,enableVideoBanner:!f,children:f?(0,l.jsx)(c.$jN,{type:c.$jN.Type.PULSING_ELLIPSIS,className:k.spinner}):null}):(0,l.jsx)(J,{...u,context:t,sectionName:o,application:n,location:i}):(0,l.jsx)(w,{...u,sectionName:o,application:n,onClick:e=>{e.stopPropagation()},imageStyle:k.darkenImage,enableVideoBanner:!1,disabled:!0,children:(0,l.jsx)("div",{className:k.voiceLauncherAppCardContainer,children:(0,l.jsx)(c.zxk,{className:k.voiceLauncherAppCardButton,type:"submit",size:c.zxk.Sizes.LARGE,color:E,disabled:p,onClick:N,"aria-label":O.intl.formatToPlainString(O.t["XjP/R0"],{buttonText:A,applicationName:n.name}),submitting:f,children:A})})})}},772606:function(e,t,n){n.d(t,{Z:()=>u});var i=n(200651),l=n(192379),a=n(120356),o=n.n(a),s=n(481060),r=n(695676),c=n(388032),d=n(660954);function u(e){let{className:t}=e,{goBack:n}=(0,r.hH)(),a=l.useCallback(()=>{n()},[n]);return(0,i.jsx)(s.P3F,{onClick:a,className:o()(d.clickable,t),"aria-label":c.intl.string(c.t.ybUZqq),children:(0,i.jsx)(s.j9r,{size:"sm",color:s.TVs.colors.INTERACTIVE_ACTIVE})})}},804307:function(e,t,n){n.d(t,{Z:()=>m});var i=n(200651),l=n(192379),a=n(120356),o=n.n(a),s=n(442837),r=n(481060),c=n(607070),d=n(98880),u=n(61474);function m(e){let{look:t=d.U4.LARGE_BANNER}=e,n=(0,s.e7)([c.Z],()=>c.Z.useReducedMotion),{styleLarge:a,styleSmall:m}=l.useMemo(()=>({styleLarge:{width:"".concat(10+50*Math.random(),"%")},styleSmall:{width:"".concat(30+60*Math.random(),"%")}}),[]);return(0,i.jsxs)("div",{className:o()(u.container,u.loadingAnimation,{[u.noAnimation]:n,[u.containerBorderRadius]:t!==d.U4.ROW,[u.rowContainer]:t===d.U4.ROW}),children:[(0,i.jsx)("div",{className:o()(u.bannerImage,{[u.mediumBanner]:t===d.U4.MEDIUM_BANNER,[u.largeBanner]:t===d.U4.LARGE_BANNER})}),(0,i.jsxs)("div",{className:o()(u.appDetailsContainer,{[u.appDetailsRowContainer]:t===d.U4.ROW}),children:[(0,i.jsx)("div",{className:o()(u.iconPlaceholder,{[u.rowIconPlaceholder]:t===d.U4.ROW})}),(0,i.jsxs)("div",{className:u.textContainer,children:[(0,i.jsx)("div",{className:u.textPlaceholder,style:a,children:(0,i.jsx)(r.X6q,{className:u.hidden,variant:"heading-md/semibold",color:"header-primary",lineClamp:1,children:"_"})}),(0,i.jsx)("div",{className:u.textPlaceholder,style:m,children:(0,i.jsx)(r.Text,{className:u.hidden,variant:"text-sm/normal",color:"text-secondary",lineClamp:1,children:"_"})})]}),t===d.U4.ROW&&(0,i.jsx)("div",{className:u.rowDivider})]})]})}},312871:function(e,t,n){n.d(t,{Z:()=>a});var i=n(192379),l=n(434650);function a(e){let{onVisible:t,threshold:n,minTimeVisibleMs:a}=e,o=i.useRef(!1),s=i.useRef(null);return i.useEffect(()=>()=>{null!=s.current&&(clearTimeout(s.current),s.current=null)},[]),(0,l.O)(e=>{if(null==s.current||e||!1!==o.current||(clearTimeout(s.current),s.current=null),!e||!0===o.current)return;let n=()=>{t(),o.current=!0,s.current=null};null!=a?s.current=setTimeout(n,a):n()},n)}},226026:function(e,t,n){n.d(t,{Z:()=>r});var i=n(990547),l=n(442837),a=n(213609),o=n(541099),s=n(312871);function r(e){let{applicationId:t,sectionName:n,sectionPosition:r,sectionOverallPosition:c}=e,d=(0,l.e7)([o.Z],()=>o.Z.entrypoint());return{trackItemImpressionRef:(0,s.Z)({onVisible:()=>{(0,a.h)({type:i.ImpressionTypes.VIEW,name:i.ImpressionNames.APP_LAUNCHER_ITEM,properties:{application_id:t,section_name:n,section_position:r,section_overall_position:c,source:d}})},threshold:.5,minTimeVisibleMs:1e3})}}},532309:function(e,t,n){n.d(t,{Z:()=>r});var i=n(990547),l=n(442837),a=n(213609),o=n(541099),s=n(312871);function r(e){let{applicationId:t,commandId:n,searchResultsPosition:r,query:c}=e,d=(0,l.e7)([o.Z],()=>o.Z.entrypoint());return{trackSearchResultsItemImpressionRef:(0,s.Z)({onVisible:()=>{(0,a.h)({type:i.ImpressionTypes.VIEW,name:i.ImpressionNames.APP_LAUNCHER_SEARCH_RESULTS_ITEM,properties:{application_id:t,command_id:n,search_results_position:r,query:c,source:d}})},threshold:1})}}},888617:function(e,t,n){n.d(t,{Z:()=>s});var i=n(990547),l=n(213609),a=n(541099),o=n(312871);function s(e){let{sectionName:t,numItems:n,numVisibleItems:s}=e;return{trackSectionImpressionRef:(0,o.Z)({onVisible:()=>{(0,l.h)({type:i.ImpressionTypes.VIEW,name:i.ImpressionNames.APP_LAUNCHER_SECTION,properties:{section_name:t,num_items:n,num_visible_items:s,source:a.Z.entrypoint()}})},threshold:1})}}},387658:function(e,t,n){n.d(t,{Z:()=>w}),n(47120);var i=n(200651),l=n(192379),a=n(120356),o=n.n(a),s=n(140835),r=n(246521),c=n(442837),d=n(481060),u=n(911969),m=n(607070),p=n(555573),h=n(213459),v=n(10718),x=n(895924),f=n(583027),N=n(585483),C=n(499254),E=n(541099),A=n(827498),I=n(496158),g=n(676161),_=n(660090),P=n(783097),j=n(46332),y=n(176412),T=n(870205),S=n(981631),b=n(689079),L=n(388032),R=n(61474),M=n(616362);let Z="placeholder",O=[,,,,,].fill(Z);function k(e){var t,n;let{context:a,command:o,section:r,sectionName:c}=e,u=l.useCallback(()=>{let e=E.Z.entrypoint();C.yT(A.ti.COMMAND),(0,f.Mo)({command:o,location:x.Vh.APP_LAUNCHER_APPLICATION_VIEW,sectionName:c}),"channel"===a.type&&(p.Po({channelId:a.channel.id,command:o,section:r,location:x.Vh.APP_LAUNCHER_APPLICATION_VIEW,sectionName:c,source:e,commandOrigin:x.bB.APPLICATION_LAUNCHER}),N.S.dispatch(S.CkL.FOCUS_CHANNEL_TEXT_AREA,{channelId:a.channel.id}))},[a,o,r,c]),m=(null!==(n=null===(t=o.options)||void 0===t?void 0:t.length)&&void 0!==n?n:0)>0,h=l.useMemo(()=>(0,y.ae)(o.displayDescription,void 0),[o.displayDescription]),v=l.useMemo(()=>(0,i.jsxs)("div",{className:M.commandTextContainer,children:[(0,i.jsx)(d.Text,{variant:"text-sm/semibold",color:"header-primary",children:o.displayName}),(0,i.jsx)(d.Text,{variant:"text-xs/medium",color:"text-muted",lineClamp:1,children:h})]}),[o.displayName,h]);return(0,i.jsxs)(d.P3F,{className:M.command,onClick:u,children:[(0,i.jsx)(d.Rny,{className:M.commandFocusBlock,children:v}),m?(0,i.jsx)(s.F,{}):(0,i.jsx)(D,{context:a,command:o,sectionName:c})]})}function U(){let e=(0,c.e7)([m.Z],()=>m.Z.useReducedMotion),{styleLarge:t,styleSmall:n}=l.useMemo(()=>({styleLarge:{width:"".concat(10+20*Math.random(),"%"),height:"auto"},styleSmall:{width:"".concat(30+60*Math.random(),"%"),height:"auto"}}),[]),a=l.useMemo(()=>(0,i.jsxs)("div",{className:M.commandTextContainerPlaceholder,children:[(0,i.jsx)("div",{className:R.textPlaceholder,style:t,children:(0,i.jsx)(d.Text,{className:R.hidden,variant:"text-sm/semibold",color:"header-primary",lineClamp:1,children:"_"})}),(0,i.jsx)("div",{className:R.textPlaceholder,style:n,children:(0,i.jsx)(d.Text,{className:R.hidden,variant:"text-xs/medium",color:"text-muted",lineClamp:1,children:"_"})})]}),[t,n]);return(0,i.jsx)("div",{className:o()(M.command,R.loadingAnimation,{[R.noAnimation]:e}),children:a})}function D(e){let{context:t,command:n,sectionName:a}=e;(0,h.PL)(!0,!0),(0,h.em)(t,!0,!0);let o=(0,I.D)(t),[s,c]=l.useState(!1),u=l.useCallback(async e=>{if("channel"!==t.type)return;e.stopPropagation();let i=E.Z.lastShownEntrypoint();try{await (0,j.L)({applicationId:n.applicationId,channel:t.channel,sectionName:a,location:x.Vh.APP_LAUNCHER_APPLICATION_VIEW,entrypoint:i,commandIntegrationTypes:n.integration_types})&&(await (0,P.Y$)({command:n,optionValues:{},context:o,sectionName:a,commandOrigin:x.bB.APP_LAUNCHER_APPLICATION_VIEW}),C.yT(A.ti.COMMAND))}finally{c(!1)}},[n,t,a,o]);return(0,i.jsxs)(d.zxk,{type:"submit",onClick:u,disabled:s,size:d.PhG.ICON,color:d.zxk.Colors.PRIMARY,className:M.commandSentCTAButton,innerClassName:M.commandSentCTAButtonInner,"aria-label":L.intl.formatToPlainString(L.t.UXw6W1,{commandName:n.untranslatedName}),children:[(0,i.jsx)(d.Text,{variant:"text-sm/medium",color:"currentColor",children:L.intl.string(L.t.TXNS7e)}),(0,i.jsx)(r.U,{size:"xs",color:"currentColor"})]})}function H(e){let{context:t,commands:n,section:l,headerName:a,sectionName:o,children:s}=e;return 0===n.length?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:M.commandListHeader,children:[(0,i.jsx)(d.X6q,{variant:"heading-sm/semibold",children:a}),s]}),(0,i.jsx)("ul",{className:M.commandContainer,"aria-label":a,children:n.map((e,n)=>e===Z?(0,i.jsx)(U,{},e+n):(0,i.jsx)(k,{context:t,command:e,section:l,sectionName:o},e.id))})]})}function w(e){var t;let{context:n,application:a,sectionName:o,installOnDemand:s,setHasCommands:r}=e,{filterSection:c,commandsByActiveSection:d,sectionDescriptors:m,loading:p}=v.wi({context:n,filters:{commandTypes:[u.yU.CHAT]},options:{placeholderCount:0,limit:b.tn,includeFrecency:!0,allowApplicationState:s,installOnDemand:s,applicationId:a.id},allowFetch:!0}),h=null!==(t=m.find(e=>e.id===a.id))&&void 0!==t?t:null,{sortOrder:x,setSortOrder:f,commands:N,canSort:C}=(0,_.Z)({sectionId:a.id,commandsByActiveSection:d});l.useEffect(()=>{c(a.id)},[a.id,c]);let E=(0,g.Z)({context:n,commands:N,limit:5});return(l.useEffect(()=>{r(N.length>0)},[r,N]),p||0!==N.length)?(0,i.jsxs)("ul",{className:M.contentContainer,children:[(0,i.jsx)(H,{context:n,section:h,commands:E,headerName:L.intl.string(L.t.acSE0t),sectionName:o}),(0,i.jsx)(H,{context:n,section:h,commands:p?O:N,headerName:L.intl.string(L.t.DUU9Ly),sectionName:o,children:C&&(0,i.jsx)(T.Z,{sortOrder:x,onSortOptionClick:f})})]}):null}},536650:function(e,t,n){n.d(t,{Z:()=>f}),n(47120);var i=n(200651),l=n(192379),a=n(392711),o=n(780384),s=n(481060),r=n(410030),c=n(220082),d=n(564334),u=n(302221),m=n(783097),p=n(772606),h=n(488977),v=n(867020);function x(e){let[t,n]=l.useState(void 0);return l.useEffect(()=>{null!=e.current&&n(getComputedStyle(e.current))},[e]),t}function f(e){let{application:t,context:n,name:f,iconURL:N,scrollerRef:C,sectionName:E}=e,A=(0,o.ap)((0,r.ZP)()),I=l.useRef(null),g=l.useRef(null),_=l.useRef(null),P=l.useRef(null),j=(0,s.dQu)(s.TVs.colors.BG_BASE_PRIMARY).hex(),y=(0,c.ZP)("number"==typeof N?"":N,null!=j?j:""),T=l.useMemo(()=>{var e,t;let n=(0,a.compact)([d.Z.parseHexString(y),d.Z.parseHexString(A?"#000000":"#ffffff")]);return null!==(t=null===(e=(0,u.k8)({colors:n,ratio:5,saturationFactor:.6}))||void 0===e?void 0:e.toHexString())&&void 0!==t?t:y},[y,A]),S=x(I),b=x(g),L=l.useCallback(()=>{var e,t,n,i;let l=C.current,o=I.current,s=_.current,r=null==P?void 0:P.current,c=parseInt(null!==(e=null==S?void 0:S.height)&&void 0!==e?e:""),d=parseInt(null!==(t=null==b?void 0:b.height)&&void 0!==t?t:"");if(null!=l&&null!=o&&null!=s&&!isNaN(c)&&!isNaN(d)){let e=null!==(n=l.scrollTop)&&void 0!==n?n:0,t=0!==l.scrollHeight?l.scrollHeight:d+20,u=0!==l.clientHeight?l.clientHeight:d+20,m=d-c,p=(0,a.clamp)(t-u,m+1,d+20),h=m===p?1:(0,a.clamp)((e-m)/(p-m),0,1);o.style.filter="brightness(".concat(1+((A?1.4:.6)-1)*h,")"),o.style.backgroundColor="color-mix(in oklab,".concat(y," ").concat((1-h)*100,"%, ").concat(T,")"),s.style.opacity="".concat(0+1*h),s.style.transform="translateY(".concat((i=c/4)+(0-i)*h,"px)"),null!=r&&(r.style.opacity="".concat(1+-1*h))}},[T,y,null==b?void 0:b.height,A,C,null==S?void 0:S.height]);return l.useEffect(()=>{L()},[L,A]),l.useEffect(()=>{let e=C.current,t=()=>{L()};return null==e||e.addEventListener("scroll",t),()=>{null==e||e.removeEventListener("scroll",t)}},[C,L]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:v.stickyContainer,children:[(0,i.jsx)("div",{className:v.stickyBannerContainer,children:(0,i.jsx)("div",{className:v.stickyBanner,ref:I})}),(0,i.jsx)("div",{className:v.backButtonContainer,children:(0,i.jsx)(p.Z,{className:v.headerButton})}),(0,i.jsx)("div",{className:v.nameContainer,children:(0,i.jsx)(s.X6q,{ref:_,className:v.textApplicationName,variant:"heading-lg/extrabold",children:f})})]}),(0,m.BQ)(t)?(0,i.jsx)("div",{ref:P,className:v.moreMenuButtonContainer,children:(0,i.jsx)(h.Z,{application:t,context:n,className:v.headerButton,sectionName:E})}):null,(0,i.jsx)("div",{ref:g,className:v.bannerBackground,style:{backgroundColor:y}})]})}},675993:function(e,t,n){n.d(t,{Z:()=>T}),n(47120);var i=n(200651),l=n(192379),a=n(120356),o=n.n(a),s=n(442837),r=n(481060),c=n(115130),d=n(147865),u=n(427996),m=n(906732),p=n(706302),h=n(812236),v=n(835473),x=n(70097),f=n(240991),N=n(973616),C=n(592125),E=n(783097),A=n(695676),I=n(520315),g=n(29380),_=n(783685),P=n(388032),j=n(580062),y=n(665162);function T(e){let{context:t,application:n,videoUrl:a,imageCoverUrl:r,sectionName:d,hasCommands:m}=e,p=l.useMemo(()=>{var e;return null!==(e=(0,E.jD)(n))&&void 0!==e?e:""},[n]),h=(0,s.e7)([c.Z],()=>c.Z.inDevModeForApplication(n.id)),v=null!=a,f=l.useMemo(()=>{if("contextless"===t.type&&(0,E.BQ)(n)){var e;let t=C.Z.getDMFromUserId(null===(e=n.bot)||void 0===e?void 0:e.id);return null!=t?C.Z.getChannel(t):void 0}return t.channel},[t,n]),{isSlideReady:N}=(0,A.hH)(),[I,g]=l.useState(!1);l.useEffect(()=>{N&&g(!0)},[N]);let _=null!=f?{channel:f,type:"channel"}:void 0;return(0,i.jsxs)("div",{className:j.container,children:[(0,i.jsxs)("div",{children:[v?(0,i.jsxs)("div",{className:j.videoContainer,children:[I?(0,i.jsx)(x.Z,{className:o()(j.videoCover,j.video),loop:!0,muted:!0,autoPlay:!0,src:a,poster:r}):null,(0,i.jsx)("img",{className:j.videoCover,src:r,"aria-label":P.intl.string(P.t.X4IxWF)})]}):null,(0,i.jsxs)("div",{className:v?j.overviewContainerWithVideo:j.overviewContainerNoVideo,children:[(0,i.jsx)(b,{application:n}),(0,i.jsx)(L,{application:n}),p.length>0?(0,i.jsx)(Z,{description:p}):null,h?(0,i.jsx)("div",{className:j.developerShelfControlsContainer,children:(0,i.jsx)(u.W,{hideSearch:!0,className:j.developerShelfControls})}):null,null!=_?(0,i.jsx)(M,{context:_,application:n,sectionName:d,isDeveloperOfThisApp:h,hasCommands:m}):null]})]}),(0,i.jsx)(S,{application:n})]})}function S(e){let{application:t}=e,n=(0,E.Cb)(t),l=(0,E.Hu)(t);return n||l?(0,i.jsxs)("div",{className:j.monetizationDisclosureContainerStyle,children:[n?(0,i.jsxs)("div",{className:j.monetizationDisclosureStyle,children:[(0,i.jsx)(r.EOn,{size:"sm",color:r.TVs.colors.INTERACTIVE_MUTED}),(0,i.jsx)(r.Text,{variant:"text-sm/normal",color:"text-secondary",children:P.intl.string(P.t["8z5B2d"])})]}):null,l?(0,i.jsxs)("div",{className:j.monetizationDisclosureStyle,children:[(0,i.jsx)(r.uMN,{size:"sm",color:r.TVs.colors.INTERACTIVE_MUTED}),(0,i.jsx)(r.Text,{variant:"text-sm/normal",color:"text-secondary",children:P.intl.string(P.t["5khEk5"])})]}):null]}):null}function b(e){var t;let{application:n}=e,l=(0,E.BQ)(n)?n.name:null!==(t=(0,E.$d)(n))&&void 0!==t?t:"",a=(0,E.vJ)(n);return(0,i.jsxs)("div",{className:j.titleContainer,children:[(0,i.jsx)(r.X6q,{variant:"heading-xl/extrabold",lineClamp:1,children:l}),a?(0,i.jsx)("div",{className:j.partnerLabelContainer,children:(0,i.jsx)(r.Text,{variant:"text-xs/medium",color:"text-normal",children:P.intl.string(P.t.LO4f0N)})}):null]})}function L(e){let{application:t}=e,n=l.useMemo(()=>{var e;return(0,E.BQ)(t)&&null!==(e=null==t?void 0:t.tags)&&void 0!==e?e:[]},[t]);return(0,E.ye)(t)?(0,i.jsxs)("div",{className:j.tagsContainer,children:[(0,i.jsx)(R,{application:t}),n.map((e,t)=>(0,i.jsx)("div",{className:j.tagContainer,children:(0,i.jsx)(r.Text,{variant:"text-sm/semibold",color:"interactive-normal",children:e})},e+t))]}):null}function R(e){var t;let{application:n}=e;if(!(0,E.ye)(n))return null;let l=null!==(t=(0,E.BQ)(n)?n instanceof N.ZP?n.maxParticipants:n.max_participants:0)&&void 0!==t?t:0;return(0,i.jsxs)("div",{className:j.tagContainer,children:[(0,i.jsx)(r.BFJ,{size:"xs",color:r.TVs.colors.INTERACTIVE_NORMAL}),(0,i.jsx)(r.Text,{variant:"text-sm/semibold",color:"interactive-normal",children:(0,d.lY)(l)})]})}function M(e){var t;let{context:n,application:l,sectionName:a,hasCommands:o,isDeveloperOfThisApp:s}=e,c=(0,h.Fs)(n,l.id),d=(0,v.q)(l.id),u=null==d?void 0:null===(t=d.bot)||void 0===t?void 0:t.id,x=(0,p.Z)({context:n,applicationId:l.id,botUserId:u}),{analyticsLocations:f}=(0,m.ZP)();if(!(0,E.BQ)(l)||!(0,E.ye)(l))return null;let N=r.PhG.MAX;return null!=c&&null!=u?(0,i.jsxs)("div",{className:j.entrypointContainer,children:[(0,i.jsx)("div",{className:j.entryPointContainerFlexChild,children:(0,i.jsx)(g.Z,{context:n,application:l,sectionName:a,primaryEntryPointCommand:c,buttonSize:N})}),x&&null!=u?(0,i.jsx)("div",{className:j.entryPointContainerFlexChild,children:(0,i.jsx)(_.Z,{botUserId:u,applicationId:l.id,buttonSize:N,analyticsLocations:f})}):null]}):s&&!o&&(0,E.ye)(l)?(0,i.jsx)(r.Wn,{className:j.primaryEntryPointWarningMessage,messageType:r.QYI.WARNING,children:P.intl.format(P.t["s/3hjI"],{})}):null}function Z(e){let{description:t}=e,[n,a]=l.useState(!0);l.useLayoutEffect(()=>a(!1),[]);let o=l.useMemo(()=>(0,f.parseBioReact)(t),[t]),{ref:s,lineHeight:c,lineCount:d}=function(){let e=l.useRef(null),[t,n]=l.useState(null),[i,a]=l.useState(null);return l.useLayoutEffect(()=>{let t=e.current;if(null===t||0===t.clientHeight)return;let i=parseInt(getComputedStyle(t).lineHeight);!isNaN(i)&&(n(i),a(Math.floor(t.clientHeight/i)))},[]),{ref:e,lineHeight:t,lineCount:i}}(),u=l.useMemo(()=>{if(null==c||null==d)return{key:0};let e=c*d;return{key:1,minHeightOverride:Math.min(e,1*c),maxHeightOverride:e}},[d,c]),{ref:m,isTransitioning:p,onTransitionEnd:h}=(0,I.Z)({isExpanded:n,...u}),v=n||p;return(0,i.jsxs)("div",{className:j.descriptionContainer,children:[(0,i.jsx)("div",{ref:m,className:j.overflowHidden,onTransitionEnd:h,children:(0,i.jsx)(r.Text,{ref:s,className:y.markup,variant:"text-sm/medium",lineClamp:v?void 0:1,style:{maxHeight:v?void 0:u.minHeightOverride},children:o})}),null!=d&&d>1?(0,i.jsxs)(r.P3F,{className:j.expandableDescriptionClickable,onClick:()=>a(e=>!e),children:[(0,i.jsx)(r.Text,{variant:"text-sm/semibold",color:"text-brand",children:v?P.intl.string(P.t.u4YJ8v):P.intl.string(P.t["N/tajI"])}),v?(0,i.jsx)(r.u04,{size:"sm",color:r.TVs.colors.TEXT_BRAND}):(0,i.jsx)(r.CJ0,{size:"sm",color:r.TVs.colors.TEXT_BRAND})]}):null]})}},173790:function(e,t,n){n.d(t,{Z:()=>g}),n(47120);var i=n(200651),l=n(192379),a=n(442837),o=n(218061),s=n(481060),r=n(361213),c=n(778569),d=n(213459),u=n(835473),m=n(541099),p=n(827498),h=n(783097),v=n(753972),x=n(387658),f=n(536650),N=n(675993),C=n(689079),E=n(388032),A=n(370913),I=n(413097);function g(e){var t;let{context:n,application:r,sectionName:c}=e,g="channel"===n.type?n.channel:void 0,P=(0,a.e7)([m.Z],()=>m.Z.entrypoint()),j=null!==(t=(0,u.q)(r.id===C.bi.BUILT_IN?null:r.id))&&void 0!==t?t:r,y=(0,h.ye)(j)?_:N.Z,T=l.useRef(null),[S,b]=l.useState(!1),{iconURL:L,name:R}=l.useMemo(()=>(0,h.sl)(j,{fakeAppIconURL:I,size:84}),[j]),M=(0,d.PL)(!0,!0),Z=(0,d.LD)(null==g?void 0:g.guild_id,!0),O=l.useMemo(()=>(0,d.If)(n,j.id),[M,Z,n,j.id]),k=!O.isGuildInstalled&&!O.isUserInstalled;return l.useEffect(()=>{k&&d.ZP.queryInstallOnDemandApp(j.id,null==g?void 0:g.id)},[j.id,null==g?void 0:g.id,k]),(0,i.jsxs)(s.u2D,{className:A.container,fade:!0,ref:T,role:"region","aria-label":E.intl.formatToPlainString(E.t["4OP4Ul"],{applicationName:R}),children:[(0,i.jsx)(f.Z,{application:j,context:n,name:R,iconURL:L,scrollerRef:T,sectionName:c}),null!=L&&(0,i.jsx)(v.Z,{src:L,className:A.appIcon}),(0,i.jsx)(o.Z,{size:54}),(0,i.jsx)(y,{context:n,application:j,sectionName:c,hasCommands:S}),P===p._b.TEXT?(0,i.jsx)(x.Z,{context:n,application:j,sectionName:c,installOnDemand:k,setHasCommands:b}):null]})}function _(e){let{context:t,application:n,sectionName:l,hasCommands:a}=e,o=(0,c.Z)({applicationId:n.id,size:2048,names:["embedded_cover"]}),s=(0,h.yJ)(n),d=null!=s&&null!=s.activity_preview_video_asset_id?(0,r.Z)(n.id,s.activity_preview_video_asset_id):null;return(0,i.jsx)(N.Z,{context:t,application:n,imageCoverUrl:o.url,videoUrl:d,sectionName:l,hasCommands:a})}},488977:function(e,t,n){n.d(t,{Z:()=>y}),n(789020);var i=n(200651),l=n(120356),a=n.n(l),o=n(442837),s=n(481060),r=n(367907),c=n(895924),d=n(311819),u=n(299206),m=n(726721),p=n(726521),h=n(973616),v=n(594174),x=n(626135),f=n(572004),N=n(630388),C=n(135431),E=n(541099),A=n(783097),I=n(570949),g=n(314734),_=n(981631),P=n(388032),j=n(472033);function y(e){var t;let{application:n,context:l,className:y,sectionName:T}=e,S=(0,o.e7)([E.Z],()=>E.Z.entrypoint()),b=(0,A.L1)(n),L=(0,C.Eb)(b),R={location:c.Vh.APP_LAUNCHER_APPLICATION_VIEW_MORE_MENU,application_id:n.id,section_name:T,source:E.Z.lastShownEntrypoint()},M=v.default.getCurrentUser(),Z=m.Z.useExperiment({location:c.Vh.APP_LAUNCHER_APPLICATION_VIEW_MORE_MENU},{autoTrackExposure:!0}).enabled,O=(0,u.Z)({id:n.id,label:P.intl.string(P.t["+NP/b2"])}),k=(0,I.P)({application:n}),U=(0,N.yE)(null!==(t=n.flags)&&void 0!==t?t:0,_.udG.EMBEDDED),D="channel"===l.type?l.channel:void 0;return(0,i.jsxs)("div",{className:j.container,children:[(0,i.jsx)(s.P3F,{onClick:()=>{let e=U?(0,d.H)({applicationId:n.id,referrerId:null==M?void 0:M.id}):(0,d.J)({id:n.id,...b});(0,f.JG)(e),x.default.track(_.rMx.APP_LAUNCHER_APPLICATION_LINK_COPIED,{application_id:n.id,source:S}),(0,s.showToast)((0,s.createToast)(P.intl.string(P.t["L/PwZW"]),s.ToastType.SUCCESS))},className:a()(j.clickable,y),"aria-label":P.intl.string(P.t.WqhZsr),children:(0,i.jsx)(s.xPt,{size:"sm",color:s.TVs.colors.INTERACTIVE_ACTIVE})}),(0,i.jsx)(s.yRy,{renderPopout:e=>{let{closePopout:t}=e;return(0,i.jsxs)(s.v2r,{className:g.NN,navId:"app-details-more-menu",onClose:t,"aria-label":P.intl.string(P.t.AXIHpa),onSelect:void 0,children:[(0,i.jsxs)(s.kSQ,{children:[L?(0,i.jsx)(s.sNh,{id:"add-app",label:P.intl.string(P.t.NgXl3N),action:()=>{null==b.customInstallUrl&&(0,r.yw)(_.rMx.APP_LAUNCHER_OAUTH2_AUTHORIZE_OPENED,R),(0,C.LO)({...b,oauth2Callback:e=>{let{location:t}=e;null!=t&&(0,r.yw)(_.rMx.APP_LAUNCHER_OAUTH2_AUTHORIZE_SUCCEEDED,R)},source:"app_launcher_app_details"})}}):null,Z&&n instanceof h.ZP?(0,i.jsx)(s.sNh,{id:"report-app",color:"danger",label:P.intl.string(P.t.jhJze3),action:()=>{var e;(0,p.uu)({application:n,entrypoint:"app_launcher",contextualGuildId:null!==(e=null==D?void 0:D.getGuildId())&&void 0!==e?e:void 0,contextualChannelId:null==D?void 0:D.id})}}):null,k]}),(0,i.jsx)(s.kSQ,{children:O})]})},align:"right",position:"bottom",children:e=>(0,i.jsx)(s.P3F,{onClick:e.onClick,className:a()(j.clickable,y),"aria-label":P.intl.string(P.t.UKOtz8),children:(0,i.jsx)(s.xhG,{size:"sm",color:s.TVs.colors.INTERACTIVE_ACTIVE})})})]})}},29380:function(e,t,n){n.d(t,{Z:()=>N}),n(47120);var i=n(200651),l=n(192379),a=n(481060),o=n(542094),s=n(895924),r=n(626135),c=n(499254),d=n(827498),u=n(160973),m=n(783097),p=n(890280),h=n(176412),v=n(981631),x=n(388032),f=n(129571);function N(e){let{context:t,application:n,sectionName:N,primaryEntryPointCommand:C,buttonSize:E=a.PhG.MEDIUM}=e,A=l.useId(),I=l.useCallback(()=>{c.yT(d.ti.ACTIVITY)},[]),{submitting:g,wasSubmitting:_}=(0,p.Z)({applicationId:n.id,context:t,launchingComponentId:A,onSubmissionComplete:I}),[P,j]=l.useState(!1),y=(0,o.Qv)({applicationId:n.id,context:t}),T=l.useMemo(()=>(0,m.XZ)(C.displayName),[C.displayName]),{onActivityItemSelected:S,buttonColor:b,buttonText:L}=(0,h.P7)({context:t,application:n,location:s.Vh.APP_LAUNCHER_APPLICATION_VIEW,sectionName:N,commandName:T,autoDismissOnClick:y===o.JS.LEAVE,launchingComponentId:A,submitting:null!=_?_:g}),{disabled:R,reason:M}=(0,u.Z)({context:t,application:n,activityAction:y});return(0,i.jsx)(a.ua7,{shouldShow:null!=M,tooltipContentClassName:f.tooltipContent,text:M,children:e=>{let{onClick:t,...l}=e;return(0,i.jsx)(a.zxk,{...l,type:"submit",size:E,color:b,disabled:R,submitting:P,onClick:()=>{j(!0),S(),null==t||t(),r.default.track(v.rMx.APP_DETAIL_PAGE_ENTRY_POINT_COMMAND_BUTTON_CLICKED,{application_id:n.id,button_action:d._y.USE_APP_COMMAND})},"aria-label":x.intl.formatToPlainString(x.t["XjP/R0"],{buttonText:L,applicationName:n.name}),children:L})}})}},783685:function(e,t,n){n.d(t,{Z:()=>u}),n(47120);var i=n(200651),l=n(192379),a=n(481060),o=n(626135),s=n(827498),r=n(606192),c=n(981631),d=n(388032);function u(e){let{botUserId:t,applicationId:n,buttonSize:u,analyticsLocations:m}=e,[p,h]=l.useState(!1),v=l.useRef(null),x=l.useCallback(async()=>{o.default.track(c.rMx.APP_DETAIL_PAGE_ENTRY_POINT_COMMAND_BUTTON_CLICKED,{application_id:n,button_action:s._y.OPEN_APP_DM}),h(!0);try{await (0,r.W)({appId:n,botId:t,analyticsLocations:m})}catch(e){}clearTimeout(v.current),h(!1)},[t,n,m]);return(0,i.jsx)(a.zxk,{type:"submit",size:u,color:a.zxk.Colors.PRIMARY,submitting:p,onClick:x,"aria-label":d.intl.string(d.t.AUM8hY),children:d.intl.string(d.t.AUM8hY)})}},870205:function(e,t,n){n.d(t,{Z:()=>c});var i=n(200651),l=n(481060),a=n(984168),o=n(314734),s=n(388032),r=n(853936);function c(e){let t,{sortOrder:n,onSortOptionClick:c}=e;switch(n){case o.bS.POPULAR:t=s.intl.string(s.t.SzxiqK);break;case o.bS.ALPHABETICAL:t=s.intl.string(s.t.m8xstr)}return(0,i.jsx)(l.yRy,{renderPopout:e=>{let{closePopout:t}=e;return(0,i.jsx)(a.Z,{sortOrder:n,onSortOptionClick:c,closePopout:t})},position:"bottom",align:"left",children:(e,n)=>{let{isShown:a}=n;return(0,i.jsxs)(l.zxk,{...e,size:l.zxk.Sizes.MIN,color:l.zxk.Colors.CUSTOM,className:r.sortDropdown,innerClassName:r.sortDropdownInner,"aria-label":s.intl.string(s.t.yeYaHR),children:[(0,i.jsx)(l.uVW,{size:"xs",color:"currentColor",className:r.sortIconMargin}),(0,i.jsx)(l.Text,{variant:"text-sm/medium",color:"text-normal",children:t}),a?(0,i.jsx)(l.u04,{size:"custom",color:"currentColor",width:20}):(0,i.jsx)(l.CJ0,{size:"custom",color:"currentColor",width:20})]})}})}},984168:function(e,t,n){n.d(t,{Z:()=>d});var i=n(200651);n(192379);var l=n(120356),a=n.n(l),o=n(481060),s=n(314734),r=n(388032),c=n(283437);function d(e){let{sortOrder:t,onSortOptionClick:n,closePopout:l}=e,d=e=>{n(e),l()};return(0,i.jsx)("div",{className:a()(s.Jh,c.container),children:(0,i.jsx)(o.v2r,{navId:"command-list-sort","aria-label":r.intl.string(r.t.Ugo9ub),hideScroller:!0,onClose:l,onSelect:l,children:(0,i.jsxs)(o.kSQ,{label:r.intl.string(r.t.yeYaHR),children:[(0,i.jsx)(o.k5B,{id:"sort-by-popular",group:"sort-by",label:r.intl.string(r.t.SzxiqK),action:()=>d(s.bS.POPULAR),checked:t===s.bS.POPULAR}),(0,i.jsx)(o.k5B,{id:"sort-by-alphabetical",group:"sort-by",label:r.intl.string(r.t.m8xstr),action:()=>d(s.bS.ALPHABETICAL),checked:t===s.bS.ALPHABETICAL})]})})})}},561160:function(e,t,n){n.d(t,{A:()=>m});var i=n(200651);n(192379);var l=n(780384),a=n(481060),o=n(410030),s=n(540059),r=n(176412),c=n(48097),d=n(983008),u=n(478408);function m(e){let{searchQuery:t,textContent:n,type:m}=e,p=(0,s.Q3)("AppLauncherEmptyState"),h=(0,o.ZP)(),v=(0,l.ap)(h)?u:d;return(0,r.Bm)(m,t),(0,i.jsxs)("div",{className:c.emptyStateContainer,children:[p?null:(0,i.jsx)("img",{className:c.emptyStateImage,src:v,alt:"empty state"}),(0,i.jsx)(a.Text,{variant:"text-md/medium",color:"text-muted",children:n})]})}},361917:function(e,t,n){n.d(t,{Z:()=>en}),n(47120),n(653041),n(789020);var i=n(200651),l=n(192379),a=n(392711),o=n.n(a),s=n(228458),r=n(535655),c=n(754738),d=n(727241),u=n(973693),m=n(912370),p=n(873199),h=n(442837),v=n(481060),x=n(911969),f=n(115130),N=n(566620),C=n(127255),E=n(880308),A=n(427996),I=n(367907),g=n(10718),_=n(895924),P=n(151517),j=n(674588),y=n(368862),T=n(34674),S=n(835473),b=n(857192),L=n(630388),R=n(823379),M=n(541099),Z=n(827498),O=n(87005),k=n(219066),U=n(106066),D=n(783097),H=n(695676),w=n(98880),V=n(804307),B=n(888617),W=n(561160),F=n(41558),G=n(105862),z=n(28147),Y=n(314734),X=n(981631),q=n(689079),Q=n(388032),J=n(105328);let K=[],$=[,,,,].fill(0).map((e,t)=>t),ee=[{cards:[,,,,].fill(0).map((e,t)=>t),look:w.U4.MEDIUM_BANNER},{cards:[,,,,].fill(0).map((e,t)=>t),look:w.U4.ROW},{cards:[,,,,].fill(0).map((e,t)=>t),look:w.U4.ROW}],et=u.Y.APP_LAUNCHER_IN_TEXT;function en(e){let{context:t,entrypoint:n,searchQuery:a,setSearchQuery:o,setScroller:s,isScrollCloseToBottom:r}=e,c=(0,h.e7)([f.Z],()=>f.Z.getIsEnabled(),[]),d=n===Z._b.TEXT&&"channel"===t.type&&null!=t.channel&&!t.channel.isPrivate(),u=(0,D.Yn)(n),m=!(0,D.Yn)(n),p=n===Z._b.TEXT,[x,C]=ed(!0),[E,A]=ed(d),[I,g]=ed(u),[_,P]=ed(m),j=x&&E&&I&&_,y=(u||d)&&!j,T=m&&c;l.useEffect(()=>{var e;let n="channel"===t.type?null===(e=t.channel)||void 0===e?void 0:e.guild_id:void 0;(0,N.w1)({guildId:n,force:!0})},[t]),l.useEffect(()=>{n===Z._b.VOICE&&N.ux()},[n]);let S=a.length>0;return(0,i.jsxs)("div",{className:J.container,children:[T?(0,i.jsx)(ei,{}):null,(0,i.jsx)(el,{searchQuery:a,setSearchQuery:o,placeholder:p?Q.intl.string(Q.t.ziyFv7):Q.intl.string(Q.t["pw+r5e"])}),(0,i.jsx)(v.Ttm,{ref:s,className:J.scrollableContent,fade:!0,children:S?(0,i.jsx)(z.Z,{context:t,query:a,entrypoint:n,isScrollCloseToBottom:r}):(0,i.jsxs)("div",{children:[(0,i.jsx)(ea,{context:t,entrypoint:n,onEmptyState:C}),d&&"channel"===t.type&&(0,i.jsx)(es,{context:t,onEmptyState:A}),u&&(0,i.jsx)(er,{context:t,entrypoint:n,onEmptyState:g}),m&&(0,i.jsx)(eo,{context:t,onEmptyState:P}),j&&(0,i.jsx)(W.A,{type:Z.LG.HOME_EMPTY,textContent:n===Z._b.TEXT?Q.intl.string(Q.t.iKZctb):Q.intl.string(Q.t.RL7Ncn)}),y&&(0,i.jsx)(G.Z,{})]})})]})}function ei(){return(0,i.jsxs)("div",{className:J.developerShelfControlsContainer,children:[(0,i.jsx)(v.Text,{className:J.developerShelfControlsLabel,variant:"text-sm/normal",children:Q.intl.string(Q.t.tZ3FNj)}),(0,i.jsx)(A.W,{hideSearch:!0})]})}function el(e){let{searchQuery:t,setSearchQuery:n,placeholder:a}=e,s=l.useRef(null),[r,c]=l.useState(!1),d=l.useMemo(()=>o().debounce(e=>{(0,I.yw)(X.rMx.APP_LAUNCHER_SEARCH_QUERY_TYPED,{query:e,source:M.Z.entrypoint(),location:_.Vh.APP_LAUNCHER_HOME})},400,{leading:!1,trailing:!0}),[]),u=l.useCallback(()=>n(""),[n]),m=l.useCallback(()=>{c(!0),(0,I.yw)(X.rMx.APP_LAUNCHER_SEARCH_FOCUSED,{source:M.Z.entrypoint(),location:_.Vh.APP_LAUNCHER_HOME})},[]),p=l.useCallback(()=>{c(!1)},[]),h=l.useCallback(e=>{r||m(),n(e),d(e)},[r,n,m,d]);return l.useEffect(()=>{let e=s.current;if(null==e)return;let t=()=>{r||m()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}},[r,m]),(0,i.jsx)("div",{className:J.searchBarContainer,children:(0,i.jsx)(v.E1j,{ref:e=>{var t;s.current=null!==(t=null==e?void 0:e.containerRef.current)&&void 0!==t?t:null},placeholder:a,query:t,onChange:h,onClear:u,size:v.E1j.Sizes.MEDIUM,onFocus:p,autoFocus:!0})})}function ea(e){let{context:t,entrypoint:n,onEmptyState:a}=e,o=n===Z._b.VOICE,{frecentApps:s,loading:r}=(0,O.f)({context:t,onlyActivityApps:o,allowCommandFetch:!0,includeAuthorizedAppsAndFetch:!0}),c=l.useMemo(()=>{let e=[];for(let t of s)null!=t.application&&e.push({application:t.application});return e},[s]),d=Q.intl.string(Q.t["s+UQpa"]),u=d;o&&(u=Q.intl.string(Q.t["2pFD8P"]));let{items:m,handleViewMore:p}=eu({title:u,look:n===Z._b.VOICE?w.U4.LARGE_BANNER:w.U4.ROW,items:c,limit:8,sectionName:Z.L3.RECENT_APPS});l.useEffect(()=>{!r&&0!==m.length&&(0,I.yw)(X.rMx.APP_LAUNCHER_FRECENTS_SEEN,{num:m.length,section_name:Z.L3.RECENT_APPS,location:Z.G0.HOME,source:n})},[m.length,n,r]);let h=!r&&0===m.length;return(l.useEffect(()=>{a(h)},[h,a]),!function(e){let{apps:t,onlyActivityApps:n}=e,i=l.useMemo(()=>n?t.map(e=>{let{application:t}=e;return t.id}):[],[t,n]);(0,S.Z)(i)}({apps:m,onlyActivityApps:o}),r||h)?null:(0,i.jsxs)("div",{children:[(0,i.jsx)(F.Z,{title:d,buttonType:F.Z.buttonTypes.VIEW_MORE,onClickViewButton:p}),(0,i.jsx)("div",{className:J.sectionContentContainer,children:(0,i.jsx)("div",{className:J.frecentList,children:m.map((e,n)=>{let{application:l}=e;return o?(0,i.jsx)(w.qR,{context:t,application:l,look:w.U4.ICON,location:Z.G0.HOME,sectionName:Z.L3.RECENT_APPS,resultsPosition:n,isOneClickCTA:!0,fetchesApplication:!1},l.id):(0,i.jsx)(w.kA,{context:t,application:l,look:w.U4.ICON,location:Z.G0.HOME,sectionName:Z.L3.RECENT_APPS,resultsPosition:n},l.id)})})})]})}function eo(e){var t;let{context:n,onEmptyState:a}=e;(0,E.g)();let o=(0,C.Z)({guildId:"channel"===n.type?null===(t=n.channel)||void 0===t?void 0:t.getGuildId():void 0}),s=w.U4.LARGE_BANNER,{trackSectionImpressionRef:r}=(0,B.Z)({sectionName:Z.L3.ACTIVITIES,numItems:o.length,numVisibleItems:o.length}),c=(0,U.s)("ActivitiesShelfSection"),d=0===o.length;return(l.useEffect(()=>{a(d)},[a,d]),d)?null:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{ref:e=>r.current=e,children:(0,i.jsx)(F.Z,{title:Q.intl.string(Q.t.shUONj)})}),(0,i.jsx)("div",{className:J.sectionTwoColumnContentContainer,children:o.map((e,t)=>{let{application:l}=e;return(0,i.jsx)(w.qR,{context:n,application:l,look:s,location:_.Vh.APP_LAUNCHER_HOME,sectionName:Z.L3.ACTIVITIES,resultsPosition:t,sectionOverallPosition:0,isOneClickCTA:!c,fetchesApplication:!1},l.id)})})]})}function es(e){let{context:t,onEmptyState:n}=e,a=Z.L3.APPS_IN_THIS_SERVER,{appsInThisServer:o,isLoading:s}=(0,k.Z)({context:t}),{items:r,handleViewMore:c}=eu({title:Q.intl.string(Q.t.KfkuGR),look:w.U4.ROW,items:o,limit:4,sectionName:a}),{trackSectionImpressionRef:d}=(0,B.Z)({sectionName:a,numItems:o.length,numVisibleItems:r.length}),u=!s&&0===r.length;return(l.useEffect(()=>{n(u)},[u,n]),u)?null:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{ref:e=>d.current=e,children:(0,i.jsx)(F.Z,{title:Q.intl.string(Q.t.KfkuGR),buttonType:F.Z.buttonTypes.VIEW_MORE,onClickViewButton:c})}),(0,i.jsx)("div",{className:J.sectionRowsContentContainer,children:s?$.map(e=>(0,i.jsx)(V.Z,{look:w.U4.ROW},e)):r.map((e,n)=>{let{application:l}=e;return null!=l?(0,i.jsx)(w.kA,{context:t,application:l,look:w.U4.ROW,sectionName:a,resultsPosition:n,location:_.Vh.APP_LAUNCHER_HOME},l.id):null})})]})}function er(e){let{context:t,entrypoint:n,onEmptyState:a}=e,{fetchState:o,recommendationsSections:d,isInstallOnDemand:u}=function(e){let{context:t,location:n}=e,i=function(){let e=(0,h.e7)([b.default],()=>b.default.onlyShowPreviewAppCollections),t=P.Z.getCurrentConfig({location:"App Launcher Home (Web)"},{autoTrackExposure:!1}).enabled;return e?r.E.PREVIEW:t?r.E.NON_STAFF_PREVIEW:r.E.ACTIVE}();l.useEffect(()=>{(0,j.XK)({surface:et,activeState:i})},[i]);let{sectionDescriptors:a}=g.wi({context:t,filters:{commandTypes:[x.yU.CHAT]},options:{placeholderCount:0,limit:q.tn,includeFrecency:!0},allowFetch:!0}),o=l.useCallback(e=>!(null!=a.find(t=>t.id===e.id)),[a]),c=(0,h.e7)([y.Z],()=>y.Z.getFetchState({surface:et,activeState:i})),d=(0,h.e7)([y.Z],()=>y.Z.getCollections({surface:et,activeState:i})),u=n===s.I.APP_LAUNCHER_VOICE;return{fetchState:c,recommendationsSections:l.useMemo(()=>u?(0,D.pF)(d):d,[d,u]),isInstallOnDemand:o}}({context:t,location:n===Z._b.TEXT?s.I.APP_LAUNCHER_TEXT:s.I.APP_LAUNCHER_VOICE}),p=function(e){var t;let{context:n,recommendationsSections:i}=e;(0,E.g)();let a=(0,C.Z)({guildId:"channel"===n.type?null===(t=n.channel)||void 0===t?void 0:t.getGuildId():void 0});return l.useMemo(()=>{if(!i.some(e=>(0,L.yE)(e.flags,c.b.APPENDS_REMAINING_ACTIVITIES)))return K;let e=new Set;return i.forEach(t=>{t.application_directory_collection_items.forEach(t=>{t.type===m.C.APPLICATION&&e.add(t.application.id)})}),a.filter(t=>!e.has(t.application.id))},[i,a])}({context:t,recommendationsSections:d}),v=o===y.M.FETCHING,f=!v&&0===d.length;return(l.useEffect(()=>{a(f)},[f,a]),f)?null:(0,i.jsx)(i.Fragment,{children:v?ee.map((e,t)=>{let{cards:n,look:l}=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)(F.Z.Loading,{}),(0,i.jsx)("div",{className:l===w.U4.ROW?J.sectionRowsContentContainer:J.sectionTwoColumnContentContainer,children:n.map(e=>(0,i.jsx)(V.Z,{look:l},e))})]},t)}):d.map((e,n)=>(0,i.jsx)(ec,{recommendationsSection:e,remainingActivities:p,isInstallOnDemand:u,position:n,context:t},e.id))})}function ec(e){let t,n,{recommendationsSection:a,remainingActivities:o,isInstallOnDemand:s,position:r,context:u}=e,h=a.title;switch(a.type){case p.o.BANNER_CARDS:t=w.U4.LARGE_BANNER;break;case p.o.SMALL_BANNER_CARDS:t=w.U4.MEDIUM_BANNER;break;default:t=w.U4.ROW}let v=l.useMemo(()=>{let e=a.application_directory_collection_items.map(e=>{if(e.type===m.C.APPLICATION)return{collectionItemId:e.id,collectionItemImageHash:e.image_hash,showsPromoted:(0,L.yE)(e.flags,d.q.PROMOTED),application:e.application,installOnDemand:s(e.application)}}).filter(R.lm);return(0,L.yE)(a.flags,c.b.APPENDS_REMAINING_ACTIVITIES)&&e.push(...o.map(e=>{let{application:t}=e;return{collectionItemId:void 0,collectionItemImageHash:void 0,showsPromoted:!1,application:t,installOnDemand:!0}})),e},[s,a.application_directory_collection_items,a.flags,o]),x=a.id;switch(a.type){case p.o.BANNER_CARDS:case p.o.SMALL_BANNER_CARDS:n=6;break;case p.o.EXPANDABLE_LIST:default:n=4}let{items:f,handleViewMore:N}=eu({title:h,look:t,items:v,limit:n,sectionName:x,sectionOverallPosition:r}),{trackSectionImpressionRef:C}=(0,B.Z)({sectionName:x,numItems:v.length,numVisibleItems:f.length}),E=a.type!==p.o.SMALL_BANNER_CARDS;return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{ref:e=>C.current=e,children:(0,i.jsx)(F.Z,{title:a.title,buttonType:F.Z.buttonTypes.VIEW_MORE,onClickViewButton:N})}),(0,i.jsx)("div",{className:t===w.U4.ROW?J.sectionRowsContentContainer:J.sectionTwoColumnContentContainer,children:f.map((e,n)=>{let l,{collectionItemId:a,collectionItemImageHash:o,application:s,installOnDemand:c,showsPromoted:d}=e;return null!=a&&null!=o&&(l=(0,T.$_)({itemId:a,hash:o,containerWidth:Y.Gy})),(0,i.jsx)(w.kA,{context:u,application:s,look:t,sectionName:x,resultsPosition:n,location:_.Vh.APP_LAUNCHER_HOME,installOnDemand:c,enableVideoBanner:E,sectionOverallPosition:r,overrideImageUrl:l,showsPromoted:d},"".concat(n,"-").concat(s.id))})})]})}function ed(e){let[t,n]=l.useState(!e);return[t,l.useCallback(function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];n(e)},[])]}function eu(e){let{title:t,look:n,items:i,limit:a,sectionName:o,sectionOverallPosition:s}=e,{pushHistory:r}=(0,H.hH)();return l.useMemo(()=>i.length<=a?{items:i,handleViewMore:void 0}:{items:i.slice(0,a),handleViewMore:()=>{(0,I.yw)(X.rMx.APP_LAUNCHER_SECTION_VIEW_MORE,{section_name:o,source:M.Z.entrypoint(),num:i.length}),r({type:H.gc.LIST,title:t,look:n,items:i,sectionName:o,sectionOverallPosition:s})}},[i,a,o,r,t,n,s])}},41558:function(e,t,n){n.d(t,{Z:()=>d});var i,l=n(200651),a=n(192379),o=n(481060),s=n(388032),r=n(138133),c=((i=c||{})[i.VIEW_MORE=0]="VIEW_MORE",i[i.VIEW_LESS=1]="VIEW_LESS",i);function d(e){let{title:t,buttonType:n,onClickViewButton:i}=e;return(0,l.jsxs)("div",{className:r.header,children:[(0,l.jsx)(o.Text,{variant:"text-md/medium",color:"header-primary",children:t}),null!=n&&null!=i&&(0,l.jsx)(o.P3F,{className:r.viewMore,onClick:i,"aria-label":s.intl.formatToPlainString(s.t["bj/2kZ"],{title:t}),children:(0,l.jsx)(o.Text,{variant:"text-md/medium",color:"text-brand",children:0===n?s.intl.format(s.t.gVw57u,{}):s.intl.string(s.t.nPGLFR)})})]})}d.buttonTypes=c,d.Loading=function(){let e=a.useMemo(()=>({width:"".concat(10+20*Math.random(),"%")}),[]);return(0,l.jsx)("div",{className:r.loadingHeader,style:e,children:(0,l.jsx)(o.Text,{className:r.hidden,variant:"text-md/medium",color:"header-primary",children:"_"})})}},105862:function(e,t,n){n.d(t,{Z:()=>f});var i=n(200651),l=n(192379),a=n(780384),o=n(481060),s=n(410030),r=n(782568),c=n(63063),d=n(827498),u=n(888617),m=n(981631),p=n(388032),h=n(860156),v=n(983008),x=n(478408);function f(e){let{showImage:t=!0,padding:n=!1}=e,f=(0,s.ZP)(),N=(0,a.ap)(f)?x:v,C=l.useCallback(()=>{(0,r.Z)(c.Z.getAppsSupportURL(m.BhN.APPS_LEARN_MORE))},[]),{trackSectionImpressionRef:E}=(0,u.Z)({sectionName:d.L3.NEW_TO_APPS,numItems:1,numVisibleItems:1});return(0,i.jsx)("div",{className:n?h.containerPadding:void 0,children:(0,i.jsxs)("div",{ref:e=>E.current=e,className:h.container,children:[t&&(0,i.jsx)("img",{className:h.image,src:N,alt:"","aria-hidden":!0}),(0,i.jsxs)("div",{className:h.body,children:[(0,i.jsx)(o.X6q,{variant:"heading-lg/bold",color:"header-primary",children:p.intl.string(p.t["kw8/ER"])}),(0,i.jsx)(o.Text,{variant:"text-xs/normal",color:"text-normal",children:p.intl.string(p.t.GZoV1N)})]}),(0,i.jsx)(o.zxk,{size:o.zxk.Sizes.MEDIUM,"aria-label":p.intl.formatToPlainString(p.t.xx5Sur,{sectionTitle:p.intl.string(p.t["kw8/ER"]),sectionBody:p.intl.string(p.t.GZoV1N)}),onClick:C,children:p.intl.string(p.t.Ye51oa)})]})})}},106771:function(e,t,n){n.d(t,{Z:()=>v});var i=n(200651),l=n(192379),a=n(481060),o=n(239091),s=n(973616),r=n(783097),c=n(176412),d=n(570949),u=n(753972),m=n(532309),p=n(51688),h=n(413097);function v(e){var t;let{command:n,application:v,onClick:x,query:f,searchResultsPosition:N}=e,C=l.useCallback(e=>{if((0,r.BQ)(v)){let t=v instanceof s.ZP?v:s.ZP.createFromServer(v);(0,o.vq)(e,e=>(0,i.jsx)(d.Z,{application:t,...e}))}},[v]),{iconURL:E,name:A,description:I}=l.useMemo(()=>(0,r.sl)(v,{fakeAppIconURL:h}),[v]),g=l.useMemo(()=>{var e;let t=null!==(e=null==n?void 0:n.displayDescription)&&void 0!==e?e:I;return null==t?null:(0,c.ae)(t,void 0)},[I,null==n?void 0:n.displayDescription]),{trackSearchResultsItemImpressionRef:_}=(0,m.Z)({applicationId:v.id,commandId:null==n?void 0:n.id,query:f,searchResultsPosition:N});return(0,i.jsx)(a.P3F,{className:p.clickable,innerRef:e=>_.current=e,onClick:x,onContextMenu:C,children:(0,i.jsxs)(a.Rny,{className:p.focusBlock,children:[(0,i.jsx)(u.Z,{src:E,className:p.icon,"aria-hidden":!0,rendersPlaceholder:!0}),(0,i.jsxs)("div",{className:p.cmdDetails,children:[(0,i.jsx)(a.X6q,{variant:"heading-md/semibold",color:"header-primary",lineClamp:1,children:null!==(t=null==n?void 0:n.displayName)&&void 0!==t?t:A}),(0,i.jsx)(a.Text,{variant:"text-sm/normal",color:"text-secondary",lineClamp:1,children:g})]}),null!=n?(0,i.jsx)(a.Text,{className:p.cmdAppName,variant:"text-sm/normal",color:"text-secondary",children:A}):null,(0,i.jsx)("div",{className:p.underline})]})})}},79984:function(e,t,n){n.d(t,{Z:()=>u});var i=n(200651),l=n(192379),a=n(120356),o=n.n(a),s=n(442837),r=n(481060),c=n(607070),d=n(14596);function u(){let e=(0,s.e7)([c.Z],()=>c.Z.useReducedMotion),{styleLarge:t,styleSmall:n}=l.useMemo(()=>({styleLarge:{width:"".concat(10+50*Math.random(),"%")},styleSmall:{width:"".concat(30+60*Math.random(),"%")}}),[]);return(0,i.jsxs)("div",{className:o()(d.container,{[d.noAnimation]:e}),children:[(0,i.jsx)("div",{className:d.iconPlaceholder}),(0,i.jsxs)("div",{className:d.textContainer,children:[(0,i.jsx)("div",{className:d.textPlaceholder,style:t,children:(0,i.jsx)(r.X6q,{className:d.hidden,variant:"heading-md/semibold",color:"header-primary",lineClamp:1,children:"_"})}),(0,i.jsx)("div",{className:d.textPlaceholder,style:n,children:(0,i.jsx)(r.Text,{className:d.hidden,variant:"text-sm/normal",color:"text-secondary",lineClamp:1,children:"_"})})]}),(0,i.jsx)("div",{className:d.underline})]})}},28147:function(e,t,n){n.d(t,{Z:()=>Z}),n(47120);var i=n(200651),l=n(192379),a=n(392711),o=n.n(a),s=n(209173),r=n(110924),c=n(367907),d=n(555573),u=n(895924),m=n(809547),p=n(583027),h=n(585483),v=n(499254),x=n(541099),f=n(827498),N=n(392370),C=n(98880),E=n(804307),A=n(520315),I=n(532309),g=n(561160),_=n(41558),P=n(106771),j=n(79984),y=n(314734),T=n(981631),S=n(388032),b=n(722029);let L=Array(6).fill(0).map((e,t)=>t),R=[,,,].fill(0).map((e,t)=>t),M=[,,,,].fill(0).map((e,t)=>t);function Z(e){return(0,i.jsx)(O,{...e})}function O(e){let{context:t,query:n,entrypoint:a,isScrollCloseToBottom:r}=e,c=a===f._b.TEXT,d=a===f._b.TEXT,{loading:u,isEmptyState:p,commandResults:h,hasCommandResults:v,applicationResults:x}=(0,N.pe)({context:t,query:n,searchesActivities:!0,searchesCommands:c,searchesBots:d}),{fetchState:C,applicationResults:E,fetchNextPage:A}=(0,N.Q2)({query:n,context:t,fetches:!0,pageLimit:5,entrypoint:a});l.useEffect(()=>{r&&C===m.M.FETCHED&&A()},[A,C,r]);let I=null==C||C===m.M.FETCHING,_=l.useMemo(()=>{let e=x.map(e=>({application:e,installOnDemand:!0})),t=new Set(x.map(e=>{let{id:t}=e;return t}));return[...e,...o().compact(E.map(e=>e.type===s.s.CONNECTION||t.has(e.data.id)?null:{application:e.data,installOnDemand:!0}))]},[E,x]),P=_.length>0,j=p&&!P&&!I;return u?(0,i.jsx)(w,{}):j?(0,i.jsx)(g.A,{type:f.LG.SEARCH_EMPTY,searchQuery:n,textContent:a===f._b.TEXT?S.intl.string(S.t.LSNOYW):S.intl.string(S.t.Clu7Qk)}):(0,i.jsxs)("div",{children:[v&&(0,i.jsx)(k,{context:t,commandResults:h,query:n}),(P||I)&&(0,i.jsx)(D,{context:t,applicationResults:_,includePlaceholder:I,query:n,searchesBots:d})]})}function k(e){var t,n;let{context:a,commandResults:o,query:s}=e,m=o.length>4,N=l.useMemo(()=>m?o.slice(0,4):o,[o,m]),[C,E]=l.useState(!1),I=null!==(t=(0,r.Z)(C))&&void 0!==t?t:C,g=l.useCallback(()=>E(e=>!e),[]),j=(null!==(n=(0,r.Z)(s))&&void 0!==n?n:s)[0]!==s[0],L=C&&!j;l.useLayoutEffect(()=>E(!1),[j]);let{ref:R,isTransitioning:M,onTransitionEnd:Z}=(0,A.Z)({key:s,isExpanded:L,durationMs:200,maxAnimationHeight:y.K7});l.useEffect(()=>{!I&&C&&(0,c.yw)(T.rMx.APP_LAUNCHER_SECTION_VIEW_MORE,{section_name:f.L3.SEARCH,source:x.Z.entrypoint(),num:o.length})},[o.length,I,C]);let O=L||M,k=L?_.Z.buttonTypes.VIEW_LESS:_.Z.buttonTypes.VIEW_MORE,U=O?o:N;return(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Z,{title:S.intl.string(S.t["0hKkS0"]),buttonType:k,onClickViewButton:m?g:void 0}),(0,i.jsx)("div",{className:b.sectionContentContainer,ref:R,onTransitionEnd:Z,children:U.map((e,t)=>{let{command:n,application:l,section:o}=e;return(0,i.jsx)(P.Z,{command:n,application:l,query:s,searchResultsPosition:t,onClick:()=>{let e=x.Z.entrypoint();v.yT(f.ti.DISMISSED),(0,p.Mo)({command:n,location:u.Vh.APP_LAUNCHER_HOME_SEARCH,sectionName:f.L3.SEARCH}),"channel"===a.type&&(d.Po({channelId:a.channel.id,command:n,section:o,location:u.Vh.APP_LAUNCHER_HOME_SEARCH,triggerSection:void 0,queryLength:s.length,sectionName:f.L3.SEARCH,query:s,searchResultsPosition:t,source:e}),h.S.dispatch(T.CkL.FOCUS_CHANNEL_TEXT_AREA,{channelId:a.channel.id}))}},n.id)})})]})}function U(e){let{trackSearchResultsItemImpressionRef:t}=(0,I.Z)({applicationId:e.application.id,query:e.query,searchResultsPosition:e.resultsPosition});return(0,i.jsx)("div",{className:b.searchOpenAppDetailAppCard,ref:e=>t.current=e,children:(0,i.jsx)(C.kA,{...e,tracksImpression:!1,enableVideoBanner:!0})})}function D(e){let{context:t,applicationResults:n,includePlaceholder:l,query:a,searchesBots:o}=e;return o?(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Z,{title:S.intl.string(S.t.PHjkRE)}),(0,i.jsxs)("div",{className:b.sectionContentContainer,children:[n.map((e,n)=>{let{application:l,installOnDemand:o}=e;return(0,i.jsx)(H,{context:t,application:l,location:u.Vh.APP_LAUNCHER_HOME_SEARCH,sectionName:f.L3.SEARCH,resultsPosition:n,installOnDemand:o,query:a},l.id)}),l&&R.map(e=>(0,i.jsx)(j.Z,{},e))]})]}):(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Z,{title:S.intl.string(S.t.shUONj)}),(0,i.jsxs)("div",{className:b.sectionActivitiesContentContainer,children:[n.map((e,n)=>{let{application:l,installOnDemand:o}=e;return(0,i.jsx)(U,{context:t,application:l,look:C.U4.LARGE_BANNER,location:u.Vh.APP_LAUNCHER_HOME_SEARCH,sectionName:f.L3.SEARCH,resultsPosition:n,installOnDemand:o,query:a},l.id)}),l&&M.map(e=>(0,i.jsx)(E.Z,{look:C.U4.LARGE_BANNER},e))]})]})}function H(e){let t=(0,C.cG)(e);return(0,i.jsx)(P.Z,{application:e.application,onClick:t,query:e.query,searchResultsPosition:e.resultsPosition})}function w(){return(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Z,{title:S.intl.string(S.t["0hKkS0"])}),(0,i.jsx)("div",{className:b.sectionContentContainer,children:L.map(e=>(0,i.jsx)(j.Z,{},e))}),(0,i.jsx)(_.Z,{title:S.intl.string(S.t.PHjkRE)}),(0,i.jsx)("div",{className:b.sectionContentContainer,children:R.map(e=>(0,i.jsx)(j.Z,{},e))})]})}},684256:function(e,t,n){n.d(t,{Z:()=>v});var i=n(200651),l=n(192379),a=n(120356),o=n.n(a),s=n(481060),r=n(895924),c=n(827498),d=n(106066),u=n(98880),m=n(772606),p=n(388032),h=n(661630);function v(e){let{context:t,entrypoint:n,title:a,look:v,items:x,sectionName:f,sectionOverallPosition:N}=e,C=(0,d.s)("AppLauncherApplicationListViewScreen"),E=l.useMemo(()=>n===c._b.TEXT?u.kA:u.qR,[n]);return(0,i.jsxs)("section",{className:h.container,"aria-label":p.intl.formatToPlainString(p.t.iobNIC,{sectionTitle:a}),children:[(0,i.jsxs)("div",{className:h.header,children:[(0,i.jsx)(m.Z,{className:h.backButton}),(0,i.jsx)(s.X6q,{variant:"heading-md/medium",color:"header-primary",children:a})]}),(0,i.jsx)(s.Ttm,{children:(0,i.jsx)("div",{className:o()({[h.appGrid]:v!==u.U4.ROW,[h.rows]:v===u.U4.ROW}),children:x.map((e,n)=>{let{application:l,installOnDemand:a,showsPromoted:o}=e;return(0,i.jsx)(E,{context:t,application:l,look:v,sectionName:f,resultsPosition:n,location:r.Vh.APP_LAUNCHER_LIST_VIEW_ALL,installOnDemand:a,isOneClickCTA:C,sectionOverallPosition:N,showsPromoted:o},l.id)})})})]})}},151517:function(e,t,n){n.d(t,{Z:()=>i});let i=(0,n(818083).B)({kind:"user",id:"2025-01_allow_nonstaff_to_preview_app_collections",label:"Allow Non-Staff to Preview App Collections",defaultConfig:{enabled:!1},treatments:[{id:1,label:'In App Launcher in Text, enable seeing only "NON_STAFF_PREVIEW" app collections',config:{enabled:!0}}]})},148958:function(e,t,n){n.d(t,{h:()=>d}),n(47120),n(653041);var i=n(192379),l=n(442837),a=n(581364),o=n(675478),s=n(709054),r=n(822245),c=n(526761);function d(e,t){i.useEffect(()=>{o.DZ.loadIfUncached(c.yP.FRECENCY_AND_FAVORITES_SETTINGS)},[]);let n=(0,l.e7)([r.Z],()=>r.Z.getApplicationFrecencyWithoutLoadingLatest()),d=i.useMemo(()=>null==t||0===t.length?e:e.map(e=>{var n;return{...e,isUserApp:null!==(n=null==t?void 0:t.some(t=>t.application.id===e.id))&&void 0!==n&&n}}),[e,t]),u=i.useMemo(()=>null==t?void 0:t.filter(t=>!e.some(e=>e.id===t.application.id)),[e,t]),m=i.useMemo(()=>{var e;null==u||u.forEach(e=>{let t=s.default.extractTimestamp(e.id);null==n.getEntry(e.application.id)&&n.track(e.application.id,t)}),n.compute();let t=null!==(e=null==u?void 0:u.map(e=>(0,a.X0)(e.application,!0)))&&void 0!==e?e:[],i=[...d];return i.push(...t),i.sort((e,t)=>{var i,l;let a=(null!==(i=n.getScore(t.id))&&void 0!==i?i:0)-(null!==(l=n.getScore(e.id))&&void 0!==l?l:0);return 0!==a?a:e.name.localeCompare(t.name)}),i},[d,n,u]);return i.useMemo(()=>{var e,i;let l,a;null==t||t.forEach(e=>{let t=s.default.extractTimestamp(e.id);(null==a||t>a)&&(l=e,a=t)}),d.forEach(e=>{var t,i;let o=Math.max(...null!==(i=null===(t=n.getEntry(e.id))||void 0===t?void 0:t.recentUses)&&void 0!==i?i:[]);(null==a||o>a)&&(l=e,a=o)});let o=null!==(i=null==l?void 0:null===(e=l.application)||void 0===e?void 0:e.id)&&void 0!==i?i:"";return[...m.filter(e=>e.id===o),...m.filter(e=>e.id!==o)]},[m,d,n,t])}},276022:function(e,t,n){n.d(t,{Z:()=>x}),n(653041);var i=n(200651),l=n(192379),a=n(442837),o=n(481060),s=n(139387),r=n(230711),c=n(213459),d=n(434404),u=n(795594),m=n(430824),p=n(496675),h=n(981631),v=n(388032);function x(e){var t;let{user:x,application:f,guildId:N,context:C,onItemClick:E}=e,A=null!==(t=null==f?void 0:f.id)&&void 0!==t?t:null==x?void 0:x.id,I=m.Z.getGuild(N),g=(0,a.e7)([p.Z],()=>null!=I?p.Z.can(h.Plq.MANAGE_GUILD,I):null),_=(0,c.LD)(N,!0),P=(0,c.PL)(!0,!0),{isUserApp:j,isGuildApp:y}=l.useMemo(()=>{var e,t,n,i;if(null==A)return{isGuildApp:!1,isUserApp:!1};let l=Object.values(null!==(n=null===(e=_.result)||void 0===e?void 0:e.sections)&&void 0!==n?n:{}),a=Object.values(null!==(i=null===(t=P.result)||void 0===t?void 0:t.sections)&&void 0!==i?i:{});return{isGuildApp:l.some(e=>{var t;return(null===(t=e.descriptor.application)||void 0===t?void 0:t.id)===A}),isUserApp:a.some(e=>{var t;return(null===(t=e.descriptor.application)||void 0===t?void 0:t.id)===A})}},[_,P,A]);l.useEffect(()=>{n(360606)},[]);let T=l.useCallback(()=>{(null==I?void 0:I.id)!=null&&(d.Z.open(I.id,h.pNK.INTEGRATIONS),s.Z.setSection(h.b4C.APPLICATION,A),null==E||E())},[A,null==I?void 0:I.id,E]),S=l.useCallback(()=>{r.Z.open(h.oAB.AUTHORIZED_APPS);let e="";null!=f?e=f.name:null!=x&&(e=x.username),""!==e&&u.J.setState({searchQuery:e}),null==E||E()},[f,E,x]);if(C===h.IlC.POPOUT)return null;let b=[];return y&&g&&b.push((0,i.jsx)(o.sNh,{id:"manage-server-integration",label:v.intl.string(v.t.IuSJT0),action:T},"manage-server-integration")),j&&b.push((0,i.jsx)(o.sNh,{id:"manage-authorized-app",label:v.intl.string(v.t.V8ruv7),action:S},"manage-authorized-app")),b}},631827:function(e,t,n){function i(e,t){var n,i,l,a,o,s,r;let c;let d=null!==(n=t.limit)&&void 0!==n?n:1/0,u=(s=e,r=null!==(i=t.filterPredicates)&&void 0!==i?i:[],s.filter(e=>r.every(t=>t(e))));return(function(e,t,n){let i=[];for(let l of e){let e=function(e,t){return e.sort((e,n)=>{for(let i of t){let t=i(e,n);if(0!==t)return t}return 0})}(l,t);if(i.push(...e),i.length>=n)break}return i})(null!=t.bucketPredicates&&t.bucketPredicates.length>0?d>=u.length?function(e,t){let n=Array(t.length).fill(null).map(()=>[]);for(let i of e)for(let e=0;e<t.length;e++)if(t[e](i)){n[e].push(i);break}return n}(u,null!==(l=t.bucketPredicates)&&void 0!==l?l:[]):function(e,t,n){let i=[],l=e;for(let e of t){let t=[],a=[];for(let n of l)e(n)?a.push(n):t.push(n);if(i.push(a),l=t,i.reduce((e,t)=>t.length+e,0)>=n)break}return i}(u,null!==(a=t.bucketPredicates)&&void 0!==a?a:[],d):[u],null!==(o=t.sortComparers)&&void 0!==o?o:[],d).slice(0,d)}n.d(t,{N:()=>i}),n(653041),n(47120),n(724458)},754738:function(e,t,n){n.d(t,{b:()=>l});var i,l=((i={})[i.APPENDS_REMAINING_ACTIVITIES=1]="APPENDS_REMAINING_ACTIVITIES",i[i.DEFAULT=0]="DEFAULT",i)},727241:function(e,t,n){n.d(t,{q:()=>l});var i,l=((i={})[i.PROMOTED=1]="PROMOTED",i[i.SKIPS_APPLICATION_DISCOVERABILITY_VALIDATION=2]="SKIPS_APPLICATION_DISCOVERABILITY_VALIDATION",i[i.DEFAULT=0]="DEFAULT",i)},873199:function(e,t,n){n.d(t,{o:()=>l}),n(47120);var i,l=((i={})[i.LIST=1]="LIST",i[i.LIST_WITH_IMAGE=2]="LIST_WITH_IMAGE",i[i.GALLERY=3]="GALLERY",i[i.EXPANDABLE_LIST=4]="EXPANDABLE_LIST",i[i.BANNER_CARDS=5]="BANNER_CARDS",i[i.SMALL_BANNER_CARDS=6]="SMALL_BANNER_CARDS",i)},209173:function(e,t,n){n.d(t,{s:()=>l});var i,l=((i={})[i.APPLICATION=1]="APPLICATION",i[i.ACTIVITY_APPLICATION=2]="ACTIVITY_APPLICATION",i[i.CONNECTION=3]="CONNECTION",i)}}]);
//# sourceMappingURL=3acf044a8fc0098e.js.map