"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["88054"],{621054:function(e){e.exports="/assets/822cb9ca19556451.svg"},724757:function(e,t,n){n.d(t,{Z:()=>r});var l=n(192379),i=n(924826),a=n(442837),s=n(607070);function r(e,t,n){let r=(0,a.e7)([s.Z],()=>s.Z.keyboardModeEnabled),o=l.useCallback(e=>{let n=document.querySelector(e),l=t.current;null!=n&&null!=l&&(n.focus(),l.scrollIntoViewNode({node:n,padding:80}))},[t]),c=l.useCallback(()=>new Promise(e=>{let n=t.current;if(null==n)return e();n.scrollTo({to:0,callback:()=>requestAnimationFrame(()=>e())})}),[t]),u=l.useCallback(()=>new Promise(e=>{let n=t.current;if(null==n)return e();n.scrollTo({to:Number.MAX_SAFE_INTEGER,callback:()=>requestAnimationFrame(()=>e())})}),[t]);return(0,i.ZP)({id:e,isEnabled:r,setFocus:o,scrollToStart:c,scrollToEnd:u,orientation:null==n?void 0:n.orientation})}},289823:function(e,t,n){n.d(t,{Z:()=>I});var l=n(200651),i=n(192379),a=n(120356),s=n.n(a),r=n(974674),o=n(438784),c=n(481060),u=n(686546),d=n(3682),_=n(465669);let h={},f=1/4;function g(e){let{height:t,fillColor:n}=e;return(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",borderRadius:t/2,backgroundColor:n,height:t,width:t*d.jR},children:(0,l.jsx)(o.b,{className:_.dots,dotRadius:t*f})})}function m(e){let{isTyping:t,statusCoords:n,status:i}=e,a=(0,c.vjg)(c.Skl.ONLINE);return t?(0,l.jsx)("div",{style:{position:"absolute",top:n.y,left:n.x},children:(0,l.jsx)(g,{height:n.height,fillColor:a})}):null!=i?(0,l.jsx)(c.qbd,{size:n.height,status:i,style:{position:"absolute",top:n.y,left:n.x}}):null}function E(e){let{src:t,size:n}=e;return(0,l.jsx)("img",{className:_.circularImage,src:t,alt:"",width:n,height:n})}let p={[c.EFr.SIZE_16]:{default:u.QS.DIAGONAL_FACEPILE_16,typing:u.QS.DIAGONAL_FACEPILE_TYPING_16,status:u.QS.DIAGONAL_FACEPILE_STATUS_16},[c.EFr.SIZE_20]:{default:u.QS.DIAGONAL_FACEPILE_20,typing:u.QS.DIAGONAL_FACEPILE_TYPING_20,status:u.QS.DIAGONAL_FACEPILE_STATUS_20},[c.EFr.SIZE_24]:{default:u.QS.DIAGONAL_FACEPILE_24,typing:u.QS.DIAGONAL_FACEPILE_TYPING_24,status:u.QS.DIAGONAL_FACEPILE_STATUS_24},[c.EFr.SIZE_32]:{default:u.QS.DIAGONAL_FACEPILE_32,typing:u.QS.DIAGONAL_FACEPILE_TYPING_32,status:u.QS.DIAGONAL_FACEPILE_STATUS_32},[c.EFr.SIZE_40]:{default:u.QS.DIAGONAL_FACEPILE_32,typing:u.QS.DIAGONAL_FACEPILE_TYPING_32,status:u.QS.DIAGONAL_FACEPILE_STATUS_32},[c.EFr.SIZE_48]:{default:u.QS.DIAGONAL_FACEPILE_40,typing:u.QS.DIAGONAL_FACEPILE_TYPING_40,status:u.QS.DIAGONAL_FACEPILE_STATUS_40},[c.EFr.SIZE_56]:{default:u.QS.DIAGONAL_FACEPILE_56,typing:u.QS.DIAGONAL_FACEPILE_TYPING_56,status:u.QS.DIAGONAL_FACEPILE_STATUS_56},[c.EFr.SIZE_80]:{default:u.QS.DIAGONAL_FACEPILE_80,typing:u.QS.DIAGONAL_FACEPILE_TYPING_80,status:u.QS.DIAGONAL_FACEPILE_STATUS_80},[c.EFr.SIZE_120]:{default:u.QS.DIAGONAL_FACEPILE_120,typing:u.QS.DIAGONAL_FACEPILE_TYPING_120,status:u.QS.DIAGONAL_FACEPILE_STATUS_120}},I=function(e){var t;let{backSrc:n,frontSrc:a,size:o,isTyping:f,status:g,style:I,className:A,...S}=e,{size:C}=c.ny6[o],{statusCoords:x,frontAvatarOffsetPx:b,frontAvatarSizePx:L,backAvatarSizePx:v}=i.useMemo(()=>{var e;let t="".concat(C,"-").concat(f);return null!==(e=h[t])&&void 0!==e?e:function(e,t,n){let l=c.ny6[e],i=l.size/(d.z3+d.o),a=i*d.z3,s=i*d.o,o={statusCoords:(0,r.Vq)(l,c.Skl.ONLINE,!1,t),frontAvatarSizePx:a,backAvatarSizePx:i,frontAvatarOffsetPx:s,frontAvatarCenter:s+a/2};return h[n]=o,o}(o,f,t)},[C,f,o]),N=(t=null!=g,f?p[o].typing:t?p[o].status:p[o].default);return(0,l.jsxs)("div",{style:{width:C,height:C,...I},"aria-label":S["aria-label"],"aria-hidden":S["aria-hidden"],className:s()(_.container,A),children:[(0,l.jsxs)(u.ZP,{mask:N,height:C,width:C,children:[(0,l.jsx)("img",{src:n,alt:"",width:v,height:v}),(0,l.jsx)("div",{style:{position:"absolute",top:b,left:b},children:(0,l.jsx)(E,{src:a,size:L,isTyping:f,status:g})})]}),(0,l.jsx)(m,{statusCoords:x,status:g,isTyping:f})]})}},859155:function(e,t,n){n.d(t,{Z:()=>h}),n(411104);var l=n(991637),i=n.n(l),a=n(388123),s=n(904245),r=n(761080),o=n(957730),c=n(592125),u=n(496675),d=n(784384);let _={async sendForward(e,t,n){let l=c.Z.getChannel(t),i=c.Z.getChannel(e.channel_id),_=(null==n?void 0:n.isICYMIGameContentForwarding)?r.KF:null==i?void 0:i.guild_id;if(null==i&&null==_)throw Error("Unable to find original channel for message");if(null==l)throw Error("Unable to find destination channel for message");let h=o.ZP.parse(l,""),f={guild_id:_,channel_id:e.channel_id,message_id:e.id,type:a.U.FORWARD,forward_only:(null==n?void 0:n.onlyAttachmentIds)!=null||(null==n?void 0:n.onlyEmbedIndices)!=null?{attachment_ids:n.onlyAttachmentIds,embed_indices:n.onlyEmbedIndices}:void 0};await s.Z.sendMessage(l.id,h,!1,{messageReference:f,eagerDispatch:!1}),(null==n?void 0:n.withMessage)==null||(0,d.pU)(l,u.Z)||await s.Z.sendMessage(l.id,o.ZP.parse(l,n.withMessage),!1)},sendForwards:(e,t,n)=>i()(t.map(t=>_.sendForward(e,t,n)))},h=_},819727:function(e,t,n){n.d(t,{G:()=>l});let l=5},784384:function(e,t,n){n.d(t,{HY:()=>A,nm:()=>I,pU:()=>S,y:()=>C}),n(47120),n(390547);var l=n(192379),i=n(106351),a=n(442837),s=n(933557),r=n(987509),o=n(926491),c=n(378233),u=n(131704),d=n(592125),_=n(496675),h=n(699516),f=n(594174),g=n(408433),m=n(823379),E=n(981631),p=n(388032);function I(e){let t=e.map(r.hl).find(m.lm),n=(0,a.e7)([d.Z],()=>d.Z.getChannel(t),[t]);return l.useMemo(()=>null!=n?n:(0,u.kt)({id:"1",type:i.d.DM}),[n])}function A(e,t,n){let l=n instanceof u.Sf;if(t.isNSFW()&&!(l&&n.isNSFW()))return{label:p.intl.string(p.t.KgPx1N)};if(l&&(0,u.Km)(n.type)){if((e.attachments.length>0||e.messageSnapshots.some(e=>e.message.attachments.length>0))&&!_.Z.can(E.Plq.ATTACH_FILES,n))return{label:p.intl.string(p.t.P7yvbm)};if((e.embeds.length>0||e.messageSnapshots.some(e=>e.message.embeds.length>0))&&!(0,g.eC)(n,_.Z)&&!(0,g.En)(e))return{label:p.intl.string(p.t.Wr4RIS)};let t=[...(0,c.cv)(e),...e.messageSnapshots.flatMap(e=>{let{message:t}=e;return(0,c.cv)(t)})];if(t.length>0&&!_.Z.can(E.Plq.USE_EXTERNAL_STICKERS,n)&&t.some(e=>(function(e,t){let n=o.Z.getStickerById(e.id);return!!(null!=n&&(0,c.J8)(n))&&(n.guild_id!==t.guild_id||void 0)})(e,n)))return{label:p.intl.string(p.t["0Yyrub"])};if((e.hasFlag(E.iLy.IS_VOICE_MESSAGE)||e.messageSnapshots.some(e=>e.message.hasFlag(E.iLy.IS_VOICE_MESSAGE)))&&!_.Z.can(E.Plq.SEND_VOICE_MESSAGES,n))return{label:p.intl.string(p.t.quj4DQ)}}}function S(e,t){return null!=e.rateLimitPerUser&&e.rateLimitPerUser>0&&!(t.can(E.Plq.MANAGE_CHANNELS,e)||t.can(E.Plq.MANAGE_MESSAGES,e))}function C(e){let t=(0,a.Wu)([d.Z,_.Z],()=>e.map(e=>{let{type:t,id:n}=e;return"channel"===t?d.Z.getChannel(n):null}).filter(m.lm).filter(e=>S(e,_.Z)),[e]);return(0,a.Wu)([f.default,h.Z],()=>t.map(e=>(0,s.F6)(e,f.default,h.Z,!0)),[t])}},318616:function(e,t,n){n.d(t,{c:()=>s});var l=n(442837),i=n(496675),a=n(408433);function s(e){var t,n,s;let{message:r,channel:o,forwardOptions:c}=e,u=null==c?void 0:c.onlyAttachmentIds,d=null==c?void 0:c.onlyEmbedIndices,_=null!==(s=null===(t=r.messageSnapshots[0])||void 0===t?void 0:t.message)&&void 0!==s?s:r,h=_.attachments;null!=u?h=_.attachments.filter(e=>u.includes(e.id)):null!=d&&(h=[]);let f=[];return(0,l.e7)([i.Z],()=>null!=o&&!(0,a.eC)(o,i.Z)&&(0,a.En)(r))||(f=_.embeds,null!=d?f=_.embeds.filter((e,t)=>d.includes(t)):null==u||(f=[])),(null!=d||""===_.content&&f.length>0)&&(_=_.set("content",f.map(e=>e.url).join("\n"))),""===_.content&&(null===(n=_.embeds[0])||void 0===n?void 0:n.rawDescription)!=null&&(_=_.set("content",_.embeds[0].rawDescription)),{attachments:h,embeds:f,hasContent:""!==_.content&&null==u,contentMessage:_}}},895442:function(e,t,n){n.d(t,{Z:()=>o});var l=n(592125),i=n(430824),a=n(594174),s=n(981631);function r(e){if(!e.isPrivate()){let t=i.Z.getGuild(e.guild_id);return null!=t&&t.hasFeature(s.oNc.INTERNAL_EMPLOYEE_ONLY)}return e.recipients.every(e=>{let t=a.default.getUser(e);return null!=t&&t.isStaff()})}function o(e,t){var n;if(!(null===(n=a.default.getCurrentUser())||void 0===n?void 0:n.isStaff()))return!1;let i=l.Z.getChannel(e.channel_id);return!!(null!=i&&r(i))&&t.some(e=>{let t=l.Z.getChannel(e);return!(null==t||t.isPrivate())&&!r(t)})}},757853:function(e,t,n){n.d(t,{F:()=>W,G:()=>j}),n(47120);var l,i=n(200651),a=n(192379),s=n(120356),r=n.n(s),o=n(913527),c=n.n(o),u=n(91192),d=n(442837),_=n(481060),h=n(700582),f=n(493773),g=n(724757),m=n(212819),E=n(933557),p=n(266076),I=n(810123),A=n(448486),S=n(987509),C=n(592125),x=n(430824),b=n(158776),L=n(306680),v=n(699516),N=n(594174),T=n(626135),y=n(55935),P=n(823379),Z=n(51144),w=n(784384),R=n(981631),O=n(490897),k=n(388032),D=n(190417),j=((l={}).TOGGLE="toggle",l.SEND="send",l);function F(e){let{message:t,destination:n,rowMode:l,icon:s,label:o,subLabel:c,selected:d,disabled:h,onPressDestination:g,"aria-setsize":m,"aria-posinset":E}=e,p=(0,u.JA)(n.id),[I,A]=a.useState(!1),S=a.useRef(!1),C=a.useCallback(()=>{if("send"===l){A(!0),S.current=!0;return}null==g||g(n)},[l,g,n]),x=a.useCallback(()=>{T.default.track(R.rMx.FORWARD_ONE_TAP_VIEW,{channel_id:t.channel_id,message_id:t.id}),S.current=!1,null==g||g(n,{transitionToDestination:!0,closeAfterSend:!0})},[t.channel_id,t.id,g,n]),b=a.useCallback(()=>{A(!1),S.current=!1,T.default.track(R.rMx.FORWARD_ONE_TAP_UNDO,{channel_id:t.channel_id,message_id:t.id})},[t]);return(0,f.Z)(()=>()=>{S.current&&(S.current=!1,null==g||g(n,{transitionToDestination:!1,closeAfterSend:!1}))}),(0,i.jsxs)(_.P3F,{className:r()(D.destinationRow,{[D.disabled]:h}),onClick:h||I?void 0:C,"aria-selected":d,"aria-setsize":m,"aria-posinset":E,...p,children:[(0,i.jsxs)("div",{className:D.identity,children:[(0,i.jsx)("div",{className:D.iconWrapper,children:s}),(0,i.jsxs)("div",{className:D.labels,children:[(0,i.jsx)(_.Text,{tag:"strong",className:D.label,variant:"text-md/semibold",lineClamp:1,children:o}),(0,i.jsx)(_.Text,{className:D.subLabel,variant:"text-xs/normal",color:"text-muted",children:c})]})]}),"toggle"===l&&!h&&(0,i.jsx)(_.XZJ,{type:_.XZJ.Types.INVERTED,displayOnly:!0,size:24,value:d,className:D.checkbox}),"send"===l&&!h&&(0,i.jsxs)("div",{className:D.actions,children:[I?(0,i.jsx)(_.zxk,{size:_.zxk.Sizes.SMALL,color:_.zxk.Colors.PRIMARY,look:_.zxk.Looks.LINK,onClick:x,children:k.intl.string(k.t["HO/oXl"])}):(0,i.jsx)("div",{className:r()((0,_.nYM)({size:_.zxk.Sizes.SMALL,color:_.zxk.Colors.BRAND}),D.fauxButton),children:k.intl.string(k.t.TXNS7e)}),I&&(0,i.jsx)(_.zxk,{size:_.zxk.Sizes.SMALL,color:_.zxk.Colors.BRAND,look:_.zxk.Looks.OUTLINED,onClick:b,children:k.intl.string(k.t.KyUKhY)})]})]})}function M(e){let{user:t,subLabel:n,...l}=e,a=Z.ZP.useName(t),s=Z.ZP.useUserTag(t,{decoration:"never"}),r=(0,d.e7)([v.Z],()=>v.Z.getNickname(t.id)),o=(0,d.e7)([b.Z],()=>b.Z.getStatus(t.id));return(0,i.jsx)(F,{...l,icon:(0,i.jsx)(h.Z,{"aria-hidden":!0,size:_.EFr.SIZE_32,user:t,status:o}),label:null!=r?r:a,subLabel:null!=n?n:s})}function G(e){let{channel:t,subLabel:n,...l}=e,a=(0,E.ZP)(t),s=(0,A._)(t);return(0,i.jsx)(F,{...l,icon:(0,i.jsx)(p.Z,{"aria-hidden":!0,size:_.EFr.SIZE_32,channel:t,experimentLocation:"forward-modal"}),label:a,subLabel:null!=n?n:s})}function U(e){let{channel:t,subLabel:n,...l}=e,a=(0,d.e7)([x.Z],()=>x.Z.getGuild(null==t?void 0:t.guild_id)),s=(0,E.ZP)(t),r=(0,d.e7)([C.Z,N.default,v.Z],()=>{let e=C.Z.getChannel(t.parent_id);return null==e?null:(0,E.F6)(e,N.default,v.Z,!1)}),o=(0,d.e7)([L.ZP],()=>L.ZP.lastMessageTimestamp(t.id,O.W.CHANNEL)),u=null==a?void 0:a.name;if(t.isThread()||t.isForumPost()){let e=t.isForumPost()?_.Mmi:_.VL1;u=(0,i.jsxs)("div",{className:D.threadSubLabel,children:[(0,i.jsx)(e,{color:_.TVs.colors.TEXT_SECONDARY,className:D.subLabelIcon}),(0,i.jsx)(_.Text,{variant:"text-xs/medium",color:"text-secondary",lineClamp:1,children:r}),null!=o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.Text,{className:D.subLabelSeparator,variant:"text-xs/medium",color:"text-secondary",children:"â€¢"}),(0,i.jsx)(_.Text,{variant:"text-xs/medium",color:"text-secondary",children:(0,y.Xf)(c()(o))})]}):null]})}return(0,i.jsx)(F,{...l,icon:(0,i.jsx)(I.Z,{size:I.E.SMALL_32,guild:a,channel:t}),label:s,subLabel:null!=n?n:u})}function W(e){let{rowData:t,rowMode:n,message:l,originChannel:s,selectedDestinations:r,handleToggleDestination:o,disableSelection:c,...d}=e,h=a.useMemo(()=>[t.length],[t.length]),f=a.useCallback(()=>48,[]),E=a.useMemo(()=>{var e;return null!==(e=null==r?void 0:r.map(S.hC))&&void 0!==e?e:[]},[r]),p=a.useCallback(e=>{let{section:a,row:r}=e;if(a>0)return;let{type:u,record:d}=t[r];if(u===m.h8.HEADER)return;let _=u===m.h8.USER?{type:"user",id:d.id}:{type:"channel",id:d.id},h=(0,S.hC)(_),f=(0,w.HY)(l,s,d),g=E.includes(h),p={key:h,message:l,destination:_,rowMode:n,subLabel:null!=f?f.label:void 0,disabled:c&&!g||null!=f,selected:g,onPressDestination:o,"aria-posinset":r+1,"aria-setsize":t.length};return u===m.h8.USER?(0,i.jsx)(M,{user:d,...p}):u===m.h8.GROUP_DM?(0,i.jsx)(G,{channel:d,...p}):u===m.h8.TEXT_CHANNEL||u===m.h8.VOICE_CHANNEL?(0,i.jsx)(U,{channel:d,...p}):void(0,P.vE)(u)},[c,o,l,s,t,n,E]),I=a.useRef(null),A=(0,g.Z)("forward-modal",I);return(0,i.jsx)(u.bG,{navigator:A,children:(0,i.jsx)(u.SJ,{children:e=>{let{ref:t,...n}=e;return(0,i.jsx)(_.YAO,{scrollerRef:e=>{var n;I.current=e,t.current=null!==(n=null==e?void 0:e.getScrollerNode())&&void 0!==n?n:null},...n,...d,sections:h,sectionHeight:0,renderRow:p,rowHeight:f})}})})}},388275:function(e,t,n){n.d(t,{n:()=>I}),n(47120);var l=n(200651),i=n(192379),a=n(442837),s=n(481060),r=n(430742),o=n(541716),c=n(752305),u=n(893718),d=n(849522),_=n(703558),h=n(784384),f=n(822869),g=n(912332),m=n(646746),E=n(388032),p=n(190417);function I(e){let{message:t,forwardOptions:n,sendLabel:I,canSend:A,selectedDestinations:S,isSending:C,onSend:x,showPreview:b}=e,L=(0,d.Z)(),v=(0,h.nm)(S),N=(0,h.y)(S),T=(0,f.Ad)(),y=(0,a.e7)([_.Z],()=>_.Z.getDraft(t.channel_id,_.d.ForwardContextMessage)),[P,Z]=i.useState(()=>(0,c.eK)(y)),{textValue:w,richValue:R}=P,[O,k]=i.useState(!1),D=i.useCallback(()=>k(!0),[]),j=i.useCallback(()=>k(!1),[]),F=i.useCallback((e,n,l)=>{Z({textValue:n,richValue:l}),r.Z.saveDraft(t.channel_id,n,_.d.ForwardContextMessage),T(t.channel_id,t.id)},[T,t]),M=i.useCallback(()=>{r.Z.clearDraft(t.channel_id,_.d.ForwardContextMessage),x(w)},[t.channel_id,x,w]),G=i.useCallback(()=>(!A||w.length>L||M(),Promise.resolve({shouldClear:!1,shouldRefocus:!0})),[M,w,L,A]);return(0,l.jsxs)(s.mzw,{className:p.footerWithMessage,children:[b&&(0,l.jsx)("div",{className:p.forwardPreviewWrapper,children:(0,l.jsx)(m.O,{message:t,forwardOptions:n,channel:v})}),(0,l.jsxs)("div",{className:p.footerWarningWrapper,children:[(0,l.jsxs)("div",{className:p.footerButtons,children:[(0,l.jsx)(u.Z,{innerClassName:p.messageInput,onChange:F,placeholder:E.intl.string(E.t.ZroO3N),channel:v,textValue:w,richValue:R,type:o.Ie.FORWARD_MESSAGE_INPUT,onBlur:j,onFocus:D,focused:O,onSubmit:G,parentModalKey:g.so,autoCompletePosition:"bottom",emojiPickerCloseOnModalOuterClick:!0,disableThemedBackground:!0}),(0,l.jsx)(s.zxk,{className:p.sendWithMessage,submitting:C,disabled:!A||w.length>L,onClick:M,children:I})]}),N.length>0&&w.length>0&&(0,l.jsx)(s.Text,{variant:"text-sm/normal",color:"text-warning",children:E.intl.format(E.t.xJFpio,{count:N.length,channelNames:N.join(", ")})})]})]})}},930864:function(e,t,n){n.d(t,{ForwardModal:()=>y}),n(47120);var l=n(200651),i=n(192379),a=n(392711),s=n(442837),r=n(481060),o=n(348245),c=n(359110),u=n(987509),d=n(72214),_=n(592125),h=n(375954),f=n(934415),g=n(572004),m=n(823379),E=n(859155),p=n(822869),I=n(346610),A=n(895442),S=n(757853),C=n(388275),x=n(912332),b=n(646746),L=n(819727),v=n(388032),N=n(190417),T=n(621054);function y(e){let{message:t,initialSelectedDestinations:y,forwardOptions:P,onClose:Z,onRequestSent:w,...R}=e,{channel_id:O,id:k}=t,{hasOneTapSendButton:D,hasMessageInput:j,hasPreview:F}=(0,I.yk)({location:"ForwardModal"}),M=i.useMemo(()=>(0,u.dL)(O),[O]),[G,U]=i.useState(!1),W=(0,s.e7)([h.Z],()=>{var e;return null!==(e=h.Z.getMessage(t.channel_id,t.id))&&void 0!==e?e:t},[t]),z=(0,s.e7)([_.Z],()=>_.Z.getChannel(O),[O]),Q=(0,p.ZF)(),H=(0,p.mh)(),V=i.useRef(0),B=i.useRef(0),[q,K]=i.useState(y),Y=q.length,X=Y>=L.G,[J,$]=i.useState(""),{results:ee,updateSearchText:et}=(0,d.s)({selectedDestinations:q,originDestination:M,includeMissingDMs:!0}),en=i.useCallback(e=>{$(e),et(e),B.current+=1,""!==e&&H(O,k)},[O,k,H,et]),el=i.useCallback(()=>{(0,p.sF)({channelId:O,messageId:k,numDestinationChanges:V.current,numQueryChanges:B.current}),Z()},[O,k,Z]),ei=i.useCallback(()=>{var e;let t=null===(e=_.Z.getChannel(O))||void 0===e?void 0:e.guild_id,n=(0,f.wR)(t,O,k);(0,r.showToast)((0,r.createToast)(v.intl.string(v.t["L/PwZW"]),r.ToastType.LINK)),(0,g.JG)(n),(0,p.xp)(O,k)},[O,k]),ea=i.useCallback(()=>{$("")},[$]),es=i.useRef(null);i.useEffect(()=>{if(""===J){var e;null===(e=es.current)||void 0===e||e.focus()}},[J]);let er=i.useMemo(()=>(0,a.throttle)(()=>{(0,r.showToast)((0,r.createToast)(v.intl.string(v.t.kwmYkp),r.ToastType.FORWARD))},3e3,{leading:!0,trailing:!1}),[]),eo=i.useCallback(e=>{Q(O,k,""!==J),K(t=>{let n=t.findIndex(t=>{let{type:n,id:l}=t;return n===e.type&&l===e.id});if(-1===n)return X?t:($(""),V.current+=1,[e,...t]);let l=[...t];return l.splice(n,1),V.current+=1,l})},[O,X,k,J,Q]),ec=i.useCallback(async function(e){var i;let{withMessage:a,transitionToDestination:s,closeAfterSend:d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=null!==(i=h.Z.getMessage(O,k))&&void 0!==i?i:t;if(null==f){(0,r.showToast)((0,r.createToast)(v.intl.string(v.t.R0RpRU),r.ToastType.FAILURE));return}U(!0);let g=(await Promise.all(e.map(u.qx))).filter(m.lm);if((0,A.Z)(f,g)&&!await new Promise(e=>{(0,r.ZDy)(async()=>{let{default:t}=await n.e("88643").then(n.bind(n,466080));return n=>(0,l.jsx)(t,{...n,onConfirm:()=>e(!0),onBack:()=>e(!1)})})})){U(!1);return}d&&(0,x.mc)(),null==w||w(),s&&(await o.Z.fetchMessages({channelId:g[0]}),(0,c.Kh)(g[0],{openTextInVoiceIfVoiceChannel:!0}));let I=await E.Z.sendForwards(f,g,{...P,withMessage:a}),S=g.some(e=>{let t=_.Z.getChannel(e);return null!=t&&t.rateLimitPerUser>0});if(I.every(e=>{let{status:t}=e;return"fulfilled"===t})){(0,p.gP)({channelId:O,messageId:k,hasError:!1,hasContextMessage:null!=a&&""!==a,numDestinations:g.length,numDestinationChanges:V.current,numQueryChanges:B.current,anyDestinationHasSlowmode:S}),er();return}(0,p.gP)({channelId:O,messageId:k,hasError:!0,hasContextMessage:null!=a&&""!==a,numDestinations:g.length,numDestinationChanges:V.current,numQueryChanges:B.current,anyDestinationHasSlowmode:S});let C=e.filter((e,t)=>"rejected"===I[t].status);(0,x.Np)({message:f,failedDestinations:C,forwardOptions:P})},[O,P,k,t,w,er]),eu=i.useCallback(e=>{ec(q,{withMessage:e,transitionToDestination:1===q.length,closeAfterSend:!0})},[ec,q]),ed=i.useCallback(()=>eu(),[eu]),e_=i.useCallback(function(e){let{transitionToDestination:t,closeAfterSend:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ec([e],{transitionToDestination:t,closeAfterSend:n})},[ec]);if(null==W||null==z)return null;let eh=ee.length>0?(0,l.jsx)(S.F,{paddingBottom:16,paddingTop:16,rowData:ee,rowMode:D?S.G.SEND:S.G.TOGGLE,message:W,originChannel:z,handleToggleDestination:D?e_:eo,selectedDestinations:q,disableSelection:X}):(0,l.jsxs)(r.hzk,{className:N.noResults,children:[(0,l.jsx)("img",{className:N.noResultsImg,src:T,alt:""}),(0,l.jsx)(r.Text,{variant:"text-md/normal",color:"text-muted",children:v.intl.string(v.t.V6nAfH)})]}),ef=Y<=1?v.intl.string(v.t.TXNS7e):v.intl.formatToPlainString(v.t.jWtYUl,{count:Y});return(0,l.jsxs)(r.Y0X,{className:N.modal,"aria-label":v.intl.string(v.t["+SkRRk"]),...R,children:[(0,l.jsxs)(r.xBx,{className:N.header,children:[(0,l.jsxs)("div",{className:N.titleLine,children:[(0,l.jsx)("div",{className:N.title,children:(0,l.jsx)(r.y5t,{component:(0,l.jsx)(r.X6q,{variant:"heading-lg/semibold",children:v.intl.string(v.t["+SkRRk"])}),children:X?(0,l.jsx)(r.Text,{variant:"text-sm/normal",color:"text-warning",children:v.intl.format(v.t["3Fbkio"],{count:L.G})}):(D||j)&&(0,l.jsx)(r.X6q,{variant:"heading-sm/normal",color:"header-muted",children:v.intl.string(v.t["VA+btL"])})})}),(0,l.jsx)(r.olH,{className:N.closeButton,onClick:el})]}),D&&F&&(0,l.jsx)("div",{className:N.forwardPreviewWrapperInset,children:(0,l.jsx)(b.O,{message:W,forwardOptions:P})}),(0,l.jsx)(r.E1j,{ref:es,size:r.E1j.Sizes.MEDIUM,query:J,onChange:en,onClear:ea,placeholder:v.intl.string(v.t["5h0QOD"]),"aria-label":v.intl.string(v.t["5h0QOD"]),autoFocus:!0})]}),eh,!D&&(j?(0,l.jsx)(C.n,{message:W,forwardOptions:P,sendLabel:ef,canSend:Y>0,selectedDestinations:q,isSending:G,onSend:eu,showPreview:F}):(0,l.jsxs)(r.mzw,{className:N.footer,children:[(0,l.jsx)(r.zxk,{submitting:G,disabled:0===Y,onClick:ed,children:ef}),(0,l.jsx)(r.zxk,{onClick:ei,look:r.zxk.Looks.OUTLINED,color:r.zxk.Colors.PRIMARY,children:v.intl.string(v.t.WqhZsr)})]}))]})}},646746:function(e,t,n){n.d(t,{O:()=>E});var l=n(200651),i=n(192379),a=n(120356),s=n.n(a),r=n(392711),o=n(481060),c=n(686546),u=n(124347),d=n(499376),_=n(937889),h=n(930282),f=n(318616),g=n(388032),m=n(178837);function E(e){let{message:t,forwardOptions:n,channel:a}=e,{attachments:E,embeds:p,hasContent:I,contentMessage:A}=(0,f.c)({message:t,channel:a,forwardOptions:n}),S=i.useMemo(()=>I?(0,_.ZP)(t,{formatInline:!0,allowLinks:!0,allowHeading:!0,allowList:!0,hideSimpleEmbedContent:!1,contentMessage:A}).content:null,[A,I,t]),C=E.length,x=null,b=null,L=null;if(C>0||p.length>0){var v,N,T,y;let e=(0,r.countBy)(E,e=>(0,d.aw)(e,!0)),t=null!==(T=e.IMAGE)&&void 0!==T?T:0,n=null!==(y=e.VIDEO)&&void 0!==y?y:0;t>0&&n>0?(x=g.intl.formatToPlainString(g.t.Lr0Toq,{image_count:t,video_count:n}),b=o.Ka2):n>0?(x=g.intl.formatToPlainString(g.t.SJ6pPT,{count:n}),b=o.g8d):t>0?(x=g.intl.formatToPlainString(g.t.h4pFfX,{count:t}),b=1===t?o.XBm:o.Ka2):(x=g.intl.formatToPlainString(g.t["89ihS0"],{count:C}),b=o.Ujz),n>0&&C===n?L=(0,l.jsxs)("div",{className:s()(m.attachmentPreview,m.attachmentPreviewVideo),children:[(0,l.jsx)(u.ZP,{className:m.thumbnail,src:E[0].proxy_url,width:56,height:56}),(0,l.jsx)(o.g8d,{className:m.playIcon,size:"md",color:"white"})]}):C>0?L=(0,l.jsx)("div",{className:m.attachmentPreview,children:(0,l.jsx)(u.ZP,{src:E[0].proxy_url,width:56,height:56})}):(null===(N=p[0])||void 0===N?void 0:null===(v=N.thumbnail)||void 0===v?void 0:v.proxyURL)!=null&&(L=(0,l.jsx)("div",{className:m.attachmentPreview,children:(0,l.jsx)(u.ZP,{src:p[0].thumbnail.proxyURL,width:56,height:56})}))}return C>1&&null!=L&&(L=(0,l.jsxs)("div",{className:m.attachmentPreviewOverflow,children:[(0,l.jsx)(c.ZP,{mask:c.ZP.Masks.FORWARD_ATTACHMENT_PILE_OVERFLOW,width:56,height:56,children:L}),(0,l.jsxs)(o.Text,{className:m.overflowCount,variant:"text-xs/semibold",color:"text-normal",children:["+",C-1]})]})),(0,l.jsxs)("div",{className:m.forwardPreview,children:[(0,l.jsx)("div",{className:m.quote}),(0,l.jsxs)("div",{className:m.contentWrapper,children:[I&&(0,l.jsx)(h.ZP,{className:s()(m.forwardPreviewMessage,C>0&&m.hasAttachments),message:t,content:S}),C>0&&(0,l.jsxs)("div",{className:m.attachmentRow,children:[null!=b&&(0,l.jsx)(b,{size:"custom",width:I?18:20,color:o.TVs.colors.TEXT_LOW_CONTRAST}),null!=x&&(0,l.jsx)(o.Text,{variant:I?"text-sm/medium":"text-md/medium",color:"text-low-contrast",children:x})]})]}),L]})}},761080:function(e,t,n){n.d(t,{KF:()=>a}),n(47120);var l=n(70956),i=n(981631);l.Z.Millis.MINUTE;let a="1312632705086787756";i.hBH.IMAGE,i.hBH.GIFV},93687:function(e,t,n){n.d(t,{Z:()=>l});let l=(0,n(818083).B)({kind:"user",id:"2024-04_gdm_presence",label:"Group DM Presence",defaultConfig:{isFacepileEnabled:!1,isStatusIndicatorEnabled:!1,isTypingIndicatorEnabled:!1},treatments:[{id:1,label:"Status Indicator Only",config:{isFacepileEnabled:!1,isStatusIndicatorEnabled:!0,isTypingIndicatorEnabled:!1}},{id:2,label:"Typing Indicator Only",config:{isFacepileEnabled:!1,isStatusIndicatorEnabled:!1,isTypingIndicatorEnabled:!0}},{id:3,label:"Status Indicator + Typing Indicator",config:{isFacepileEnabled:!1,isStatusIndicatorEnabled:!0,isTypingIndicatorEnabled:!0}},{id:4,label:"Facepile Only",config:{isFacepileEnabled:!0,isStatusIndicatorEnabled:!1,isTypingIndicatorEnabled:!1}},{id:5,label:"Facepile + Status Indicator",config:{isFacepileEnabled:!0,isStatusIndicatorEnabled:!0,isTypingIndicatorEnabled:!1}},{id:6,label:"Facepile + Typing Indicator",config:{isFacepileEnabled:!0,isStatusIndicatorEnabled:!1,isTypingIndicatorEnabled:!0}},{id:7,label:"Facepile + Typing Indicator + Status Indicator",config:{isFacepileEnabled:!0,isStatusIndicatorEnabled:!0,isTypingIndicatorEnabled:!0}}]})},266076:function(e,t,n){n.d(t,{Z:()=>c});var l=n(200651),i=n(192379),a=n(481060),s=n(43267),r=n(93687),o=n(785232);let c=i.memo(function(e){let{channel:t,size:n,facepileSizeOverride:i,experimentLocation:c,isTyping:u,status:d,className:_,animated:h=!1,...f}=e,{isFacepileEnabled:g}=r.Z.useExperiment({location:c},{autoTrackExposure:!0});return t.recipients.length>=2&&g&&null==t.icon?(0,l.jsx)(o.Z,{"aria-label":f["aria-label"],"aria-hidden":f["aria-hidden"],className:_,recipients:t.recipients,size:null!=i?i:n,isTyping:u,status:d}):(0,l.jsx)(a.qEK,{"aria-hidden":f["aria-hidden"],"aria-label":f["aria-label"],className:_,size:n,src:(0,s.x)(t,80,h)})})},785232:function(e,t,n){n.d(t,{Z:()=>o});var l=n(200651);n(192379);var i=n(442837),a=n(481060),s=n(289823),r=n(594174);let o=function(e){let{recipients:t,size:n,status:o,isTyping:c,className:u,...d}=e,_=a.ny6[n],h=(0,i.Wu)([r.default],()=>t.slice(0,2).map(e=>{let t=r.default.getUser(e);if(null!=t)return t.getAvatarURL(void 0,_.size,!1)}),[t,_.size]);return(0,l.jsx)(s.Z,{"aria-label":d["aria-label"],"aria-hidden":d["aria-hidden"],backSrc:h[0],frontSrc:h[1],size:n,status:o,isTyping:null!=c&&c,className:u})}},810123:function(e,t,n){n.d(t,{E:()=>d,Z:()=>f});var l,i=n(200651),a=n(120356),s=n.n(a),r=n(468194),o=n(471445),c=n(686546),u=n(311533),d=((l={}).SMALL_32="SMALL_32",l);let _={SMALL_32:24},h={SMALL_32:[13,11,10,10,10,10,10]},f=function(e){var t;let{className:n,iconClassName:l,size:a,channel:d,guild:f,locked:g,hasActiveThreads:m}=e;if(null==f)return null;let E=f.getIconURL(48),p=h[a],I=_[a],A=(0,o.KS)(d,f,{locked:g,hasActiveThreads:m});if(null==A)return null;let S=(0,r.Zg)(null!==(t=null==f?void 0:f.toString())&&void 0!==t?t:null);return(0,i.jsxs)("div",{role:"img",className:n,children:[(0,i.jsx)(c.ZP,{mask:c.QS.GUILD_ICON_WITH_CHANNEL_TYPE,children:null!=E?(0,i.jsx)("img",{alt:"",src:E,className:u.channelGuildIcon,style:{width:I,height:I}}):(0,i.jsx)("div",{className:s()(u.channelGuildIcon,u.acronym),style:{fontSize:S.length-1>p.length?p[p.length-1]:p[S.length-1],width:I,height:I},children:S})}),(0,i.jsx)(A,{className:s()(u.icon,u.iconWithGuildIcon,l),color:"currentColor"})]})}},448486:function(e,t,n){n.d(t,{_:()=>c});var l=n(192379),i=n(442837),a=n(594174),s=n(823379),r=n(51144),o=n(388032);function c(e){let t=(0,i.Wu)([a.default],()=>e.recipients.map(e=>a.default.getUser(e)).filter(s.lm).map(e=>r.ZP.getName(e)));return l.useMemo(()=>""===e.name?null:function(e){if(0===e.length)return null;if(1===e.length)return o.intl.formatToPlainString(o.t["J+Wpsr"],{first:e[0]});if(2===e.length)return o.intl.formatToPlainString(o.t.gwRP0d,{first:e[0],second:e[1]});if(3===e.length)return o.intl.formatToPlainString(o.t.QDB5en,{first:e[0],second:e[1],third:e[2]});let t=e.length-3;return o.intl.formatToPlainString(o.t.VYfueX,{first:e[0],second:e[1],third:e[2],count:t})}(t),[e,t])}},499376:function(e,t,n){n.d(t,{Ld:()=>c,R_:()=>o,aw:()=>u,pU:()=>d}),n(789020);var l=n(630388),i=n(406432),a=n(828061),s=n(981631);let r=/\.(mp3|m4a|ogg|opus|wav|flac)$/i,o=e=>"IMAGE"===e||"VIDEO"===e||"CLIP"===e||"VISUAL_PLACEHOLDER"===e,c=e=>"IMAGE"===e||"VIDEO"===e||"VISUAL_PLACEHOLDER"===e;function u(e,t){let{filename:n,width:o,height:c}=e;if(t&&null!=o&&o>0&&null!=c&&c>0){var u;if((0,i.CO)(n))return"IMAGE";if(!(0,i.NU)(n)||null==e.proxy_url)return"INVALID";return(0,l.yE)(null!==(u=e.flags)&&void 0!==u?u:0,s.J0y.IS_CLIP)?"CLIP":"VIDEO"}return null!=t&&r.test(n)&&null!=e.url?"AUDIO":null!=e.url&&(0,a.O)(n)?"PLAINTEXT_PREVIEW":"OTHER"}function d(e){let{contentType:t,width:n,height:l}=e;if(null!=n&&n>0&&null!=l&&l>0){if((0,i.tw)(t))return"IMAGE";if((0,i.X2)(t))return"VIDEO"}return"VISUAL_PLACEHOLDER"}},51596:function(e,t,n){n.d(t,{$Z:()=>T,Cp:()=>y,F_:()=>L,Se:()=>w,tF:()=>Z,yC:()=>P}),n(757143),n(47120);var l=n(570140),i=n(493683),a=n(475179),s=n(925549),r=n(287734),o=n(212819),c=n(336197),u=n(359110),d=n(769654),_=n(131704),h=n(592125),f=n(283595),g=n(944486),m=n(914010),E=n(626135),p=n(777754),I=n(823385),A=n(981631),S=n(176505);let C=()=>Promise.resolve();C=n(346329).playApplication;let x=Object.freeze({[o.xQ.USER]:o.h8.USER,[o.xQ.TEXT_CHANNEL]:o.h8.TEXT_CHANNEL,[o.xQ.VOICE_CHANNEL]:o.h8.VOICE_CHANNEL,[o.xQ.GUILD]:o.h8.GUILD,[o.xQ.APPLICATION]:o.h8.APPLICATION}),b=new RegExp("^".concat(o.xQ.USER,"|").concat(o.xQ.TEXT_CHANNEL,"|").concat(o.xQ.VOICE_CHANNEL,"|\\").concat(o.xQ.GUILD,"|\\").concat(o.xQ.APPLICATION));function L(e){var t;let n;let[l,i]=(n=null!==(t=x[e.charAt(0)])&&void 0!==t?t:null,[e.replace(b,""),n]);return{query:l,queryMode:i}}function v(e,t){let{results:n,queryMode:l,query:i,maxQueryLength:a}=I.Z.getProps(),s=m.Z.getGuildId(),r=g.Z.getChannelId(s),c=n[(0,o.gJ)(o.a8.DOWN,-1,n)],u=p.Z.isEmail(i),d=p.Z.isPhoneNumber(i),f=p.Z.isUserTagLike(i),A=null!=r&&(0,S.AB)(r),C=e=>null==e?null:e.type===o.h8.IN_APP_NAVIGATION?e.type+"_"+e.record.type:e.type,x={current_channel_id:A?void 0:r,current_channel_static_route:A?r:void 0,current_guild_id:s,query_mode:null!=l?l:"GENERAL",query_length:i.length,max_query_length:a,is_email_like:u,is_phone_like:d,is_username_like:f,query:u||d||f?null:i,top_result_type:C(c),top_result_score:null!=c?c.score:null,num_results_total:I.Z.getResultTotals(),num_results_users:I.Z.getResultTotals(o.h8.USER),num_results_text_channels:I.Z.getResultTotals(o.h8.TEXT_CHANNEL),num_results_voice_channels:I.Z.getResultTotals(o.h8.VOICE_CHANNEL),num_results_guilds:I.Z.getResultTotals(o.h8.GUILD),num_results_group_dms:I.Z.getResultTotals(o.h8.GROUP_DM)};if(null!=r){let e=h.Z.getChannel(r);x.current_channel_type=null!=e?e.type:null}if(null!=t){let{type:e,score:l,record:i}=t;switch(x.selected_type=C(t),x.selected_score=l,x.selected_index=n.indexOf(t),e){case o.h8.GUILD:x.selected_guild_id=i.id;break;case o.h8.TEXT_CHANNEL:case o.h8.VOICE_CHANNEL:i instanceof _.Sf&&(x.selected_guild_id=null!=i.guild_id?i.guild_id:null),x.selected_channel_id=i.id;break;case o.h8.GROUP_DM:x.selected_channel_id=i.id;break;case o.h8.USER:x.selected_user_id=i.id}}E.default.track(e,x)}function N(){l.Z.dispatch({type:"QUICKSWITCHER_HIDE"})}function T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"KEYBIND",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(e){let t;if(I.Z.isOpen())return;let n=m.Z.getGuildId(),l=g.Z.getChannelId(n);if(null!=l){let e=h.Z.getChannel(l);t=null!=e?e.type:null}E.default.track(A.rMx.QUICKSWITCHER_OPENED,{source:e,current_guild_id:n,current_channel_id:l,current_channel_type:t})}(e),l.Z.dispatch({type:"QUICKSWITCHER_SHOW",...L(t)})}function y(){v(A.rMx.QUICKSWITCHER_CLOSED),N()}function P(e){l.Z.dispatch({type:"QUICKSWITCHER_SEARCH",...L(e)})}function Z(e){l.Z.dispatch({type:"QUICKSWITCHER_SELECT",selectedIndex:e})}function w(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];N(),v(A.rMx.QUICKSWITCHER_RESULT_SELECTED,e);let{type:_,record:g}=e,m={page:A.ZY5.QUICK_SWITCHER};switch(_){case o.h8.GUILD:(0,d.X)(g.id,{navigationReplace:!0});break;case o.h8.TEXT_CHANNEL:null!=(t=h.Z.getChannel(g.id))&&(0,u.Kh)(t.id,{state:{analyticsSource:m},navigationReplace:!0});break;case o.h8.VOICE_CHANNEL:null!=(t=h.Z.getChannel(g.id))&&(n?a.Z.updateChatOpen(g.id,!0):r.default.selectVoiceChannel(g.id),(0,u.Kh)(t.id,{state:{analyticsSource:m},navigationReplace:!0}));break;case o.h8.USER:i.Z.openPrivateChannel([g.id],!1,!1,"Quickswitcher"),s.Z.channelListScrollTo(A.ME,h.Z.getDMFromUserId(g.id));break;case o.h8.GROUP_DM:(0,u.Kh)(g.id,{navigationReplace:!0}),s.Z.channelListScrollTo(A.ME,g.id);break;case o.h8.APPLICATION:let E=f.Z.getActiveLibraryApplication(g.id);C(g.id,E,{analyticsParams:{source:A.Sbl.QUICK_SWITCHER,location:A.Sbl.QUICK_SWITCHER}});break;case o.h8.LINK:case o.h8.IN_APP_NAVIGATION:(0,c.Z)(g.path,{navigationReplace:!0})}l.Z.dispatch({type:"QUICKSWITCHER_SWITCH_TO",result:e})}},41837:function(e,t,n){n.d(t,{M:()=>i,o:()=>a});var l=n(212819);let i=Array.from([l.h8.USER,l.h8.TEXT_CHANNEL,l.h8.VOICE_CHANNEL,l.h8.GROUP_DM]);function a(e){return i.includes(e.type)}},987509:function(e,t,n){n.d(t,{ZP:()=>S,dL:()=>f,hC:()=>g,hl:()=>m,qx:()=>E}),n(47120),n(653041);var l=n(392711),i=n(493683),a=n(212819),s=n(938078),r=n(823385),o=n(592125),c=n(496675),u=n(594174),d=n(823379),_=n(41837),h=n(981631);function f(e){let t=o.Z.getChannel(e);return(null==t?void 0:t.type)===h.d4z.DM?{type:"user",id:t.recipients[0]}:{type:"channel",id:e}}function g(e){return"".concat(e.type,"-").concat(e.id)}function m(e){if("channel"===e.type)return e.id;let t=o.Z.getDMFromUserId(e.id);if(null!=t)return t}async function E(e){let t=m(e);if(null!=t)return t;if("user"===e.type)try{return await i.Z.getOrEnsurePrivateChannel(e.id)}catch(e){return}}function p(e){if("user"!==e.type)return(0,s.Z)(e.id);{let t=u.default.getUser(e.id);return null!=t?{type:a.h8.USER,record:t,score:0}:null}}function I(e,t){let n;let l=new Set;if(null!=t)for(let e of t)l.add(e);let i=[];for(let t of e)if(null!=t){if(t.type===a.h8.HEADER)n=t;else{let{id:e}=t.record;l.has(e)||(l.add(e),null!=n&&(i.push(n),n=void 0),i.push(t))}}return i}function A(e,t){return e.filter(e=>(0,d.lm)(e)&&(e.type===a.h8.HEADER||(0,_.o)(e)&&(e.type===a.h8.USER?t||null!=o.Z.getDMChannelFromUserId(e.record.id):e.type===a.h8.GROUP_DM||e.record.type!==h.d4z.GUILD_FORUM&&e.record.type!==h.d4z.GUILD_MEDIA&&c.Z.can(h.Plq.VIEW_CHANNEL,e.record)&&c.Z.can(h.Plq.SEND_MESSAGES,e.record))))}function S(e){let{results:t,hasQuery:n,queryMode:i,frequentChannels:a,targetDestination:o,selectedDestinations:c,pinnedDestinations:u,originDestination:d,includeMissingDMs:_}=e;if(n)return I(A(t,_));let h=null!=u&&u.length>0?u.map(e=>p(e)):[],f=r.Z.getChannelHistory(),g=f.length>0?f.map(e=>(0,s.Z)(e)):[],m=a.length>0?a.map(e=>(0,s.Z)(e.id)):[],E=A([...h,null!=o?p(o):null,...g,...m],_),S=(null==c?void 0:c.find(e=>(0,l.isEqual)(e,d)))!=null,C=null==d||S?[]:[d.id];return null!=i?I(E.filter(e=>e.type===i)):I(E,C).slice(0,15)}n(388032)},601565:function(e,t,n){n.d(t,{Z:()=>s}),n(47120);var l=n(192379),i=n(211266),a=n(212819);function s(e){let{searchOptions:t}=e,[n,s]=l.useState({results:[],query:""}),r=(0,i.Z)(()=>{let e=new a.ZP((e,t)=>{s({results:e,query:t})});return e.setLimit(20),e.search(""),e});return l.useEffect(()=>()=>r.destroy(),[r]),l.useEffect(()=>{null!=t&&t!==r.options&&r.setOptions(t)},[r,t]),{search:l.useCallback(e=>{var t;let{query:n,resultTypes:l}=e;(null==r.resultTypes||(t=r.resultTypes,!(l.length===t.size&&l.every(e=>t.has(e)))))&&(r.setResultTypes(l),r.setLimit(1===l.length?50:20)),r.search(""===n.trim()?"":n)},[r]),...n}}},72214:function(e,t,n){n.d(t,{s:()=>f}),n(47120);var l=n(192379),i=n(442837),a=n(38618),s=n(51596),r=n(516373),o=n(314897),c=n(580005),u=n(987509),d=n(601565),_=n(41837);function h(e){let{query:t,queryMode:n}=(0,s.F_)(e),l=_.M,i=null;return null!=n&&_.M.includes(n)&&(l=[n],i=n),{query:t,queryMode:i,resultTypes:l}}function f(e){let{targetDestination:t,selectedDestinations:n,originDestination:s,includeMissingDMs:_=!1}=e,f=(0,i.e7)([o.default],()=>o.default.getId()),g=l.useMemo(()=>({searchOptions:{blacklist:new Set(["user:".concat(f)]),frecencyBoosters:!0,userFilters:null}}),[f]),{search:m,query:E,results:p}=(0,d.Z)(g),[I,A]=l.useState(h("")),S=l.useCallback(e=>A(h(e)),[A]),{queryMode:C}=I,[x,b]=l.useState(null!=n?n:[]),L=l.useRef(n);l.useEffect(()=>{L.current=n}),l.useLayoutEffect(()=>{var e;let{query:t,resultTypes:n}=I;m({query:t,resultTypes:n}),b(null!==(e=L.current)&&void 0!==e?e:[])},[m,I]),(0,r.D)();let v=(0,i.e7)([c.Z],()=>c.Z.getFrequentlyWithoutFetchingLatest()),N=(0,i.e7)([a.Z],()=>a.Z.isConnected()),T=""!==E;return{results:l.useMemo(()=>(0,u.ZP)({results:p,hasQuery:T,queryMode:C,targetDestination:t,frequentChannels:v,selectedDestinations:n,pinnedDestinations:x,originDestination:s,includeMissingDMs:_,isConnected:N}),[p,T,C,t,v,n,x,s,_,N]),updateSearchText:S}}},678099:function(e,t,n){e.exports={closeButton:"closeButton__47998",art:"art__47998",description:"description__47998",conflictButton:"conflictButton__47998",linkButtonSize:"linkButtonSize__47998",linkButton:"linkButton__47998",retryButton:"retryButton__47998",conflictButtonInner:"conflictButtonInner__47998",title:"title__47998",buttonBody:"buttonBody__47998",timestamp:"timestamp__47998",choiceWrapper:"choiceWrapper__47998",choiceLine:"choiceLine__47998",choiceTitle:"choiceTitle__47998 title__47998",conflictTitle:"conflictTitle__47998 title__47998",conflictArt:"conflictArt__47998 art__47998",conflictDownloadArt:"conflictDownloadArt__47998 conflictArt__47998 art__47998",conflictUploadArt:"conflictUploadArt__47998 conflictArt__47998 art__47998",errorArt:"errorArt__47998 art__47998",modal:"modal__47998"}},465669:function(e,t,n){e.exports={container:"container__1ce5d",circularImage:"circularImage__1ce5d",dots:"dots__1ce5d"}},190417:function(e,t,n){e.exports={modal:"modal__62280",header:"header__62280",titleLine:"titleLine__62280",title:"title__62280",closeButton:"closeButton__62280",footer:"footer__62280",footerWithMessage:"footerWithMessage__62280",footerWarningWrapper:"footerWarningWrapper__62280",footerButtons:"footerButtons__62280",destinationRow:"destinationRow__62280",disabled:"disabled__62280",identity:"identity__62280",labels:"labels__62280",label:"label__62280",threadSubLabel:"threadSubLabel__62280",subLabelIcon:"subLabelIcon__62280",subLabelSeparator:"subLabelSeparator__62280",iconWrapper:"iconWrapper__62280",subLabel:"subLabel__62280",checkbox:"checkbox__62280",fauxButton:"fauxButton__62280",noResults:"noResults__62280",noResultsImg:"noResultsImg__62280",actions:"actions__62280",sendWithMessage:"sendWithMessage__62280",messageInput:"messageInput__62280",forwardPreviewWrapper:"forwardPreviewWrapper__62280",forwardPreviewWrapperInset:"forwardPreviewWrapperInset__62280"}},178837:function(e,t,n){e.exports={forwardPreview:"forwardPreview__68334",quote:"quote__68334",contentWrapper:"contentWrapper__68334",attachmentRow:"attachmentRow__68334",forwardPreviewMessage:"forwardPreviewMessage__68334",hasAttachments:"hasAttachments__68334",attachmentPreview:"attachmentPreview__68334",attachmentPreviewVideo:"attachmentPreviewVideo__68334",thumbnail:"thumbnail__68334",playIcon:"playIcon__68334",attachmentPreviewOverflow:"attachmentPreviewOverflow__68334",overflowCount:"overflowCount__68334"}},311533:function(e,t,n){e.exports={icon:"icon__2894c",iconWithGuildIcon:"iconWithGuildIcon__2894c",channelGuildIcon:"channelGuildIcon__2894c",acronym:"acronym__2894c"}}}]);
//# sourceMappingURL=4673d2335befb017.js.map