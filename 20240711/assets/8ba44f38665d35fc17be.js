"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["30676"],{719247:function(n,t,e){e.d(t,{T:function(){return A}}),e(47120);var r,i=e(392711),u=e.n(i),o=e(661869),E=e(876215),l=e(423875),a=e(442837),c=e(570140),T=e(158776),_=e(146282),s=e(26033),d=e(561308),f=e(981631),S=e(616922);function N(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}let M=new Set([E.s.LISTENED_SESSION]),I=new Map;function A(n){return"".concat(n.author_id,":").concat(n.id)}function O(n){let t=new Set,e=new Set;for(let r of n){let n=function(n){return(0,d.n2)(n)?null:(0,d.kr)(n)&&n.author_type===o.i.USER?T.Z.getActivities(n.author_id).find(t=>{if(t.type===f.IIU.PLAYING&&(0,s.d)(n))return function(n,t){let e=n.extra;return null!=e&&("application_id"in t&&t.application_id===e.application_id||"game_name"in e&&t.name===e.game_name)}(n,t);if(t.type===f.IIU.LISTENING&&n.content_type===E.s.LISTENED_SESSION){var e,r,i,u,o;return e=n,r=t,(null===(u=e.extra.entries[0])||void 0===u?void 0:null===(i=u.media)||void 0===i?void 0:i.provider)===l.p.SPOTIFY&&(0,S.Ps)(null===(o=r.party)||void 0===o?void 0:o.id)}return!1}):void 0}(r.content);if(void 0!==n){let i=A(r.content);e.add(i),n!==I.get(i)&&(t.add(i),I.set(i,n))}}return{updatedKeys:t,matchedKeys:e}}function R(){let n=!1,t=Array.from(I.keys()),e=new Set,r=new Set;for(let t of _.Z.getFeeds().values()){let{updatedKeys:i,matchedKeys:u}=O(e.size>0?t.entries.filter(n=>!e.has(A(n.content))):t.entries);for(let n of i)e.add(n);for(let n of u)r.add(n);n=n||i.size>0}for(let e of u().difference(t,[...r]))I.delete(e),n=!0;return n}class v extends(r=a.ZP.Store){initialize(){this.waitFor(_.Z,T.Z),this.syncWith([T.Z],R)}getMatchingActivity(n){return(0,d.n2)(n)?null:I.get(A(n))}constructor(...n){super(...n),N(this,"canRenderContent",n=>!(0,d.n2)(n)&&(!M.has(n.content_type)||null!=this.getMatchingActivity(n)))}}N(v,"displayName","ContentInventoryActivityStore"),t.Z=new v(c.Z,{CONNECTION_OPEN:function(){I.clear()},CONTENT_INVENTORY_SET_FEED:function(n){let{feed:t}=n,{updatedKeys:e}=O(t.entries);return e.size>0}})},26033:function(n,t,e){e.d(t,{d:function(){return i}});var r=e(876215);function i(n){return n.content_type===r.s.PLAYED_GAME||n.content_type===r.s.TOP_GAME}},327220:function(n,t,e){e.d(t,{Z:function(){return E}}),e(47120);var r=e(470079),i=e(442837),u=e(592125),o=e(9156);function E(n){let t=(0,i.e7)([u.Z],()=>u.Z.getPrivateChannelsVersion()),e=(0,i.e7)([u.Z],()=>u.Z.getMutableDMsByUserIds(),[t]),E=(0,i.e7)([o.ZP],()=>o.ZP.getMutedChannels(null)),l=r.useMemo(()=>{let n=new Set;for(let t in e){let r=e[t];null!=r&&E.has(r)&&n.add(t)}return n},[e,E]);return r.useMemo(()=>null==n?void 0:n.filter(n=>{for(let t of n.participants)if(l.has(t))return!1;return!0}),[n,l])}},959580:function(n,t,e){e.d(t,{Z:function(){return o}});var r=e(442837),i=e(719247);let u=[];function o(n){return(0,r.Wu)([i.Z],()=>null==n?u:n.filter(i.Z.canRenderContent),[n])}},371991:function(n,t,e){e.d(t,{tS:function(){return s},x3:function(){return d}}),e(47120);var r=e(735250),i=e(470079),u=e(442837),o=e(846519),E=e(481060),l=e(607070),a=e(706454),c=e(506071),T=e(561308),_=e(377329);function s(n,t){let[e,r]=i.useState(Date.now()),E=(0,c.n)(),a=(0,u.e7)([l.Z],()=>l.Z.useReducedMotion),_=i.useMemo(()=>{let{hours:t}=(0,T.JY)(n,e);return t>0?3e5:1e3},[n,e]);return i.useEffect(()=>{let n=new o.Xp;return n.start(_,()=>{r(Date.now())}),(!E||a&&!t)&&n.stop(),()=>n.stop()},[_,E,a,t]),e}let d=n=>{let{entry:t,inline:e=!1,textColor:u,hovered:o=!1}=n,l=s(t,o),a=i.useMemo(()=>(0,T.T_)(t,l),[t,l]);return(0,r.jsx)(E.Text,{className:e?_.inlineTimestamp:void 0,variant:"text-xs/normal",tabularNumbers:!0,color:u,children:a})};t.ZP=n=>{let{entry:t,textColor:e,hovered:i=!1}=n,o=(0,T.kr)(t),l=(0,u.e7)([a.default],()=>a.default.locale);return o?(0,r.jsx)(d,{entry:t,textColor:e,hovered:i}):(0,r.jsx)(E.Text,{variant:"text-xs/normal",color:e,lineClamp:1,children:(0,T.GL)(t,l)})}},897674:function(n,t,e){e.d(t,{Z:function(){return a},g:function(){return l}}),e(47120);var r=e(470079),i=e(442837),u=e(146282),o=e(327220),E=e(959580);function l(n,t){let{types:e}=n;return!!(null==e||e.has(t.content_type))||!1}function a(n){let{feed:t,filters:e}=(0,i.cj)([u.Z],()=>({feed:u.Z.getFeed(n),filters:u.Z.getFilters()})),a=r.useMemo(()=>{let n=null==t?void 0:t.entries.map(n=>n.content);return null!=e?null==n?void 0:n.filter(n=>l(e,n)):n},[t,e]);return a=(0,o.Z)(a),a=(0,E.Z)(a)}},561308:function(n,t,e){e.d(t,{EX:function(){return h},GE:function(){return p},GL:function(){return N},JY:function(){return f},Jd:function(){return P},Nq:function(){return D},Ol:function(){return O},PJ:function(){return I},T_:function(){return S},V5:function(){return Z},dw:function(){return C},ig:function(){return L},kr:function(){return A},n2:function(){return R},nB:function(){return G},q_:function(){return m},qy:function(){return y},vU:function(){return U},yA:function(){return v},yh:function(){return M},z5:function(){return g}}),e(47120);var r=e(164369),i=e(913527),u=e.n(i),o=e(884439),E=e(442837),l=e(876215),a=e(835473),c=e(70956),T=e(709054),_=e(719247),s=e(689938);let d=n=>{let{start:t,now:e}=n,r=Math.abs((e-t)/c.Z.Millis.SECOND),i=Math.floor(r)%c.Z.Seconds.MINUTE,u=Math.floor(r/c.Z.Seconds.MINUTE)%c.Z.Seconds.MINUTE,o=Math.floor(r/c.Z.Seconds.HOUR);return{seconds:i,minutes:u,hours:o,days:Math.floor(r/c.Z.Seconds.DAY)}},f=(n,t)=>{let e="id"in n?T.default.extractTimestamp(n.id):n.start;return d({start:e,now:"end"in n&&null!=n.end?Math.min(n.end,t):t})},S=(n,t)=>{let{seconds:e,minutes:r,hours:i}=f(n,t);function u(n){return String(n).padStart(2,"0")}return s.Z.Messages.MEMBER_LIST_CONTENT_FEED_TIMESTAMP_ACTIVE.format({hours:i,minutes:i>0?u(r):r,seconds:u(e)})},N=(n,t,e)=>{let r=u()(e),i=u()(T.default.extractTimestamp(n.id)),o=i.isSame(r,"day"),E=r.diff(i,"s");if(E<c.Z.Seconds.MINUTE)return s.Z.Messages.MEMBER_LIST_CONTENT_FEED_TIMESTAMP_SECONDS_AGO.format({count:E});if(E<c.Z.Seconds.HOUR){let n=Math.round(E/c.Z.Seconds.MINUTE);return s.Z.Messages.MEMBER_LIST_CONTENT_FEED_TIMESTAMP_MINUTES_AGO.format({count:n})}if(E<6*c.Z.Seconds.HOUR){let n=Math.round(E/c.Z.Seconds.HOUR);return s.Z.Messages.MEMBER_LIST_CONTENT_FEED_TIMESTAMP_HOURS_AGO.format({count:n})}else if(E<c.Z.Seconds.WEEK&&o)return i.toDate().toLocaleTimeString(t,{hour:"numeric"});else if(E<c.Z.Seconds.WEEK&&!o)return i.toDate().toLocaleTimeString(t,{weekday:"short",hour:"numeric"});let l=Math.round(E/(7*c.Z.Seconds.DAY));return s.Z.Messages.MEMBER_LIST_CONTENT_FEED_TIMESTAMP_WEEKS_AGO.format({count:l})},M=function(n,t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return A(n)?S(n,e):N(n,t,e)};function I(n,t){return n.traits.find(n=>n.type===t)}function A(n){var t,e;return null!==(e=null===(t=I(n,o.N.IS_LIVE))||void 0===t?void 0:t.is_live)&&void 0!==e&&e}function O(n){var t,e;return null!==(e=null===(t=I(n,o.N.FIRST_TIME))||void 0===t?void 0:t.first_time)&&void 0!==e&&e}function R(n){return null!=n.expires_at&&new Date(n.expires_at)<new Date}function v(n){var t;return null===(t=I(n,o.N.DURATION_SECONDS))||void 0===t?void 0:t.duration_seconds}function D(n){var t;return null===(t=I(n,o.N.AGGREGATE_RANGE))||void 0===t?void 0:t.range}function Z(n){var t;return null===(t=I(n,o.N.MARATHON))||void 0===t?void 0:t.marathon}function C(n){let t=I(n,o.N.RESURRECTED);return(null==t?void 0:t.resurrected_last_played)!=null?new Date(t.resurrected_last_played):void 0}function p(n){let{months:t=0,weeks:e=0,days:i=0}=(0,r.Z)({start:n,end:new Date});return s.Z.Messages.MEMBER_LIST_CONTENT_FEED_RESURRECTED_AFTER.format({months:t,weeks:t>0?0:e,days:t>0||e>0?0:i})}function P(n){return n.content_type===l.s.TOP_GAME}function U(n){var t;return null===(t=I(n,o.N.STREAK_DAYS))||void 0===t?void 0:t.streak_count_days}function m(n){let t=U(n);if(null==t||t<3)return!1;let e=T.default.extractTimestamp(n.id);return!(Date.now()-e>48*c.Z.Millis.HOUR)&&!0}function h(n){let t=v(n);if(null==t)return null;let e=Math.round(t/c.Z.Seconds.HOUR);return s.Z.Messages.MEMBER_LIST_CONTENT_FEED_PLAYED_FOR_HOURS.format({hours:e})}function g(n){var t;let e=null!==(t=v(n))&&void 0!==t?t:0;return e>10*c.Z.Seconds.HOUR?s.Z.Messages.MEMBER_LIST_CONTENT_FEED_EPIC_MARATHON:e>5*c.Z.Seconds.HOUR?s.Z.Messages.MEMBER_LIST_CONTENT_FEED_ULTRA_MARATHON:s.Z.Messages.MEMBER_LIST_CONTENT_FEED_MARATHON}function G(n){let t=h(n),e=g(n);return null==t?e:"".concat(e," â€” ").concat(t)}function L(n){var t;return null===(t=I(n,o.N.TRENDING_CONTENT))||void 0===t?void 0:t.trending}function y(n){let t=(0,E.e7)([_.Z],()=>_.Z.getMatchingActivity(n)),[e,r]=(0,a.Z)([null==t?void 0:t.application_id,n.extra.application_id]);return{activity:t,anyMatchingApplication:null!=e?e:r,activityApplication:e,fallbackApplication:r}}},661869:function(n,t,e){var r,i;e.d(t,{i:function(){return r}}),(i=r||(r={}))[i.AUTHOR_TYPE_UNSPECIFIED=0]="AUTHOR_TYPE_UNSPECIFIED",i[i.USER=1]="USER"},876215:function(n,t,e){var r,i;e.d(t,{s:function(){return r}}),(i=r||(r={}))[i.CONTENT_TYPE_UNSPECIFIED=0]="CONTENT_TYPE_UNSPECIFIED",i[i.PLAYED_GAME=1]="PLAYED_GAME",i[i.WATCHED_MEDIA=2]="WATCHED_MEDIA",i[i.TOP_GAME=3]="TOP_GAME",i[i.LISTENED_MEDIA=4]="LISTENED_MEDIA",i[i.LISTENED_SESSION=5]="LISTENED_SESSION",i[i.TOP_ARTIST=6]="TOP_ARTIST",i[i.CUSTOM_STATUS=7]="CUSTOM_STATUS"},423875:function(n,t,e){var r,i;e.d(t,{p:function(){return r}}),(i=r||(r={}))[i.PROVIDER_UNSPECIFIED=0]="PROVIDER_UNSPECIFIED",i[i.SPOTIFY=1]="SPOTIFY"},884439:function(n,t,e){var r,i;e.d(t,{N:function(){return r}}),(i=r||(r={}))[i.TRAIT_TYPE_UNSPECIFIED=0]="TRAIT_TYPE_UNSPECIFIED",i[i.FIRST_TIME=1]="FIRST_TIME",i[i.DURATION_SECONDS=2]="DURATION_SECONDS",i[i.IS_LIVE=3]="IS_LIVE",i[i.AGGREGATE_RANGE=4]="AGGREGATE_RANGE",i[i.RESURRECTED=5]="RESURRECTED",i[i.MARATHON=6]="MARATHON",i[i.NEW_RELEASE=7]="NEW_RELEASE",i[i.STREAK_DAYS=8]="STREAK_DAYS",i[i.TRENDING_CONTENT=9]="TRENDING_CONTENT",i[i.TOP_ITEM_TOTAL_COUNT=10]="TOP_ITEM_TOTAL_COUNT",i[i.TOP_PARENT_ITEM_TOTAL_COUNT=11]="TOP_PARENT_ITEM_TOTAL_COUNT",i[i.AGGREGATE_COUNT=12]="AGGREGATE_COUNT"}}]);
//# sourceMappingURL=8ba44f38665d35fc17be.js.map